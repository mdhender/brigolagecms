<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="generator" content="Pod::Site 0.50" />
    <title>Bric::Changes</title>
  </head>
  <body class="pod">

<ul id="index">
  <li><a href="Changes.html#Name">Name</a></li>
  <li><a href="Changes.html#Description">Description</a></li>
  <li><a href="Changes.html#Version-2.0.1-2011-02-09-">Version 2.0.1 (2011-02-09)</a>
    <ul>
      <li><a href="Changes.html#Improvements">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-2.0.0-2010-04-12-">Version 2.0.0 (2010-04-12)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes1">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.11.4-2010-03-29-">Version 1.11.4 (2010-03-29)</a>
    <ul>
      <li><a href="Changes.html#New-Features">New Features</a></li>
      <li><a href="Changes.html#Improvements1">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes2">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.11.3-2010-01-28-">Version 1.11.3 (2010-01-28)</a>
    <ul>
      <li><a href="Changes.html#Improvements2">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes3">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.11.2-2009-11-14-">Version 1.11.2 (2009-11-14)</a>
    <ul>
      <li><a href="Changes.html#New-Features1">New Features</a></li>
      <li><a href="Changes.html#Improvements3">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes4">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.11.1-2008-10-03-">Version 1.11.1 (2008-10-03)</a>
    <ul>
      <li><a href="Changes.html#Improvements4">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes5">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.11.0-2008-04-30-">Version 1.11.0 (2008-04-30)</a>
    <ul>
      <li><a href="Changes.html#New-Features2">New Features</a></li>
      <li><a href="Changes.html#UI-Improvements">UI Improvements</a></li>
      <li><a href="Changes.html#Improvements5">Improvements</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#VERSION-1.10.10-2010-04-11-">VERSION 1.10.10 (2010-04-11)</a>
    <ul>
      <li><a href="Changes.html#Improvements6">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes6">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#VERSION-1.10.9-2010-01-28-">VERSION 1.10.9 (2010-01-28)</a>
    <ul>
      <li><a href="Changes.html#Improvements7">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes7">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#VERSION-1.10.8-2009-11-14-">VERSION 1.10.8 (2009-11-14)</a>
    <ul>
      <li><a href="Changes.html#Improvements8">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes8">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.10.7-2009-03-12-">Version 1.10.7 (2009-03-12)</a>
    <ul>
      <li><a href="Changes.html#Improvements9">Improvements</a>
        <ul>
          <li><a href="Changes.html#Bug-Fixes9">Bug Fixes</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.10.6-2008-10-02-">Version 1.10.6 (2008-10-02)</a>
    <ul>
      <li><a href="Changes.html#Improvements10">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes10">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.10.5-2008-04-29-">Version 1.10.5 (2008-04-29)</a>
    <ul>
      <li><a href="Changes.html#Improvements11">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes11">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.10.4-2008-03-09-">Version 1.10.4 (2008-03-09)</a>
    <ul>
      <li><a href="Changes.html#Improvements12">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes12">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.10.3-Finally-2007-08-09-">Version 1.10.3 &quot;Finally&quot; (2007-08-09)</a>
    <ul>
      <li><a href="Changes.html#Improvements13">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes13">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.10.2-Summer-2006-06-22-">Version 1.10.2 &quot;Summer&quot; (2006-06-22)</a>
    <ul>
      <li><a href="Changes.html#Improvements14">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes14">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.10.1-2006-03-20-">Version 1.10.1 (2006-03-20)</a>
    <ul>
      <li><a href="Changes.html#New-Features3">New Features</a></li>
      <li><a href="Changes.html#Improvements15">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes15">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.10.0-2006-01-23-">Version 1.10.0 (2006-01-23)</a>
    <ul>
      <li><a href="Changes.html#Improvements16">Improvements</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.9.1-Peeves-2005-10-28-">Version 1.9.1 &quot;Peeves&quot; (2005-10-28)</a>
    <ul>
      <li><a href="Changes.html#New-Features4">New Features</a></li>
      <li><a href="Changes.html#Improvements17">Improvements</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.9.0-Punkin-2005-08-19-">Version 1.9.0 &quot;Punkin&quot; (2005-08-19)</a>
    <ul>
      <li><a href="Changes.html#New-Features5">New Features</a></li>
      <li><a href="Changes.html#Improvements18">Improvements</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.8.11-2006-06-19-">Version 1.8.11 (2006-06-19)</a>
    <ul>
      <li><a href="Changes.html#Improvements19">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes16">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.8.10-2006-03-16-">Version 1.8.10 (2006-03-16)</a>
    <ul>
      <li><a href="Changes.html#Improvements20">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes17">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.8.9-2006-01-23-">Version 1.8.9 (2006-01-23)</a>
    <ul>
      <li><a href="Changes.html#Improvements21">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes18">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.8.8-2005-10-27-">Version 1.8.8 (2005-10-27)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes19">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.8.7-2005-10-24-">Version 1.8.7 (2005-10-24)</a>
    <ul>
      <li><a href="Changes.html#Improvements22">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes20">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.8.6-2005-07-19-">Version 1.8.6 (2005-07-19)</a>
    <ul>
      <li><a href="Changes.html#Improvements23">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes21">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.8.5-2005-03-18-">Version 1.8.5 (2005-03-18)</a>
    <ul>
      <li><a href="Changes.html#Improvements24">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes22">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.8.4-2005-03-18-">Version 1.8.4 (2005-03-18)</a>
    <ul>
      <li><a href="Changes.html#Improvements25">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes23">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.8.3-2004-11-09-">Version 1.8.3 (2004-11-09)</a>
    <ul>
      <li><a href="Changes.html#Improvements26">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes24">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.8.2-2004-11-13-">Version 1.8.2 (2004-11-13)</a>
    <ul>
      <li><a href="Changes.html#Improvements27">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes25">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.8.1-2004-07-08-">Version 1.8.1 (2004-07-08)</a>
    <ul>
      <li><a href="Changes.html#Improvements28">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes26">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.8.0-Portland-2004-05-03-">Version 1.8.0 &quot;Portland&quot; (2004-05-03)</a>
    <ul>
      <li><a href="Changes.html#Improvements29">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes27">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.7.5-Ashland-2004-04-11-">Version 1.7.5 &quot;Ashland&quot; (2004-04-11)</a>
    <ul>
      <li><a href="Changes.html#New-Features6">New Features</a></li>
      <li><a href="Changes.html#Improvements30">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes28">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.7.4-Sacramento-2004-03-18-">Version 1.7.4 &quot;Sacramento&quot; (2004-03-18)</a>
    <ul>
      <li><a href="Changes.html#New-Features7">New Features</a></li>
      <li><a href="Changes.html#Improvements31">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes29">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.7.3-2004-03-01-">Version 1.7.3 (2004-03-01)</a>
    <ul>
      <li><a href="Changes.html#New-Features8">New Features</a></li>
      <li><a href="Changes.html#Improvements32">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes30">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.7.2-Kat-2004-02-12-">Version 1.7.2 &quot;Kat&quot; (2004-02-12)</a>
    <ul>
      <li><a href="Changes.html#New-Features9">New Features</a></li>
      <li><a href="Changes.html#Improvements33">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes31">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.7.1-2003-11-30-">Version 1.7.1 (2003-11-30)</a>
    <ul>
      <li><a href="Changes.html#Improvements34">Improvements</a></li>
      <li><a href="Changes.html#Bug-Fixes32">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.7.0-2003-10-22-">Version 1.7.0 (2003-10-22)</a>
    <ul>
      <li><a href="Changes.html#New-Features10">New Features</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.14-2004-05-02-">Version 1.6.14 (2004-05-02)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes33">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.13-Tripled-2004-04-10-">Version 1.6.13 &quot;Tripled&quot; (2004-04-10)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes34">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.12-Tov-2004-04-09-">Version 1.6.12 &quot;Tov&quot; (2004-04-09)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes35">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.11-Green-2004-03-17-">Version 1.6.11 &quot;Green&quot; (2004-03-17)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes36">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.10-Jump-2004-02-29-">Version 1.6.10 &quot;Jump&quot; (2004-02-29)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes37">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.9-2004-02-06-">Version 1.6.9 (2004-02-06)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes38">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.8-2003-11-29-">Version 1.6.8 (2003-11-29)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes39">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.7-2003-10-22-">Version 1.6.7 (2003-10-22)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes40">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.6-2003-10-03-">Version 1.6.6 (2003-10-03)</a>
    <ul>
      <li><a href="Changes.html#New-Features11">New Features</a></li>
      <li><a href="Changes.html#Bug-Fixes41">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.5-2003-09-10-">Version 1.6.5 (2003-09-10)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes42">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.4-2003-08-12-">Version 1.6.4 (2003-08-12)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes43">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.3-2003-08-12-">Version 1.6.3 (2003-08-12)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes44">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.2-2003-07-28-">Version 1.6.2 (2003-07-28)</a>
    <ul>
      <li><a href="Changes.html#New-Features12">New Features</a></li>
      <li><a href="Changes.html#Bug-Fixes45">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.1-2003-06-12-">Version 1.6.1 (2003-06-12)</a>
    <ul>
      <li><a href="Changes.html#New-Features13">New Features</a></li>
      <li><a href="Changes.html#Bug-Fixes46">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.6.0-2003-04-29-">Version 1.6.0 (2003-04-29)</a>
    <ul>
      <li><a href="Changes.html#New-Features14">New Features</a></li>
      <li><a href="Changes.html#Bug-Fixes47">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.5.2-2003-04-02-">Version 1.5.2 (2003-04-02)</a>
    <ul>
      <li><a href="Changes.html#New-Features15">New Features</a></li>
      <li><a href="Changes.html#Bug-Fixes48">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.5.1-2003-03-23-">Version 1.5.1 (2003-03-23)</a>
    <ul>
      <li><a href="Changes.html#New-Features16">New Features</a></li>
      <li><a href="Changes.html#Bug-Fixes49">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.5.0-2003-01-09-">Version 1.5.0 (2003-01-09)</a>
    <ul>
      <li><a href="Changes.html#New-Features17">New Features</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.4.6-2003-01-06-">Version 1.4.6 (2003-01-06)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes50">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.4.5-2002-11-13-">Version 1.4.5 (2002-11-13)</a>
    <ul>
      <li><a href="Changes.html#Changes">Changes</a></li>
      <li><a href="Changes.html#Bug-Fixes51">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.4.4-2002-10-27-">Version 1.4.4 (2002-10-27)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes52">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.4.3-2002-09-28-">Version 1.4.3 (2002-09-28)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes53">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.4.2-2002-09-27-">Version 1.4.2 (2002-09-27)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes54">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.4.1-2002-09-25-">Version 1.4.1 (2002-09-25)</a>
    <ul>
      <li><a href="Changes.html#Bug-Fixes55">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.4.0-2002-09-02-">Version 1.4.0 (2002-09-02)</a>
    <ul>
      <li><a href="Changes.html#New-Features18">New Features</a></li>
      <li><a href="Changes.html#Bug-Fixes56">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.3.3-2002-08-24-">Version 1.3.3 (2002-08-24)</a>
    <ul>
      <li><a href="Changes.html#New-Features19">New Features</a></li>
      <li><a href="Changes.html#Bug-Fixes57">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.3.2-2002-06-09-">Version 1.3.2 (2002-06-09)</a>
    <ul>
      <li><a href="Changes.html#New-Features20">New Features</a></li>
      <li><a href="Changes.html#Bug-Fixes58">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.3.1-2002-04-03-">Version 1.3.1 (2002-04-03)</a>
    <ul>
      <li><a href="Changes.html#New-Features21">New Features</a></li>
      <li><a href="Changes.html#Bug-Fixes59">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.3.0-2002-02-10-">Version 1.3.0 (2002-02-10)</a>
    <ul>
      <li><a href="Changes.html#New-Features22">New Features</a></li>
      <li><a href="Changes.html#Bug-Fixes60">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.2.3-2002-03-17-">Version 1.2.3 (2002-03-17)</a></li>
  <li><a href="Changes.html#Version-1.2.2-2002-03-15-">Version 1.2.2 (2002-03-15)</a>
    <ul>
      <li><a href="Changes.html#New-Features23">New Features</a></li>
      <li><a href="Changes.html#Bug-Fixes61">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.2.1-2002-02-25-">Version 1.2.1 (2002-02-25)</a>
    <ul>
      <li><a href="Changes.html#New-Features24">New Features</a></li>
      <li><a href="Changes.html#Bug-Fixes62">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.2.0-2002-01-10-">Version 1.2.0 (2002-01-10)</a>
    <ul>
      <li><a href="Changes.html#New-Features25">New Features</a></li>
      <li><a href="Changes.html#Bug-Fixes63">Bug Fixes</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.0.2-2001-12-10-">Version 1.0.2 (2001-12-10)</a>
    <ul>
      <li><a href="Changes.html#New-Features26">New Features</a></li>
    </ul>
  </li>
  <li><a href="Changes.html#Version-1.0.1-2001-09-28-">Version 1.0.1 (2001-09-28)</a></li>
  <li><a href="Changes.html#Author">Author</a></li>
  <li><a href="Changes.html#See-Also">See Also</a></li>
</ul>

<h1 id="Name">Name</h1>

<p>Bric::Changes - Bricolage Changes</p>

<h1 id="Description">Description</h1>

<p>This document lists the Changes to Bricolage introduced with each release.</p>

<h1 id="Version-2.0.1-2011-02-09-">Version 2.0.1 (2011-02-09)</h1>

<h2 id="Improvements">Improvements</h2>

<ul>

<li><p>Added <code>SKIP_SSL_REDIRECT</code> <i>bricolage.conf</i> directive. This directive prevents Bricolage from redirecting to and from an SSL URL when <code>SSL_ENABLE</code> is turned on. The case for this is when Bricolage is running behind a reverse proxy server that&#39;s handling SSL mappings. Thanks to Alex Krohn for the report. [David]</p>

</li>
<li><p>Added the &quot;object&quot; format for datetime values. Pass &quot;object&quot; as the formatting string and a <a href="http://search.cpan.org/perldoc?DateTime">DateTime</a> object will be returned, rather than a string. [David]</p>

</li>
<li><p>Refactored the SFTP mover to do proper error handling. Also removed the code that &quot;escapes&quot; file names, as with more recent versions of Net::SSH2 it left the backslashes in the file names. [David]</p>

</li>
<li><p>Bricolage now supports Apache 2 MPMs other than Prefork. YMMV (Bug #188). [David]</p>

</li>
<li><p>The &quot;Category&quot; autocompleting field in the New Story/Media/Template profile now remembers the last value selected for that screen within the current session. This makes it one bit easier to create a bunch of objects in a row all in the same category, as used to be the case before 2.0 turned these into autocompleting fields (Bug #159). [David]</p>

</li>
<li><p>The lists of the container and field subelement key names in a template are now displayed above the code in the read view as well as the edit view. Suggested by Phillip Smith (Bug #228). [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes">Bug Fixes</h2>

<ul>

<li><p>Fixed a bug in the <a rel="section" href="../../../2.0/api/Bric/Util/ApacheReq.html" name="Bric::Util::ApacheReq">Bric::Util::ApacheReq</a> tests where they would fail if the <code>LISTEN_PORT</code> or <code>SSL_PORT</code> <i>bricolage.conf</i> directives were anything other than 80 and 443, respectively. Thanks to H&eacute;ctor Daniel Cort&eacute;s Gonz&aacute;lez for the report. [David]</p>

</li>
<li><p>The &quot;Checkout&quot; link no longer appears on desk items for users who do not have permission to edit an asset [Kahil Jallad].</p>

</li>
<li><p>Fixed a bug where the SFTP mover would not properly finish moving the file, leaving escaped tmp files on the destination server. [Matt Rolf]</p>

</li>
<li><p>Updating published stories or media or deployed templates via the SOAP interface with the <code>EXPIRE_ON_DEACTIVATE</code> <i>bricolage.conf</i> directive enabled no longer expires those assets unless they are active and the <code>&lt;expire_date&gt;</code> element is set in the XML. Thanks to Nick Legg for the report (Bug # 184). [David]</p>

</li>
<li><p>Worked around a bug in <a href="http://search.cpan.org/perldoc?Net::SSH2">Net::SSH2</a> where sockets weren&#39;t being closed, leading to <a rel="section" href="../../../2.0/api/bric_queued.html" name="bric_queued">bric_queued</a> running out of file descriptors. [David]</p>

</li>
<li><p>The virtual FTP server no longer limits itself, but leaves resource limits to the OS. This prevents apparently unrelated (and mysterious!) errors from the FTP server. [Alex Krohn].</p>

</li>
<li><p>Fixed error message thrown by <code>publish_another()</code> that incorrectly called itself <code>burn_another()</code>. [David]</p>

</li>
<li><p>When diffing documents and templates, if the &quot;to&quot; item is the current version, the currently-checked out asset is used. This is so that one can see what changes have been made since the checkout. Reported by Michael Herring. [David]</p>

</li>
<li><p>Fixed bug in bric_ftpd where the ftp PWD command returns an incorrect path (missing the site name). Some ftp clients (eg. FileZilla) call PWD and use this path after changing directories. [Adrian Yee]</p>

</li>
<li><p>Fixed a bug where desk asset counts would never be displayed regardless of the preference setting (Bug #198). [Greg Heo]</p>

</li>
<li><p>The keyword autocomplete widget no longer suggests deleted keywords on the story and media profiles (Bug #206). [Greg Heo]</p>

</li>
<li><p>Fixed a bug where some valid date ranges would be rejected as invalid when searching for assets. (Bug #211). [David Oliveira]</p>

</li>
<li><p>Fixed bug in bric_ftpd where the ftp PWD command returns an incorrect path (missing the site name). Some ftp clients (eg. FileZilla) call PWD and use this path after changing directories. [Adrian Yee]</p>

</li>
<li><p>In the event of a publish failure, a story and media document no longer has its publish status, date, and first publish date updated (Bug #200). [David]</p>

</li>
<li><p>Xinha now works properly, as the WYSIWYG fields are now created only when they&#39;re displayed (they didn&#39;t work right when they were created while hidden). Thanks to Aaron Fuleki and Denison University for the report and Phillip Smith for finding the relevant Xinha support explaining the problem (Bug # 217). [David]</p>

</li>
<li><p>Adjusted placement of the Checkout and Publish buttons in search results and elsewhere so that they&#39;re not so close to the border of the box that contains them (Bug #194). [Phillip Smith]</p>

</li>
<li><p>The Apache 2 detection during installation now properly finds <code>Include</code>d configuration files specified with paths relative to the <code>HTTPD_ROOT</code> (Bug #174). [Michael Herring]</p>

</li>
<li><p>Using pagination controls when selecting from a list of stories to relate no longer throws an error (Bug #183). [Greg Heo]</p>

</li>
<li><p>Adjusted style of Check In and Move popup menu. Allows for easier selection of appropriate action.</p>

</li>
<li><p>Fixed the Xinha editor when using the Create Link button (Bug #180). [Phillip Smith]</p>

</li>
<li><p>The &quot;Content Type&quot; column in the Element Type manager will now properly sort when you click its header (Bug #190). [David]</p>

</li>
<li><p>Bricolage no longer throws an error when the description of a category is longer than 256 characters. Thanks to Vladimir for the report (Bug # 215). [Phllip Smith]</p>

</li>
<li><p>Attempting to create a category template that already exists in a category and output channel no longer reactivates an element type template (Bug # 195). [David]</p>

</li>
<li><p>Deactivated element types no longer appear as available to add to stories, though existing elements of those types will remain unless they&#39;re individually deleted (Bug #230). [Greg Heo]</p>

</li>
<li><p>Document and template search results no longer provide a &quot;Republish&quot; checkbox for deactivated assets, which are shown when &quot;Include deleted&quot; checkbox is selected in the advanced search interface (Bug #201). [Nick Legg]</p>

</li>
<li><p>The buttons once again work in the media document category browser when the <code>ENABLE_CATEGORY_BROWSER</code> <i>bricolage.conf</i> directive is true. Thanks to Michael Herring for the report (Bug #155). [David]</p>

</li>
<li><p>The story and media profiles now allow only output channels associated with the site the document element type is associated with to be associated with the story or media document (Bug # 212). [Zdravko Balorda]</p>

</li>
</ul>

<h1 id="Version-2.0.0-2010-04-12-">Version 2.0.0 (2010-04-12)</h1>

<h2 id="Bug-Fixes1">Bug Fixes</h2>

<ul>

<li><p>Fixed error handling in the access handler so that it works when a URI is a directory. Thanks to Dave Rolsky for the initial patch. [David]</p>

</li>
<li><p>Updated session error handling to recognize a different error message in recent versions of Apache::Session. [Dave Rolsky]</p>

</li>
<li><p>The buttons once again work in the story document category browser when the <code>ENABLE_CATEGORY_BROWSER</code> <i>bricolage.conf</i> directive is true. Thanks to Krzysztof Rudnik for the report (Bug #155). [David]</p>

</li>
<li><p>Fixed subtle category autocomplete issue where it can be difficult to choose the root category. It would appear to work, but the &quot;Unable to add category that does not exist&quot; message would not clear and the form would think that the category isn&#39;t legal. Could apply to other categories, but was most common for the root category. Thanks to Michael Herring for the detailed steps to reproduce (Bug #157). [David]</p>

</li>
<li><p>Fixed bug where custom fields in the contributor profile did not appear in some browsers. Thanks to Krzysztof Rudnik for the report (Bug #139). [David]</p>

</li>
<li><p>Fixed bug where publishing a story with multiple categories (and perhaps multiple pages) led to the deletion of preivew files. Thanks to Guido Buelskaemper for the report (Bug #156). [David]</p>

</li>
</ul>

<h1 id="Version-1.11.4-2010-03-29-">Version 1.11.4 (2010-03-29)</h1>

<h2 id="New-Features">New Features</h2>

<ul>

<li><p>Added the <code>--match-title</code> option to <i>contrib/bric_media_upload</i>. This will match the uploading file name against the title of the media object rather than the file name [Paul Orrock]</p>

</li>
<li><p>Added the new Bricolage logo to the user interface. [Phillip Smith]</p>

</li>
</ul>

<h2 id="Improvements1">Improvements</h2>

<ul>

<li><p>When displaying categories associated with a story and the <code>ENABLE_CATEGORY_BROWSER</code> <i>bricolage.conf</i> directive is true, the categories are now displayed in alphabetical order by URI. [David]</p>

</li>
<li><p>The installer no longer requires that <a href="http://search.cpan.org/perldoc?Term::ReadPassword">Term::ReadPassword</a> be installed from the CPAN before it continues. It will use it if it finds it, but if not it substitutes a simple implementation that does the trick (Bug #136). [David]</p>

</li>
<li><p>When creating or editing a story or media document, the Source select list now lists sources in alphabetical order. Reported by Michael Herring (Bug # 138). [David]</p>

</li>
<li><p>Added the <code>SFTP_KEY_TYPE</code>, <code>SFTP_PRIVATE_KEY_FILE</code> and <code>SFTP_PUBLIC_KEY_FILE</code> <i>bricolage.conf</i> directives to to restore key-based authentication to the SFTP mover. These were necessary as the old <i>SFTP_HOME</i> directive does not work with the new implementation based on <i>Net::SSH2</i> (Bug # 127). [Greg Heo]</p>

</li>
<li><p>When started by the root user, the <i>bric_queued</i> and <i>bric_ftpd</i> daemons now become the Bricolage system user (usually the Apache user) after forking their subprocesses, rather than before. This means that the PID file is now created by the root user, and so should encounter no permission errors when saving the PID file to standard OS locations. Reported by Serge Ivanchenko. [David]</p>

</li>
<li><p>The default location for the FTP server&#39;s log files is now the <i>log</i> subdirectory of the bricolage root directory, rather than the bricolage root directory itself. This is what comments in <i>bricolage.conf</i> have always suggested, even if <a rel="section" href="../../../2.0/api/Bric/Admin.html" name="Bric::Admin">Bric::Admin</a> and the code did not. [David]</p>

</li>
<li><p>Added the <code>CATEGORY_MIN_CHARS</code> AND <code>CATEGORY_MIN_CHARS_TMPL</code> <i>bricolage.conf</i> directives. These give administrators the ability to control the responsiveness of the autosuggest box for selecting categories to associate with documents and templates. It had been set to 2 to make it more responsive to sites with very large numbers of categories, but most folks only need it set to 1, which is now the default. [David]</p>

</li>
<li><p>Now require PostgreSQL 8.1 or higher. We will no longer support 8.0 or lower. [David]</p>

</li>
<li><p>The contributor popup now submits the updated list of contributors to Bricolage, which updates them in the document and returns the updated list of contributors. That list then updates the contributors section of the document profile. Thanks to this change, editing contributors twice in a document without saving in between no longer causes the changes from the first edit to be forgotten. It also allows any changes to the contributor order to in the popup to be properly updated in the document profile. [David]</p>

</li>
<li><p>When hovering over the names of custom fields in the element type or contributor type profile, the cursor displays as a &quot;move&quot; cursor, to indicate that one can drag the field names in order to change their order. This corresponds to the interface for reordering fields in documents. [David]</p>

</li>
<li><p>When creating new stories or media via the SOAP interface, Bricolage no longer forces the publish status to be set to false, but sets it to true if the the publish date is set or the publish status is true in the XML. In such cases, it will also set the published version number to version 1. This is to make it easier for one to migrate documents from one Bricolage instance to another without having to edit the XML to set the publish status to a true value. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes2">Bug Fixes</h2>

<ul>

<li><p>Fixed a regular expression typo that led to a test failure. [Greg Heo]</p>

</li>
<li><p>Adding a category to a story in a multi-site installation no longer has a chance to throw a &quot;Too many category objects found&quot; error. [Greg Heo]</p>

</li>
<li><p>Moved document expiration on deletion from <a rel="section" href="../../../2.0/api/Bric/Biz/Asset.html" name="Bric::Biz::Asset">Bric::Biz::Asset</a> to <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business.html" name="Bric::Biz::Asset::Business">Bric::Biz::Asset::Business</a> because it&#39;s useless for templates and left no-op job records lying around when templates were deleted. This code path only executes when the <code>EXPIRE_ON_DEACTIVATE</code> <i>bricolage.conf</i> directive is enabled. [David]</p>

</li>
<li><p>Fixed document expiration when the <code>EXPIRE_ON_DEACTIVATE</code> <i>bricolage.conf</i> directive is enabled so that it doesn&#39;t try to expire documents that have never been published, or media documents that have no URI associated with them. Thanks to Aaron Fuleki and Denison University for the report. [David]</p>

</li>
<li><p><a rel="section" href="../../../2.0/api/Bric/Util/Burner.html" name="Bric::Util::Burner">Bric::Util::Burner</a>&#39;s <code>publish()</code> method no longer removes documents from workflow after publishing them, as such is the responsibility of the code that calls publish. The publish callback already did, and now so does the <a rel="section" href="../../../2.0/api/Bric/SOAP/Workflow.html" name="Bric::SOAP::Workflow">Bric::SOAP::Workflow</a> <code>publish()</code> method. Thanks to David Beaudet for the report and Aaron Fuleki for the steps to replicate (Bug #98). [David]</p>

</li>
<li><p>Fixed a bug where contributor and category search results would be propagated to the contributor and category editing screens with a story or media document. Searches from within documents should cache their own results, separate from the admin search interfaces. [David]</p>

</li>
<li><p>Contributors associated with a story or media document and categories associated with a story document are no longer paginated. When there were more contributors or categories than would fit on a paginated page, the pagination didn&#39;t work and reording didn&#39;t work. So by disabling pagination in this case, we get around that issue. Documents with that many categories or contributors are rare, so the trade-off seems worthwhile. Thanks to Bret Dawson for the report (Bug #121). [David]</p>

</li>
<li><p>Fixed the &quot;Log In&quot; button so that the word &quot;In&quot; is antialiased. [Waldo Jaquith]</p>

</li>
<li><p>New media can once again be created from a related media element. It was broken by the switch to autocompleted category selection for new media documents in 1.11.3. Thanks to Waldo Jaquith and Iv&aacute;n Chavero for the spot (Bugs #134 and #135). [David]</p>

</li>
<li><p>Fixed the &quot;Not a GLOB reference&quot; error when using the PHP burner on Perl 5.10. [Alex Krohn]</p>

</li>
<li><p>The simple search in workflows no longer disables navigation links on the same horizontal line as the &quot;Search&quot; button. Thanks to Matt Rolf for the report (Bug # 141) and to Marshall for the CSS jujitsu. [David]</p>

</li>
<li><p>The <code>best_uri()</code> method of <a rel="section" href="../../../2.0/api/Bric/Util/Burner.html" name="Bric::Util::Burner">Bric::Util::Burner</a> now avoids expired stories when searching for aliased stories. Thanks to Zdravko Balorda for the catch (Bug #144). [David]</p>

</li>
<li><p>Fixed issue with the use of <code>findElementsByClass()</code> when used with Prototype 1.6.0.3. Thanks to Adrian Yee for the report and suggested fix. [David]</p>

</li>
<li><p>Subelements can once again be added to media documents when the <code>ENABLE_CATEGORY_BROWSER</code> <i>bricolage.conf</i> directive is enabled without getting the error &quot;Please select a primary category.&quot; Broken in 1.11.3. Thanks to Vincent Stemen for the report (Bug #143). [David]</p>

</li>
<li><p>The field type profile now properly validates code select code and lets the user know if it&#39;s not valid. [David]</p>

</li>
<li><p>The validation of code select field code is now consistent between the element type profile, the field type profile, and the SOAP element type interface. Thanks to Krzysztof Rudnik for the report (Bug #140). [David]</p>

</li>
<li><p>Media no longer throw the exception &ldquo;Can&#39;t call method &quot;write&quot; on an undefined value&rdquo; when <a href="http://search.cpan.org/perldoc?Imager">Imager</a> is doesn&#39;t recognize an image file format. Thanks to Matt Rolf for the report (Bug #146). [David]</p>

</li>
<li><p>Deleting contributors in the contributor popup window now works the same as it does when deleting them in the story or media profile: without a submit, but by simply removing the contributor from the DOM. [David]</p>

</li>
<li><p>Hitting the &quot;enter&quot; key when searching for contributors in the contributor popup no longer closes the window, but properly submits the search. Thanks to Matt Rolf for the report (Bug #147).</p>

</li>
<li><p>Contributor type fields can once again be reordered and deleted. Thanks to Krzysztof Rudnik for the report (Bug #139). [David]</p>

</li>
<li><p>When relating a story or media document, clicking a column header in the search results in the related search popup no longer throws an error. Thanks to Phillip for the report (Bug #149). [David]</p>

</li>
<li><p>The SOAP interface now sets the published version to the new version of a story or media document that is being updated by XML that says the document is published and where the published version was not previously set. [David]</p>

</li>
<li><p>When creating a template via the SOAP interface, if the template in the specified output channel, category, and site already exists but is deactivated, it will be re-activated and updated instead of throwing an error. This matches how the UI works. [David]</p>

</li>
<li><p>Setting the <code>RELATED_DOC_POD_TAG</code> <i>bricolage.conf</i> directive to &quot;url&quot; no longer breaks bulk edit. Thanks to Phillip for the report (Bug #150). [David]</p>

</li>
<li><p>The <code>best_uri()</code> method of <a rel="section" href="../../../2.0/api/Bric/Util/Burner.html" name="Bric::Util::Burner">Bric::Util::Burner</a> now works when creating a link to a story on a different site and the protocol for the output channel is not set. It defaults to &quot;http://&quot; for the protocol. [David]</p>

</li>
</ul>

<h1 id="Version-1.11.3-2010-01-28-">Version 1.11.3 (2010-01-28)</h1>

<h2 id="Improvements2">Improvements</h2>

<ul>

<li><p>The SFTP mover now respects a port specification in the host name (e.g, &quot;foo.example.com:22&quot;), just like the FTP mover. Thanks to Iv&aacute;n Chavero for the report and fix. [David]</p>

</li>
<li><p>The virtual FTP server now assumes that template files uploaded to it are encoded in the user&#39;s preferred encoding. So if you have Windows gremlins in your templates, you can set your &quot;Character Set&quot; preference to &quot;CP1252&quot; and it will just work. Thanks to Phillip Smith for the report (<a href="http://bricolage.lighthouseapp.com/projects/29601-bricolage/tickets/124">Bug #124</a>). [David]</p>

</li>
<li><p>Added the <code>--without-file</code> option to <i>bric_soap</i> for use with the <code>media export</code> command. With this option, the resulting XML file will contain no <code>&lt;file&gt;</code> elements (which normally contain the Base64-encoded content of the exported media documents). Also, when a media document is updated via <code>bric_soap media update</code>, if the XML file sent to the server contains no <code>&lt;file&gt;</code> elements, the existing file will be left alone, rather than deleted. Suggested by Ashlee Caul. [David]</p>

</li>
<li><p>Added the &quot;and Revert&quot; or &quot;and Delete&quot; option to the &quot;Check In&quot; menu on desk/My Workspace views. This saves the user from having to click &quot;Edit&quot; and then &quot;Cancel Checkout&quot; to cancel a checkout. Suggested by Matt Rolf and Phillip Smith. In order to make this happen, the code that handles canceling a checkout, which was duplicated nearly verbatim in the callbacks for the story, media, and template profiles has been factored out into a new class, <a rel="section" href="../../../2.0/api/Bric/App/Callback/Util/Asset.html" name="Bric::App::Callback::Util::Asset">Bric::App::Callback::Util::Asset</a>. [David]</p>

</li>
<li><p>Removed the &quot;Cancel Checkout&quot; button from asset profiles, and added the &quot;and Revert&quot; item to the &quot;Check In&quot; menu in its place. This change brings story, media, and template profiles in line with the same option added to the &quot;Check In&quot; menu on desks and My Workspace. [David]</p>

</li>
<li><p>Category selection when editing a media document or a template now uses an autocomplete field rather than a select list, just like the story profile does. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes3">Bug Fixes</h2>

<ul>

<li><p>Cover dates are no longer exported from the SOAP API with the wrong year (2009) when their dates are in the first three days of 2010. Thanks to Paul Orrock for the spot (<a href="http://bricolage.lighthouseapp.com/projects/29601-bricolage/tickets/122">Bug #122</a>) and David Oliveira via Bret Dawson for the fix! [David]</p>

</li>
<li><p>Fixed an error in <a rel="section" href="../../../2.0/api/Bric/Biz/Contact.html" name="Bric::Biz::Contact">Bric::Biz::Contact</a> where a boolean value was not passed to the database as a boolean. [David Oliveira]</p>

</li>
<li><p>Fixed an error in the way that IE7 handled errors thrown to a modal window (<a href="http://bricolage.lighthouseapp.com/projects/29601-bricolage/tickets/114">Bug #114</a>). [Marshall]</p>

</li>
<li><p>Fixed encoding issue on MySQL. Thanks to Waldo Jaquith for the report. [David]</p>

</li>
<li><p>Destination distribution actions are editable again (<a href="http://bricolage.lighthouseapp.com/projects/29601-bricolage/tickets/123">Bug # 123</a>). [David]</p>

</li>
<li><p>Fixed the <i>favicon.ico</i> redirect so that it points to a full URL, not just a URI path. [David]</p>

</li>
<li><p>Clicking the &quot;Cancel&quot; button in a server or action profile no longer redirects to the login screen when the hostname to which the request is sent is different than the hostname in <i>httpd.conf</i>. This mainly effected development and evaluation installs. Thanks to Adam Prime for identifying the solution (disabling <code>UseCanonicalName</code>). [David]</p>

</li>
<li><p>Fixed time zone compatibility issue on MySQL. Bricolage now sets <code>time_zone</code> at the same time it sets <code>sql_mode</code>: when it connects to the database. This ensures that date and time comparisons within the database are executed correctly. It of course requires that time zones be installed in MySQL, which can be done by running <code>mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root mysql</code>.</p>

</li>
</ul>

<h1 id="Version-1.11.2-2009-11-14-">Version 1.11.2 (2009-11-14)</h1>

<h2 id="New-Features1">New Features</h2>

<ul>

<li><p>Added configuration directive to allow the expiration of assets when they are deleted. [David, Mercier, Rolf and Herring]</p>

</li>
<li><p>Added the <code>publishing()</code>, <code>previewing()</code>, and <code>compiling()</code> sugar methods to <a rel="section" href="../../../2.0/api/Bric/Util/Burner.html" name="Bric::Util::Burner">Bric::Util::Burner</a> because I&#39;m sick of seeing the same code to check modes in templates all the time. [David]</p>

</li>
<li><p>Take keyword permissions into account when accessing or creating keywords from the story and media profiles as well as category manager. [Adrian Yee]</p>

</li>
<li><p>Added support for copying and pasting elements in the story profile. [Adrian Yee]</p>

</li>
<li><p>Added the <code>find_or_create_alternate()</code> method to <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business/Media.html" name="Bric::Biz::Asset::Business::Media">Bric::Biz::Asset::Business::Media</a> class. This method makes it easy for templates to create alternate representations of an image as a new media document. Useful for generating thumbnails and the like. As a side-effect, <a href="http://search.cpan.org/perldoc?Imager">Imager</a> is now a required module. [David]</p>

</li>
<li><p>Since <a href="http://search.cpan.org/perldoc?Imager">Imager</a> is now a required module, the <code>USE_THUMBNAILS</code> directive is now enabled by default as well. [David]</p>

</li>
<li><p>Added the following aliases, so I can pretend that the versions with double underscores don&#39;t exist:</p>

<dl>

<dt><code>Bric::Biz::Asset::Business::set_source_id()</code></dt>
<dd>

</dd>
<dt><code>Bric::Biz::Asset::Business::get_source_id()</code></dt>
<dd>

</dd>
<dt><code>Bric::Biz::Asset::get_user_id()</code></dt>
<dd>

</dd>
<dt><code>Bric::Biz::Asset::Business::Media::get_category_id()</code></dt>
<dd>

</dd>
</dl>

<p>[David]</p>

</li>
</ul>

<h2 id="Improvements3">Improvements</h2>

<ul>

<li><p>Added the <code>is_republish</code> and <code>is_first_publish</code> methods to <a rel="section" href="../../../2.0/api/Bric/Util/Burner.html" name="Bric::Util::Burner">Bric::Util::Burner</a>. [David]</p>

</li>
<li><p>The CPAN module installer now relies on <a href="http://search.cpan.org/perldoc?CPAN">CPAN</a> to determine if a module was successfully installed and is the proper version number, rather than doing that work itself. This addresses an issue when installing mod_perl modules, which would be installed properly but the installer would think that they weren&#39;t. [David]</p>

</li>
<li><p>Changed autocomplete category selection for stories so that if you have the <code>FULL_SEARCH</code> config directive turned on, you get wildcard matching to any part of the URI on your entered string, so typing &quot;bar&quot; will return &quot;/bar&quot; and &quot;/foo/bart&quot;. Enter &quot;/&quot; for a full list of categories. [Paul Orrock]</p>

</li>
<li><p>Added text beneath all buttons for desk items to make them more intuitive. [Sarah Mercier, Matt Rolf and Michael Herring]</p>

</li>
<li><p>Added more translations in German and Russian. [Alisa Gdalina]</p>

</li>
<li><p>Made &quot;Delete this Profile&quot; text more specific depending on location, such as &quot;Delete this Story&quot; or &quot;Delete this Element Type&quot;, etc. [Sarah Mercier and Matt Rolf]</p>

</li>
<li><p>Switched to passing parameters for Net::SSH2 authentication in <a rel="section" href="../../../2.0/api/Bric/Util/Trans/SFTP.html" name="Bric::Util::Trans::SFTP">Bric::Util::Trans::SFTP</a> so that it will first try <code>auth_password</code>, and then follow up with <code>auth_keyboard</code> should the first fail (and will also try SSH keys if you happen to have that configured). [Alex Krohn]</p>

</li>
<li><p>Upgraded Prototype and Scriptaculous libraries to versions 1.6.0.3 and 1.8.2 respectively. [Rolf, Mercier, Herring]</p>

</li>
<li><p>Display a hint about subelements in the story view. This is especially important when they have no related stories or media and are not revealed, so that you can tell what each is! [David &amp; Adrian Yee]</p>

</li>
<li><p>Workspaces, Desks, and debug messages validate again. [Matt Rolf]</p>

</li>
<li><p>Dragging container elements to the edge of the browser window will now scroll the page. Reported by Matt Rolf. [Sarah Mercier]</p>

</li>
<li><p>Factored the creation of a canonical URL for a request into a new method, <code>Bric::Util::ApacheReq-&gt;url</code>. This removes a fair bit of duplicate code found here and there. [David]</p>

</li>
<li><p>Cover date is now required at the database level. It has always been required in the UI. [David]</p>

</li>
<li><p>Calls to <code>log_event()</code> are immediately logged when not running under <code>mod_perl</code> or <i>bric_queued</i>. This is so that events will now always be properly logged. [David]</p>

</li>
<li><p>Made the thumbnail format-guesser case-insensitive (e.g. <i>.JPG</i> or <i>.PDF</i> will also work now). [Scott]</p>

</li>
<li><p>Made the popup dialog for related stories/media a bit bigger. [Scott]</p>

</li>
<li><p>Added a throbber to category completion in New Story screen and the Story Profile. [Scott]</p>

</li>
<li><p>Added the &quot;Bricolage events feed generator&quot; (<i>contrib/bric_events_rss</i>) contrib application. Generates RSS output for all system events. [Greg Heo]</p>

</li>
<li><p>Renamed <i>Makefile</i> to <i>Makefile.in</i> and changed <code>Makefile.PL</code> so that it creates <i>Makefile</i> from <i>Makefile.in</i>. This is so that <i>Makefile</i> is no longer changed in-place, which could get annoying when doing development. [David]</p>

</li>
<li><p>Added <code>mark_as_published()</code> method to <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business.html" name="Bric::Biz::Asset::Business">Bric::Biz::Asset::Business</a>. This method marks a document as published but does not create jobs or resources and no templates will be executed. [Paul Orrock]</p>

</li>
<li><p>Added the <code>timeout</code> attribute to <a rel="section" href="../../../2.0/api/Bric/Dist/Client.html" name="Bric::Dist::Client">Bric::Dist::Client</a> and the corresponding <code>-t</code> option to <a rel="section" href="../../../2.0/api/bric_dist_mon.html" name="bric_dist_mon">bric_dist_mon</a>. [David]</p>

</li>
<li><p>Added the <code>sql_type</code> element to the export of field types from SOAP. This prevents the SOAP server from having to guess the SQL type of a field type when updating an element type. Thanks to David Oliveira for the report (Bug #79). [David]</p>

</li>
<li><p>Added a timestamp for data that <i>bric_queued</i> sends to its log. Thanks to Neal Sofge for the suggestion (Bug #41). [David]</p>

</li>
<li><p>Renamed the &quot;Lock Val&quot; checkbox in the media profile to &quot;Autopopulate&quot;. It is now checked by default, rather than unchecked. Uncheck it to prevent Bricolage from autopopulating values in the future. Thanks to Marshall for the suggestion (Bug #32). [David]</p>

</li>
<li><p>Changed &quot;Click here to start&quot; to &quot;Start Bricolage&quot; on the welcome page. Suggested by Chris Heiland and Czerny (Bug #42). [David]</p>

</li>
<li><p>When an asset drops off a desk or My Workspace (because it is checked in or moved to a different desk), and it&#39;s the last asset of its type (story, media, or template), the asset type label and sort menu will also drop off the desk or workspace. Thanks to Matt Rolf for the suggestion (Bug #69). [David]</p>

</li>
<li><p>Moved the &quot;Cancel&quot; and &quot;Save&quot; buttons in the contributor popup up from the bottom of the screen (it was below search results) to under the list of contributors currently associated with the story and above the search box. This makes it much easier to find the buttons when there are a lot of search results. Thanks to Scott for the report (Bug #84). [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes4">Bug Fixes</h2>

<ul>

<li><p>Fixed a bug in the loading of WYSIWYG editor callback code in the Apache configuration. [John Durkin]</p>

</li>
<li><p>Uploading a media file to a related media element to create a new media document now Works properly when the related media element is a subelement. Reported by John Durkin (Bug #1364). [David]</p>

</li>
<li><p>Fixed a bug where an attempt to export a story via SOAP failed due to a bad method call. Reported by Denny de la Haye. [David]</p>

</li>
<li><p>Added a JavaScript call to confirm a delete action on Workspace and desk. Reported by Matt Rolf (Bug 1380). [Sarah Mercier]</p>

</li>
<li><p>Fixed problem with rendering of radio button fields (Bug #1387). [Denny de la Haye]</p>

</li>
<li><p>Fixed <a rel="section" href="../../../2.0/api/Bric.html" name="Bric">Bric</a> to load <a rel="section" href="../../../2.0/api/Bric/Config.html" name="Bric::Config">Bric::Config</a> before anything else, which was causing problems on some systems. [Paul Orrock]</p>

</li>
<li><p>Fixed problem with <a rel="section" href="../../../2.0/api/Bric/SOAP.html" name="Bric::SOAP">Bric::SOAP</a> so that the first field or container is correctly numbered at 0 rather than 2. [Paul Orrock]</p>

</li>
<li><p>Fix bug where a story imported through <a rel="section" href="../../../2.0/api/Bric/SOAP.html" name="Bric::SOAP">Bric::SOAP</a> didn&#39;t have its <code>object_order</code> set properly so wouldn&#39;t preview through templates until saved in the UI (Bug # 1394 &amp;&amp; Bug # 1397). [Paul Orrock]</p>

</li>
<li><p>Fixed up broken/non-compliant HTML on desks, search results and workspace. [Paul Orrock]</p>

</li>
<li><p>Improved the appearance of popup menuson desks. [Sarah Mercier and Matt Rolf]</p>

</li>
<li><p>In the story profile, the primary category now shows as a required field (Bug #1400). [Matt Rolf]</p>

</li>
<li><p>Re-labeled the Associations box the story and template profile (Bug #1414). [Matt Rolf]</p>

</li>
<li><p>Fixed the <code>get_uri()</code> method of <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business/Media.html" name="Bric::Biz::Asset::Business::Media">Bric::Biz::Asset::Business::Media</a> so that it URI escapes the media file name. [David]</p>

</li>
<li><p>Fixed bug when uploading a new media file to a related media element so that, when running under mod_perl 1, headers are properly sent <i>before</i> the content is sent. This should fix some of the issues with the related media popup window. [Adrian Yee]</p>

</li>
<li><p>The Add Element dropdown menu will now close on double click (Bug #1405). [Sarah Mercier and Matt Rolf]</p>

</li>
<li><p>The find stories/media/template advanced search toggle now works properly. (Bug #1426) [Sarah Mercier and Matt Rolf]</p>

</li>
<li><p>Fixed bug where IE7 couldn&#39;t open the sidenav. [Kahil Jallad]</p>

</li>
<li><p>Fixed bug where removing a subelement or custom field from an element type would result in an error when editing a story with one of those elements. [Bret Dawson]</p>

</li>
<li><p>Fixed typing error which caused the upgrade script to fail. [Darren Embry]</p>

</li>
<li><p>Deleting keywords from a category no longer causes an error. [Adrian Yee]</p>

</li>
<li><p>Fixed bug where new bulk edit button would cause submit error in IE7 because it didn&#39;t call the <code>customSubmit()</code> JavaScript function. [Kahil Jallad, Sarah Mercier]</p>

</li>
<li><p>Hitting the enter key now properly submits a search in the advanced search form (Bug #1425). [Bret Dawson]</p>

</li>
<li><p>Desks no longer have double pagination bars at the bottom (Bug #1439). [Matt Rolf]</p>

</li>
<li><p>Fixed a bug where deleting a checked out asset from My Workspace or the desk would still offer an Edit link in the search results. Reported by John Durkin and Matt Rolf (Bug #1388). [Greg Heo]</p>

</li>
<li><p>Fixed bug in <code>inst/required.pl</code> so it remembers what you&#39;re trying to install when telling you what&#39;s missing. Also added documentation to <code>inst/htprobe_apache2.pl</code> about not finding the <code>apreq</code> module. [Paul Orrock]</p>

</li>
<li><p>The help button no longer wipes unsaved values from pages when clicked (Bug #1386). [Sarah Mercier]</p>

</li>
<li><p>Added a check to <code>inst/required.pl</code> to check for a preforking Apache 2 rather than a threaded worker Apache 2. [Paul Orrock]</p>

</li>
<li><p>A newly created field with an underscore in its key name will no longer disappear as soon as you create it. Reported by Krzysztof Rudnik (Bug #1140). [David]</p>

</li>
<li><p>Documents no longer drop off the publish desk when a publish fails. Reported by Krzysztof Rudnik (Bug #1141). [David]</p>

</li>
<li><p>An error in the related media popup window no longer pulls in the side navigation, since it doesn&#39;t belong in the popup. Reported by Matt Rolf (Bug # 1433). [David]</p>

</li>
<li><p>Adding a contributor to a media document when creating the media document from a related media popup no longer mysteriously closes the related media popup window. Thanks to John Durkin for the spot (Bug #1431). [David]</p>

</li>
<li><p>When creating a new media document via the related media popup, the popup window now closes in Camino and Safari once the media document has been created and saved, and in Safari it now properly updates the related media element with which it is newly associated. Reported by Matt Rolf (Bug #1432). [David]</p>

</li>
<li><p>Fixed a bug where, once child elements were added to or deleted from a container element, the container was prevented from being deleted until the page is refreshed. Reported by Matt Rolf (Bug #1392). [David]</p>

</li>
<li><p>The pagination links now work in the edit related popup window. Reported by Adam Wilson (Bug #1428). [David]</p>

</li>
<li><p>The &quot;Related Story&quot; popup now properly closes in Camino when a &quot;relate&quot; or &quot;un-relate&quot; link is clicked. [David]</p>

</li>
<li><p>A call to <code>list()</code> or <code>lookup()</code> in <a rel="section" href="../../../2.0/api/Bric/Util/Event.html" name="Bric::Util::Event">Bric::Util::Event</a> with an &quot;Offset&quot; parameter but no &quot;Limit&quot; now works properly on MySQL. [David]</p>

</li>
<li><p>Fixed a misspelled method name (introduced in 1.11.1) that would&#39;ve caused an unfriendly error message if the Cover Date was partially completed on the New Story screen. [Scott]</p>

</li>
<li><p>It was possible in the New Story screen, despite autocompletion, to enter a category with no trailing slash, like <code>/foo/bar</code>, which led to an error. This was fixed by making <code>Bric::Biz::Category-&gt;lookup</code> (and <code>list</code>, <code>list_ids</code>) work by looking up with a <code>uri</code> not ending with a slash. [Scott]</p>

</li>
<li><p>Newer versions of Safari now properly handle the autocomplete form (Bug #1390). [Matt Rolf with much work by Sarah Mercier and Marshall Roch]</p>

</li>
<li><p>Fixed <code>Bric::Biz::Element::Field-&gt;get_max_length</code> to correctly return the maximum length of a field. [Adrian Yee]</p>

</li>
<li><p>The user is now properly warned when a story type is not selected on story creation (Bug #1434). [Sarah Mercier]</p>

</li>
<li><p>Fixed bug in category autocompletion so that lookups of parent categories are now correctly site-specific. [Rolf Schaufelberger, Paul Orrock]</p>

</li>
<li><p>Fixed bulk edit bug where extra newlines after a <code>=begin</code> without a default value would result in an error. [Adrian Yee]</p>

</li>
<li><p>Checkboxes are no longer always displaying as checked (Bug #1452). [Scott]</p>

</li>
<li><p>Fixed the rendering of the jump links in the desk headers in IE6/7. [Adrian Yee]</p>

</li>
<li><p>Fixed Workspace link spacing and the opening/closing of the navigation in IE6. [Adrian Yee]</p>

</li>
<li><p>Fixed rendering issues with the action icons on the workspace/desk pages in IE6/7. [Adrian Yee]</p>

</li>
<li><p>All of the WYSIWYG editors (Xinha, htmlArea, FCKeditor, and JS-Quicktags) work again. Reported by John Durkin and Matt Rolf (Bug #1429). [David]</p>

</li>
<li><p>Made the Add keywords button (on the story and media profiles) not so huge in IE. [Adrian Yee]</p>

</li>
<li><p>Fixed JavaScript error with IE and the Check In/Move action icons on the workspace and desk pages. [Adrian Yee]</p>

</li>
<li><p>Fixed popup menu rendering issues in IE and Firefox. [Adrian Yee]</p>

</li>
<li><p>Fixed popup menu z-index issues on the workspace/desk pages in IE. [Adrian Yee]</p>

</li>
<li><p>Added a JavaScript fix for popup menu z-index issues that happened after re-ordering elements. [Adrian Yee]</p>

</li>
<li><p>Fixed the category autocomplete z-index issue in IE. [Adrian Yee]</p>

</li>
<li><p>Fixed bug where related media that failed to be thumbnailed caused the Story Profile to error out. Similarly fixed bug 1461 for Find Media (Bug #1458). [Scott]</p>

</li>
<li><p>Fixed issue where auto-completion was jumping around. Slightly modified from <a href="http://blog.gilluminate.com/2009/01/20/scriptaculous-autocomplete-page-jump-using-arrow-keys/">code by Jason Gill and Janos Novak</a> (Bug #1460). [Scott]</p>

</li>
<li><p>Fixed IE6 rendering on the story profile where the textarea/inputs disappear when the page isn&#39;t wide enough. [Adrian Yee]</p>

</li>
<li><p>Fixed bug where expanding containers on the story profile page caused IE to hide the contents of the container after it&#39;s done expanding. [Adrian Yee]</p>

</li>
<li><p>Fixed bug with IE6 where elements could not be re-ordered using drag and drop. [Adrian Yee]</p>

</li>
<li><p>Fixed the horizontal scroll that was showing up in IE7 on the desk/workspace pages. [Adrian Yee]</p>

</li>
<li><p>Fixed issue where the Cancel button in Profiles wasn&#39;t working because of the fix for Bug #1343 (Bug #1455). [Scott]</p>

</li>
<li><p>Fixed issue where URLs weren&#39;t wrapping properly in IE (Bug #1464). [Adrian]</p>

</li>
<li><p>Fixed issue where the Checkout icon wasn&#39;t working on desks in IE (Bug #1466). [Scott]</p>

</li>
<li><p>Response error handling in <a rel="section" href="../../../2.0/api/Bric/Dist/Client.html" name="Bric::Dist::Client">Bric::Dist::Client</a>, which is used by <i>bric_dist_mon</i>, now properly checks the error status before looking to see if the response is from a proper distribution handler URL. This makes it easier to see what problems there are in a failed response, rather than just bailing without any useful information. [David]</p>

</li>
<li><p>Fixed an IE6 CSS bug that caused the sideNav layer to be hidden if the mainContent layer wasn&#39;t tall enough to show it (Bug #88 / #1465) [Phillip Smith]</p>

</li>
<li><p>Fixed a bug introduced in 1.10.7 (and 1.11.1) where the <code>get_uri()</code> method, now properly URI-escaping itself, was breaking media distribution for media documents with spaces or other URI-escapeable characters in their file names. Thanks to Scott Lanning for the spot, and Aaron Fuleki for the kick to get it fixed (Bug #82 / #1456). [David]</p>

</li>
<li><p>Fixed compatibility issues on MySQL. Bricolage now sets <code>sql_mode</code> when it connects to the database, so that MySQL itself does not have to globally set that option, as it could cause conflicts with other apps running on MySQL. Also removed the attempt to set <code>sql_mode</code> globally at installation time; it was bad manners, really. Thanks to Waldo Jaquith for the report. [David]</p>

</li>
<li><p>Alert type rules can once again be deleted from the UI. Thanks to Scott for the report (Bug #81). [David]</p>

</li>
<li><p>Contributors can be deleted again. Thanks to Phillip for the report (Bug #111). [David]</p>

</li>
<li><p>Fixed odd positioning of the &quot;Check-in&quot; menu on /workflow/profile/workspace (Bug #89). [Phillip Smith]</p>

</li>
<li><p>Fixed the contributor association popup so that hitting the &quot;Enter&quot; key to perform a search no longer deletes contributors you&#39;ve just added (Bug #112). [David]</p>

</li>
<li><p>Story, Media, and Template search now properly remember whether they&#39;re in advanced or simple mode when a an empty search is submitted and when the &quot;Clear Values&quot; button is clicked. Thanks to Matt Rolf for the report (Bug # 74). [David]</p>

</li>
<li><p>The category autocompletion feature in the &quot;New Story&quot; profile now refuses to submit if a non-existent category has been typed in. If the user somehow manages to submit anyway, she&#39;ll be returned to the form with a message asking for a proper category name, rather than getting an error. Thanks to Scott for the report. [David]</p>

</li>
<li><p>Double-clicking an asset on a desk to check it into that desk no longer causes the asset to drop off the desk. It will only drop off if it&#39;s being checked into a different desk (Bug #97). [David]</p>

</li>
<li><p>Fixed a compatibility issue in <a rel="section" href="../../../2.0/api/Bric/Dist/Action/DTDValidate.html" name="Bric::Dist::Action::DTDValidate">Bric::Dist::Action::DTDValidate</a>. Apparently <code>get_last_error()</code> was removed from <a href="http://search.cpan.org/perldoc?XML::LibXML">XML::LibXML</a> 1.59 &quot;for thread-safety reasons.&quot; This change backward-compatible with older versions of XML::LibXML. [David]</p>

</li>
</ul>

<h1 id="Version-1.11.1-2008-10-03-">Version 1.11.1 (2008-10-03)</h1>

<h2 id="Improvements4">Improvements</h2>

<ul>

<li><p>Added reverse date sorting option on desks (newest items first). Suggested by Bret Dawson. [Greg Heo]</p>

</li>
<li><p>Updated the Xinha include script to reflect latest Xinha updates. [Matt Rolf]</p>

</li>
<li><p>Updated the SFTP mover to use the faster Net::SSH2, rather than the deprecated Net::SFTP. [Sarah Mercier, Matt Rolf, Charlie Reitsma, Michael Herring]</p>

</li>
<li><p>The <code>to_preview</code> option to <code>Bric::SOAP::Workflow-&gt;publish</code> now previews a document for all output channels, not just the primary output channel. The same of course applies to the <code>--to-preview</code> option to <i>bric_soap</i>. Suggested by Terence Bodola. [David]</p>

</li>
<li><p>Server errors sent in response to Ajax requests are now displayed in a modal lightbox widget, rather than just getting shoved into the DOM. Also, effects that should only occur on success (such as removing a story from a desk when you move it) now only happen on success. [David]</p>

</li>
<li><p>Changed the behavior of <code>Bric::Util::Burner-&gt;publish_another</code> so that, rather than immediately publishing a document, it instead adds it to a list of documents to be published and then returns. Documents added to the list are then published when all other publish jobs in a given request have finished publishing. The upshot is that if you bulk publish 50 stories that all trigger the republication of a home page story, that home page story will be republished only once, rather than 50 times. A side-effect is memory consumption, so don&#39;t send too many stories to <code>publish_another</code> from your templates! Sponsored by NetStumbler and Kineticode, with production testing by the National Gallery of Art. [David]</p>

</li>
<li><p>Removed the &quot;Related Story&quot; and &quot;Related Media&quot; sections of the element profile, as they are now included in the &quot;Content&quot; sections of the element profile, and therefore redundant. [David]</p>

</li>
<li><p>The upload field for related media (available when the <code>RELATED_MEDIA_UPLOAD</code> <i>bricolage.conf</i> directive is enabled) is no longer displayed in the element profile. Instead, it is displayed in the &quot;Edit&quot; popup window, where you can now search for an existing media document <i>or</i> upload a new file. This eliminates a bug when more than one upload field was displayed in the &quot;Content&quot; section of a document profile. It also makes it clearer that you&#39;re editing a new, related media document, as the popup looks different than the main display window (in that it has no navigation bar). [David]</p>

</li>
<li><p>Permission and conflict messages thrown by callbacks in response to Ajax requests now cause a lightbox to be thrown up with the message highlighted. This means, for example, that if a user tries to move a story they don&#39;t have permission to move, the story will not appear to be moved in the UI and the user will be told that she lacks the permission. [David]</p>

</li>
<li><p>The &quot;New Story&quot; page now uses an autocomplete field to select a primary category. [David]</p>

</li>
<li><p>Minor improvements to the dynamic display and handling of container elements in document profiles. [David]</p>

</li>
<li><p>Related media and/or story subelements may now be toggled to show/hide them like any other subelements in a document. [David]</p>

</li>
<li><p>Added the &quot;displayed&quot; attribute to element type and container objects. Setting it on a subelement type causes the value to be set on new containers based on that type. [David]</p>

</li>
<li><p>Container elements in the document profile are now toggled open or closed depending on their &quot;displayed&quot; attribute, which persists across saves and versions. This means that the appearence of a document is the same as you left it, or as the user who last checked it in left it. [David]</p>

</li>
<li><p>New container elements added in the document profile now cause the containing element to always be toggled open, and the newly added container is also toggled open. [David]</p>

</li>
<li><p>The installer now explicitly sets permissions on the files it installs, rather than using the same permissions as the files have in the distribution. This is because a umask could force the unpacked distribution files to have permissions that are inappropriate for installed files. Reported by Roland van Ipenburg (Bug #1360). [David]</p>

</li>
<li><p>The installer now sets the permissions on configuration files to `0640`, rather than `0644`, as before, so that the files are no longer world-readable on the system. [David]</p>

</li>
<li><p>`make upgrade` is now better at determining the installed configuration, rather than making you select the database server and version of Apache again, it properly remembers the already-intalled configuration. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes5">Bug Fixes</h2>

<ul>

<li><p>Fixed non-standard installation path being ignored if changed during &quot;multi&quot; installation mode. This was done by changing the defaults files to include the <code>BRICOLAGE_ROOT</code> variable. So when <code>BRICOLAGE_ROOT</code> is changed and the others are then evaled they get changed too. [Paul Orrock]</p>

</li>
<li><p>Updated <a rel="section" href="../../../2.0/api/Bric/Admin.html" name="Bric::Admin">Bric::Admin</a> to ensure that we have at least version 1.16 of <a href="http://search.cpan.org/perldoc?Params::CallbackRequest">Params::CallbackRequest</a> so that we detect mod_perl 2 correctly when running Apache 2. [Paul Orrock]</p>

</li>
<li><p>Trying to add an element to a document that has related media fields no longer causes an error [David]</p>

</li>
<li><p>Server errors sent in response to AJAX requests no longer send a full HTML file in reply, just the error stuff. [David]</p>

</li>
<li><p>Eliminated redundant &quot;Relate&quot; column from the search results when searching for a media document to relate. [David]</p>

</li>
<li><p>The &quot;Un-relate&quot; link now properly unrelates media documents. [David]</p>

</li>
<li><p>Fixed <i>bric_dist_mon</i> so that it works when Bricolage is running on mod_perl 2. Reported by Roland van Ipenburg. [David]</p>

</li>
<li><p>Improved compatibility of the installer with certain Apache configurations where the <code>apreq2</code> module might be named differently. Reported by Roland van Ipenburg (Bug #1359). [David]</p>

</li>
</ul>

<h1 id="Version-1.11.0-2008-04-30-">Version 1.11.0 (2008-04-30)</h1>

<h2 id="New-Features2">New Features</h2>

<ul>

<li><p>Added pick-a-type dropdown to Job Manager, so you can constrain the jobs listed to, for example, only today&#39;s job or only failed jobs. [Scott]</p>

</li>
<li><p>Added support for the FCKeditor WYSIWYG editor. See the <a href="http://www.fckeditor.net/">FCKeditor site</a> for details and a demo. Sponsored by Freerun Technologies. [David]</p>

</li>
<li><p>Added support for MySQL 5.0.3 or later, from Andrei Arsu&#39;s 2006 Google Summer of Code project. [Andrei Arsu]</p>

</li>
<li><p>Added a <code>NONE</code> function to <a rel="section" href="../../../2.0/api/Bric/Util/DBI.html" name="Bric::Util::DBI">Bric::Util::DBI</a>. For any <code>list</code> parameter where you could&#39;ve used <code>ANY</code> before, you can now also use <code>NONE</code> to return only objects that <i>don&#39;t</i> match. [Scott]</p>

</li>
<li><p>Added support for Apache 2. See <a rel="subsection" href="../../../2.0/api/Bric/Admin.html#Switching-to-Apache-2" name="Bric::Admin">Switching to Apache 2 in Bric::Admin</a> or in <i>README</i> for details on switching an existing Bricolage installation from Apache 1 to Apache 2. [Scott, Chris Heiland, David]</p>

</li>
<li><p>Added element occurrence specification, from Christian Muise&#39;s 2006 Google Summer of Code project. Element types and field types can now have required minimum and maximum numbers of times they appear in a document. For example, if a &quot;pull quote&quot; element type has a minimum of 2 and a maximum of 4, when a new story is created it will be pre-populated with 2 pull quote elements. The user can add up to two more, but no more. If either min or max are 0, then there is no minimum or maximum. For backwards compatibility, the upgrade will set existing element types and field types to have min and max set to 0. [Christian Muise]</p>

</li>
</ul>

<h2 id="UI-Improvements">UI Improvements</h2>

<ul>

<li><p>JavaScript is now being used more extensively throughout the UI to improve performance and usability.</p>

<ul>

</li>
<li><p>The following items can now be edited on-the-fly (i.e. without reloading):</p>

<ul>

</li>
<li><p>Fields and subelements in the story and media profiles</p>

</li>
<li><p>Keywords in the story, media, and category profiles</p>

</li>
<li><p>Categories in the story profile</p>

</li>
<li><p>Output Channels in the story and media profiles</p>

</li>
<li><p>Organizations in the source profile</p>

</li>
<li><p>Roles in the contributor profile</p>

</li>
<li><p>Contacts in the user and contributor profiles</p>

</li>
<li><p>Extensions in the media type profile</p>

</li>
<li><p>Rules in the alert type profile</p>

</li>
</ul>

<li><p>Fields and subelements in the story and media profiles are displayed in full, so a story&#39;s entire contents can be edited from one screen, as opposed to one screen per subelement as it was previously.</p>

</li>
<li><p>The right side of desk items has been redesigned. Icons are used because they save space, and they finally allow assets to be moved between desks from the Workspace, and assets to be checked in to any desk from the Desk view. The &quot;and Publish&quot; and &quot;and Shelve&quot; options have also been added. Additionally, you have the option to immediately publish assets on publish desks, or schedule them for later.</p>

</li>
<li><p>Desks now use JavaScript to execute actions immediately. Where you previously had to choose an action from a select list and scroll all the way to the bottom to execute it, you can now check in, move, check out, or delete an asset in one click, without a full page refresh.</p>

</li>
<li><p>The event log and trail have been merged and improved. The trail was a subset of the event log that only showed desk moves. You can now filter the log by any event type, and there&#39;s a dedicated link to choose the right event types to recreate the trail.</p>

</li>
<li><p>Error details (including oft-requested stack traces) are now viewable directly from the 500 error page, instead of having to check the <i>error_log</i> or view the error page&#39;s source. To avoid scaring lay people, the details are only shown (via JavaScript) when the new &quot;View Error Details&quot; link is clicked.</p>

</li>
<li><p>When more than 3 error messages need to be displayed, the first three are shown, along with a (more) link, which expands to show the remaining messages.</p>

</li>
</ul>

<p>[Marshall, part of the Google Summer of Code 2006]</p>

<li><p>The left nav menu no longer uses an <code>&lt;iframe&gt;</code>. JavaScript and cookies are used instead, making the left nav faster. [Scott, Marshall, David]</p>

</li>
<li><p>Added the new <code>BLOB_SEARCH</code> <i>bricolage.conf</i> directive, which enables data text searches in the UI to search paragraph-type fields as well as shorter header-type fields. [David]</p>

</li>
</ul>

<h2 id="Improvements5">Improvements</h2>

<ul>

<li><p>Moved the Mason UI components in <i>comp/widgets/wrappers/sharky/</i> to <i>comp/widgets/wrappers/</i> since &quot;sharky&quot; makes no sense. [Marshall]</p>

</li>
<li><p>Updated the Portuguese localizations. [Pedro Custodio]</p>

</li>
<li><p>Added the <code>related_story_id</code> and <code>related_media_id</code> parameters to <code>Bric::Biz::Element::Container-&gt;list()</code>. [David]</p>

</li>
<li><p>Added the <code>--fatal-no-cat</code> option to <i>contrib/bric_media_upload</i>. [Scott]</p>

</li>
<li><p>Added support for a bunch of environment variables during installation. They&#39;re documented in <a rel="subsection" href="../../../2.0/api/Bric/Admin.html#Installation-Variables" name="Bric::Admin">Bric::Admin</a>/<i>INSTALL</i>, and are most useful when used in combination with either <code>INSTALL_VERBOSITY=QUIET</code> or <code>make dev</code>. [David]</p>

</li>
<li><p>The installer is no longer required to become the system super user (root) during <code>make install</code>, although it is still recommended. During the database configuration, the installer asks whether it should create the database and if it should become the database system user during installation, which is the bit that required the user to be root, and is required for compatibility with &quot;ident&quot; authentication. The default is to not become the database system user, although <code>make install</code> may still need to be run as the super user in order to install files in their proper locations. [Brian Smith and David]</p>

</li>
<li><p>When editing a field type, if a numeric value is set to an empty value, it will be set to 0 rather than retaining its previous value. [David]</p>

</li>
<li><p>The expire information for sources is now localized in the list view (the Sources Manager). [David]</p>

</li>
</ul>

<h1 id="VERSION-1.10.10-2010-04-11-">VERSION 1.10.10 (2010-04-11)</h1>

<h2 id="Improvements6">Improvements</h2>

<ul>

<li><p>When displaying categories associated with a story when the <code>ENABLE_CATEGORY_BROWSER</code> <i>bricolage.conf</i> directive is true, the categories are now displayed in alphabetical order by URI. [David]</p>

</li>
<li><p>The installer no longer requires that <a href="http://search.cpan.org/perldoc?Term::ReadPassword">Term::ReadPassword</a> be installed from the CPAN before it continues. It will use it if it finds it, but if not substitutes a simple implementation that does the trick (Bug #136). [David]</p>

</li>
<li><p>The Source select list when creating or editing a story or media documents now lists sources in alphabetical order. Reported by Michael Herring (Bug # 138). [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes6">Bug Fixes</h2>

<ul>

<li><p><a rel="section" href="../../../2.0/api/Bric/Util/Burner.html" name="Bric::Util::Burner">Bric::Util::Burner</a>&#39;s <code>publish()</code> method no longer removes documents from workflow after publishing them, as such is the responsbility of the code that calls publish. The publish callback already did, and now so does the <a rel="section" href="../../../2.0/api/Bric/SOAP/Workflow.html" name="Bric::SOAP::Workflow">Bric::SOAP::Workflow</a> <code>publish()</code> method. Thanks to David Beaudet for the report and Aaron Fuleki for the steps to replicate (Bug #98). [David]</p>

</li>
<li><p>Fixed a bug where contributor and category search results would be propagated to the contributor and category editing screens with a story or media document. Searches from within documents should cache their own results, separate from the admin search interfaces. [David]</p>

</li>
<li><p>Contributors associated with a story or media document and categories associated with a story document are no longer paginated. When there were more contributors or categories than would fit on a paginated page, the pagination didn&#39;t work and reording didn&#39;t work. So by disabling pagination in this case, we get around that issue. Documents with that many categories or contributors are rare, so the trade-off seems worthwhile. Thanks to Bret Dawson for the report (Bug #121). [David]</p>

</li>
<li><p>When associating a contributor with a media document, don&#39;t prompt for role selection if the contributor has only one role. This saves a page load for each contributor association and brings media in line with how story contributor association already works. [David]</p>

</li>
<li><p>Fixed the &quot;Log In&quot; button so that the word &quot;In&quot; is antialiased. [Waldo Jaquith]</p>

</li>
<li><p>Fixed the &quot;Not a GLOB reference&quot; error when using the PHP burner on Perl 5.10. [Alex Krohn]</p>

</li>
<li><p>The <code>best_uri()</code> method of <a rel="section" href="../../../2.0/api/Bric/Util/Burner.html" name="Bric::Util::Burner">Bric::Util::Burner</a> now avoids expired stories when searching for aliased stories. Thanks to Zdravko Balorda for the catch (Bug #144). [David]</p>

</li>
<li><p>The field type profile now properly validates code select code and lets the user know if it&#39;s not valid. [David]</p>

</li>
<li><p>The validation of code select field code is now consistent between the element type profile, the field type profile, and the SOAP element type interface. Thanks to Krzysztof Rudnik for the report (Bug #140). [David]</p>

</li>
<li><p>Setting the <code>RELATED_DOC_POD_TAG</code> <i>bricolage.conf</i> directive to &quot;url&quot; no longer breaks bulk edit. Thanks to Phillip for the report (Bug #150). [David]</p>

</li>
<li><p>The <code>best_uri()</code> method of <a rel="section" href="../../../2.0/api/Bric/Util/Burner.html" name="Bric::Util::Burner">Bric::Util::Burner</a> now works when creating a link to a story on a different site and the protocol for the output channel is not set. It defaults to &quot;http://&quot; for the protocol. [David]</p>

</li>
<li><p>Fixed error handling in the access handler so that it works when a URI is a directory. Thanks to Dave Rolsky for the initial patch. [David]</p>

</li>
<li><p>Updated session error handling to recognize a different error message in recent versions of Apache::Session. [Dave Rolsky]</p>

</li>
<li><p>Fixed bug where publishing a story with multiple categories led to the deletion of preview files. Thanks to Guido Buelskaemper for the report (Bug #156). [David]</p>

</li>
</ul>

<h1 id="VERSION-1.10.9-2010-01-28-">VERSION 1.10.9 (2010-01-28)</h1>

<h2 id="Improvements7">Improvements</h2>

<ul>

<li><p>The SFTP mover now respects a port specification in the host name (e.g, &quot;foo.example.com:22&quot;), just like the FTP mover. Thanks to Iv&aacute;n Chavero for the report and fix. [David]</p>

</li>
<li><p>The virtual FTP server now assumes that template files uploaded to it are encoded in the user&#39;s preferred encoding. So if you have Windows gremlins in your templates, you can set your Character Set preference to &quot;CP1252&quot; and it will just work. Thanks to Phillip Smith for the report (Bug #124). [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes7">Bug Fixes</h2>

<ul>

<li><p>Cover dates are no longer exported via the SOAP interface with the wrong year (2009) when their dates are in the first three days of 2010. Thanks to Paul Orrock for the spot (Bug #122) and David Oliveira via Bret Dawson for the fix! [David]</p>

</li>
<li><p>Fixed an error in <a rel="section" href="../../../2.0/api/Bric/Biz/Contact.html" name="Bric::Biz::Contact">Bric::Biz::Contact</a> where a boolean value was not passed to the database as a boolean. [David Oliveira]</p>

</li>
<li><p>Fixed the <i>favicon.ico</i> redirect so that it points to a full URL, not just a URI path. [David]</p>

</li>
</ul>

<h1 id="VERSION-1.10.8-2009-11-14-">VERSION 1.10.8 (2009-11-14)</h1>

<h2 id="Improvements8">Improvements</h2>

<ul>

<li><p>Added the <code>sql_type</code> element to the export of field types from SOAP. This prevents the SOAP server from having to guess the SQL type of a field type when updating an element type. Thanks to David Oliveira for the report (Bug #79). [David]</p>

</li>
<li><p>The <code>AddModule</code> lines are now commented-out in the <i>httpd.conf</i> generated by the installer. As near as I can tell from my research, this directive hasn&#39;t been relevant for a long time. Since we require 1.3.34 (ca. 2005), It seems good enough to comment it out and add a note to uncomment them if necessary (Bug #33). [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes8">Bug Fixes</h2>

<ul>

<li><p>Fixed a compatibility issue in <a rel="section" href="../../../2.0/api/Bric/Dist/Action/DTDValidate.html" name="Bric::Dist::Action::DTDValidate">Bric::Dist::Action::DTDValidate</a>. Apparently <code>get_last_error()</code> was removed from <a href="http://search.cpan.org/perldoc?XML::LibXML">XML::LibXML</a> 1.59 &quot;for thread-safety reasons.&quot; This change backward-compatible with older versions of XML::LibXML. [David]</p>

</li>
<li><p>Fixed a bug where a story published but with no resources (files) could cause an error. Reported by Paul Hyland. [David]</p>

</li>
<li><p>Fixed a bug where assets could not be checked in and their version numbers would revert to older ones (Bug #93). [Greg Heo &amp; David]</p>

</li>
<li><p>Passing a false value for the <code>published_version</code> parameter to the <code>list()</code> method of <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business/Story.html" name="Bric::Biz::Asset::Business::Story">Bric::Biz::Asset::Business::Story</a>, <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business/Media.html" name="Bric::Biz::Asset::Business::Media">Bric::Biz::Asset::Business::Media</a>, and <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Template.html" name="Bric::Biz::Asset::Template">Bric::Biz::Asset::Template</a> now works as expected, returning the latest version of all stories regardless of their publish status, rather than no stories at all (Bug #1). [David]</p>

</li>
<li><p>Template notes are once again editable from the template profile. Thanks to Aaron Fuleki for the report (Bug #101). [David]</p>

</li>
<li><p>Emails sent by Bricolage now have the character set specified in the content-type header when they&#39;re text messages. Thanks to Czerny for the report (Bug #94). [David]</p>

</li>
<li><p>Paginated results in the element type manager no longer lose top-level element type results when clicking the links for subsequent pages. Fixed by preventing the <code>list()</code> method of <a rel="section" href="../../../2.0/api/Bric/Biz/ElementType.html" name="Bric::Biz::ElementType">Bric::Biz::ElementType</a> from modifying the parameter hash passed to it, as the modification was persisting in the list manager&#39;s state. Thanks to Aaron Fuleki for the report and for making the Denison Bricolage installation available to diagnose the problem (Bug #102). [David]</p>

</li>
<li><p>Avoid <code>//</code> in distribution file names and/or directories. This caused problems with FTP distribution, but it seems prudent to fix it for SFTP and WebDAV, too. [David]</p>

</li>
<li><p>Fix LDAP 500 Error when a password is blank. Thanks to Aaron Fuleki for the report (Bug #103). [David]</p>

</li>
<li><p>The &quot;Site&quot; column no longer comes and goes when searching for categories in with multiple sites. Thanks to Paul Orrock for the spot (Bug #100). [David]</p>

</li>
</ul>

<h1 id="Version-1.10.7-2009-03-12-">Version 1.10.7 (2009-03-12)</h1>

<h2 id="Improvements9">Improvements</h2>

<ul>

<li><p>The &quot;Save, Save and Stay, and Return&quot; buttons in the Edit Categories screen of the story profile are moved to the right to better align with the interface buttons. [Matt Rolf]</p>

</li>
<li><p>Improved documentation of the <code>FTP_UNLINK_BEFORE_MOVE</code> <i>bricolage.conf</i> directive with specific reference to SFTP versions. [Alex Krohn]</p>

</li>
<li><p>Events are now logged using wallclock time rather than transaction start time, so that multiple events logged in a single transaction can be displayed in the order they were created, rather than in an arbitrary order. [David]</p>

</li>
<li><p><code>Bric::Util::Burner-&gt;publish_another</code> will now throw an exception if the document you pass to it is checked out. This is because publishing a story that&#39;s checked out can cause no end of havoc. The solution, as mentioned in the error message, is to pass <code>published_version =&gt; 1</code> when looking for documents to publish from within templates. [David]</p>

</li>
</ul>

<h3 id="Bug-Fixes9">Bug Fixes</h3>

<ul>

<li><p>Fixed a bug where authorization failures in callbacks could lead to a bogus error, rather than sending a &quot;Permission Denied&quot; error to the user. Reported by Matt Rolf (Bug #1362). [David]</p>

</li>
<li><p>Fixed a div nesting bug which was causing buttons to improperly align depending on pagination choices. [Matt Rolf]</p>

</li>
<li><p>Fixed a typo in <i>bric_soap</i> that prevented it from compiling. Reported by Ashlee Caul. [David]</p>

</li>
<li><p>Fixed a bug where a publish would appear to fail when no publish jobs were created (for example, when a story is published to a destination with no associated servers). Reported by Ashlee Caul. [David]</p>

</li>
<li><p>Fixed a bug where the media type of an uploaded file would not be detected if its extension had upper-case characters. Reported by Bret Dawson. [Greg Heo]</p>

</li>
<li><p>Changed the SOAP checkin code so that it is functinally identical to the UI checkin code. Hoping that this solves the issue with duplicate version constraint violations. [David]</p>

</li>
<li><p>Looking up a document or template by version ID no longer fails if the asset has been checked out and not yet checked back in since that version ID was created. Among other subtle bugs, this change fixes publishes that failed with the error message &#39;Can&#39;t call method &quot;get_id&quot; on an undefined value&#39;. Reported by Scott (Bug #1417). [David]</p>

</li>
<li><p>Fixed a bug where a scheduled publish can muck with version numbers. Reported by Matt Rolf, Ashlee Caul, and others. [David]</p>

</li>
<li><p>Fixed a bug with the virtual FTP server where deploying a template by renaming it with &quot;.deploy&quot; at the end can cause the template to be stranded on a desk. Reported by Phillip Smith (Bug # 1372). [David]</p>

</li>
<li><p>Fixed resource (file name) lookups when publishing and/or previewing documents so that SQL <code>LIKE</code> wildcard characters are ignored, so as to avoid confusing, for example, <code>/foo/bar</code> with <code>/foo_bar</code>. Reported by Scott (Bug # 1368). [David]</p>

</li>
<li><p>Files uploaded as images but without any suffix (such as &quot;.jpg&quot;) no longer cause an error. Reported by Scott (Bug # 1409). [David]</p>

</li>
<li><p>Fixed a bug in the SOAP server where attempting to check in an asset results in an error. Reported by Ashlee Caul. [David]</p>

</li>
<li><p>Republishing a story will no longer delete files from that story on preview servers. Similarly, publishing a media document with a new file but with the same name as a previously-published version will no longer cause that file to be deleted from production destinations. This bug has been fixed and refixed numerous times, but this time tests have been added to make sure that it <i>stays</i> fixed. Reported by Matt Rolf, Ashlee Caul, and others (Bug # 1368). [David]</p>

</li>
<li><p>Fixed a bug in the virtual FTP server so that, when a template is deployed by uploading it with <i>.deploy</i> appended to its name, it is properly removed from that deploy desk. Reported by Phillip Smith (Bug #1372). [David]</p>

</li>
<li><p>The &quot;Logged in as&quot; link at the top of every screen now properly uses SSL when appropriate. [David]</p>

</li>
<li><p>Fixed an inconsistency in how the case of file names in media documents was not always properly set according to the rules for the output channel. This means that if your media document&#39;s output channel requires lowercase URIs, the URI for the media document will always be lowercase, including the file name. The file name is also now always consistently URI escaped (Bug #1419). [David]</p>

</li>
<li><p>Eliminated a SQL injection vulnerability in the querying for stories, media, and templates. [David]</p>

</li>
<li><p>Fixed an issue where a document gets renamed so that a single character is replaced with an underscore: The old file was not getting removed upon publish. Reported by Ashlee Caul (Bug #1446). [David]</p>

</li>
<li><p>The <code>bric_media_upload</code> app works again. [David]</p>

</li>
</ul>

<h1 id="Version-1.10.6-2008-10-02-">Version 1.10.6 (2008-10-02)</h1>

<h2 id="Improvements10">Improvements</h2>

<ul>

<li><p>Added an &quot;TraceEnable off&quot; entry to the config in <a rel="section" href="../../../2.0/api/Bric/App/ApacheConfig.html" name="Bric::App::ApacheConfig">Bric::App::ApacheConfig</a> for Apache to neutralize the potentially malicious use of HTTP TRACE requests. See <a href="http://www.apacheweek.com/issues/03-01-24">this report</a> for details. [Dave Beaudet, Alex Krohn]</p>

</li>
<li><p>Changed an index in the story and media instance tables to improve query speed. Thanks to Alex Krohn for reporting the performance issue. [David and Josh Berkus]</p>

</li>
<li><p>Tweaked <i>contrib/bric_media_upload/bric_media_upload</i> so that it uses <code>bric_soap site list_ids</code> instead of <code>bric_soap category list_ids</code> for setting the login cookie. That should be more efficient for installations that have many more categories than they have sites. [Scott]</p>

</li>
<li><p>Added <code>--use-related-uri</code> option to <code>bric_soap</code>. [Scott, David]</p>

</li>
<li><p>For media uploaded through the Story Profile, the cover date now defaults to the current date/time instead of the cover date of the story. [Scott]</p>

</li>
<li><p>Added search by Keyword to &quot;Find Media&quot;. [Scott]</p>

</li>
<li><p>When the &quot;Filter by Site Context&quot; preference is turned on, if a user does a search and then changes the site context, the search results will not change to the new site until the user submits a new search. Reported by Matt Rolf (Bug #1337). [David]</p>

</li>
<li><p>Rewrote (again) the way in which stale files are identified for expiration. It used to be that Bricolage would look for all resources associated with a given document and output channel but none of the current jobs. But if a story had previously been in two output channels and one was removed, Bricolage didn&#39;t look for stale files in that output channel. So now Bricolage asks for a list of resources associated with a document but none of the jobs created in a publish, and then expires them all, regardless of URI, output channel, or file system path. This should fix the expiration of stale files once and for all (Bug #1351). [David]</p>

</li>
<li><p>The links to jump to different kinds of assets on My Workspace (or a desk if it happens to have different kinds of assets) are now generated in a more sensible manner, and display as text links rather than the ugly images we had previously. [David]</p>

</li>
<li><p>The &quot;Checkout&quot; and &quot;Publish Checked&quot; buttons in the &quot;Find&quot; interface for stories, media, and templates are now displayed on the right-hand side of the screen, better aligning them with the checkboxes that they&#39;re associated with. Suggested by Matt Rolf (Bug #1361). [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes10">Bug Fixes</h2>

<ul>

<li><p>Really fix bug 1232 (saving categories with 3 keywords), that was falsely claimed to have been fixed in 1.10.3. [Scott]</p>

</li>
<li><p>Fixed bug 1340, where Preview buttons weren&#39;t working within Related assets. [Scott &amp; David]</p>

</li>
<li><p>The download link in Media Profile wasn&#39;t popping up into a new window on some browsers due to a typo. Spotted by Tatiana Titova. [Scott]</p>

</li>
<li><p>In the Contributors Manager, sometimes there aren&#39;t &quot;New&quot; links, and this was causing the latest Locale::Maketext indigestion. Spotted by John Watson. [Scott]</p>

</li>
<li><p>Fix for bug 1344 (spotted by Ed Guzman) and hopefully better fix for bug 1326 (my suggestion wasn&#39;t quite right). The handling of <code>&lt;publish_status&gt;</code> elements in <code>bric_soap</code> has been a bit dodgy. Also changed <code>publish_status</code> to <code>deploy_status</code> in <code>Bric::SOAP::Template</code>. [Scott]</p>

</li>
<li><p>The state for Log lists was getting stuck, so if you go to the 2nd page of the log for a media, say, every log thereafter was the same. Reported by John Kirkwood. [Scott]</p>

</li>
<li><p>Fix both parts of bug 1345, Bulk Edit had problems with blank lines. [Scott]</p>

</li>
<li><p>Fixed CCS bug which was preventing the jump buttons from displaying in Firefox and Safari. [Matt Rolf]</p>

</li>
<li><p>Tweaked Bricolage Instance Name display. [Matt Rolf]</p>

</li>
<li><p>Fixed bug 1343, View Diff wasn&#39;t working in IE. Reported by Ed Guzman. [Scott]</p>

</li>
<li><p>A category with associated with a story different URIs but the same name as the primary category can now properly be deleted. Reported by Matt Rolf (Bug #1341). [David]</p>

</li>
<li><p>Media documents are now properly expired. Reported by Matt Rolf (Bug #1347). [David]</p>

</li>
<li><p>The login window no longer shows the username in the top right corner right after logging out. Reported by Matt Rolf (Bug #1149). [David]</p>

</li>
<li><p>Fixed a bug uploading a file to a related media element when that related media element has lockable fields. Reported by Scott (Bug #1353). [David]</p>

</li>
<li><p>Editing user preferences when SSL is enabled no longer breaks the User profile. Reported by Scott (Bug#1339). [David]</p>

</li>
<li><p>Reverting an image media document works again. Reported by Scott Lanning (Bug #1352). [David]</p>

</li>
<li><p>The links to jump to different kinds of assets on My Workspace (or a desk if it happens to have different kinds of assets) will now jump to the proper page when pagination is turned on. Reported by Matt Rolf (Bug #150). [David]</p>

</li>
</ul>

<h1 id="Version-1.10.5-2008-04-29-">Version 1.10.5 (2008-04-29)</h1>

<h2 id="Improvements11">Improvements</h2>

<ul>

<li><p>Added support for the JS-Quicktags WYSIWYG editor. [Greg Heo]</p>

</li>
<li><p>API doc corrections reported by Rod Taylor. [Scott]</p>

</li>
<li><p>Added the <code>active_sites</code> parameter to <code>Bric::Biz::Category-&gt;list</code>. [David]</p>

</li>
<li><p>Categories associated with inactive sites are no longer displayed in the category manager. Suggested by Jesper Andersen (Bug # 1286). [David]</p>

</li>
<li><p>Improved the display of related media and story information in the element list, including links to preview them (Bug # 1293). [David]</p>

</li>
<li><p>The <code>get_related_objects()</code> method of <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business.html" name="Bric::Biz::Asset::Business">Bric::Biz::Asset::Business</a> now only returns relateds for an alias that are in the same site as the alias, or that are aliases in the same site of the original relateds. This means that the automatic publishing of related documents should now properly republish only relateds in the same site as the alias document being published, rather than the relateds of the document it aliases (Bug # 1296). [David]</p>

</li>
<li><p>In the New Story form, the &quot;Slug&quot; field is no longer required if the <code>ALLOW_SLUGLESS_NONFIXED</code> <i>bricolage.conf</i> directive is disabled and the <code>AUTOGENERATE_SLUG</code> directive is enabled. It is still required in the normal story edit form, of course. Suggested by Phillip Smith (Bug # 1306). [David]</p>

</li>
<li><p>When the <code>ENABLE_CATEGORY_BROWSER</code> <i>bricolage.conf</i> directive is disabled (as it is by default), allow the categories to be deleted from the story profile when a user checks the delete checkbox and clicks &quot;Save&quot; or &quot;Check In&quot;, instead of requiring that the &quot;Delete&quot; button be clicked. Suggested by Phillip Smith (Bug # 1308). [David]</p>

</li>
<li><p>Object attributes that are edited in textarea fields in the UI and that have a limited size -- mainly &quot;description&quot; fields -- now have their line endings converted to Unix line endings. This is so that character counts properly correspond to the limits set by the UI (think of the character counter in the story profile for the description field). Reported by Matt Rolf (Bug #1318). [David]</p>

</li>
<li><p>Added code to the SOAP interface for creating and updating stories, media, and templates to throw an exception if publish dates are set when <code>publish_status</code> is false, or vice versa, rather than waiting for an exception from the database constraint. Suggested by Scott (Bug # 1326). [David]</p>

</li>
<li><p>Template code submitted via the template profile now has non-Unix line endings converted to Unix line endings. [David]</p>

</li>
<li><p>The select lists for viewing diffs now set the default &quot;from version&quot; to the previous version instead of the current version. The current version is still the default for the &quot;to version&quot;. [David]</p>

</li>
<li><p>Added another directory to search for Apache. [Brian Smith]</p>

</li>
<li><p>Made the Perl program and library installers (<i>lib/Makefile.PL</i> and <i>bin/Makefile.PL</i> more intelligent in their support of the <code>$BRICOLAGE_ROOT</code> configuration variable. [Brian Smith]</p>

</li>
<li><p>Removed redudant permission granting code from the upgrade script library, since `make db_grant` is always run by `make db_upgrade`, anyway. [David]</p>

</li>
<li><p>Eliminated extra processing and a potential error caused by mod_perl internally creating a sub-request. [David]</p>

</li>
<li><p>Bricolage no longer throws an exception when Imager fails to open an image file, which is what happens when Bricolage tries to create a thumbnail. Since most often the error will be due to a bad media file, it now just sends a warning to the error log and, if the file was just uploaded by the user, sends a message to the user, and then continues on its merry way. Suggested by Scott (Bug #1358). [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes11">Bug Fixes</h2>

<ul>

<li><p>Patch for codeselect. [Greg Heo]</p>

</li>
<li><p>Eliminated the display of the login screen in the side nav when <code>NO_TOOLBAR</code> is set to false and a session expires. Reported by Matt Rolf (Bug #921). [David]</p>

</li>
<li><p>Worked around a bug in SOAP::Lite that only appears when used in conjunction with LWP 5.810 and later. [David]</p>

</li>
<li><p>Fixed issue in <i>db_grant.pl</i>, which was trying to grant permissions to a row count. [Paul Orrock]</p>

</li>
<li><p>Fixed a bug when publishing or previewing a story with related media where an error could occur when a media document was published to more than one output channel with different URIs. Reported by Matt Wlazlo. [David]</p>

</li>
<li><p>Fixed an issue when a user with publish permission selects &quot;Check in and Publish&quot; for a newly created document. Reported by Chris Heiland and Matt Rolf (RT #1261). [David]</p>

</li>
<li><p>When creating a new media document from a related media element, if the user clicks &quot;Save&quot; or &quot;Save and Stay&quot; instead of &quot;Create&quot;, it will properly create the related media document. [David]</p>

</li>
<li><p>When creating creating a new media document by uploading a file in a related media element, clicking &quot;Save&quot;, &quot;Cancel&quot;, or &quot;Check in&quot; on the media profile page now properly redirects back to the related media element profile. [David]</p>

</li>
<li><p>A template deployed via SOAP now has its <code>published_version</code> attribute properly set. Reported by Brad Harder (Bug #1288). [David]</p>

</li>
<li><p>Fixed issue with <code>ANY()</code> not working with the <code>exclude_id</code> parameter to <code>Bric::Biz::Asset::Business::Story-&gt;list()</code> (Bug #1303). [Paul and David]</p>

</li>
<li><p>A search is no longer cached if it results in an error (Bug #1300). [David]</p>

</li>
<li><p>When creating a new media document by uploading a file to a related media element, if there is a duplicate URI for the new media document, there will no longer be an SQL error to prevent the association from going through once the URI is made unique in the media profile. Spotted by Phillip Smith (Bug #1310). [David]</p>

</li>
<li><p>Fixed a bug in the handling of the <code>subelement_id</code> parameter to the <code>list</code> methods of <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business/Story.html" name="Bric::Biz::Asset::Business::Story">Bric::Biz::Asset::Business::Story</a> and <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business/Media.html" name="Bric::Biz::Asset::Business::Media">Bric::Biz::Asset::Business::Media</a> where they were finding stories that had deleted a subelement, because it was still in the story, but was not active. This means that the advanced search for stories and media will no longer return stories that have deleted a subelement. Thanks to Chris Schults for the spot (Bug #1316). [David]</p>

</li>
<li><p>Fixed a compatibility issue in the installer with newer versions of <a href="http://search.cpan.org/perldoc?CPAN">CPAN</a>. Reported by Jean-Michel Caricand. [David]</p>

</li>
<li><p>Fixed the fix for the &quot;ident&quot; authentication issue when granting database permissions. [Rolf Schaufelberger]</p>

</li>
<li><p>Fixed the display of a field name when confirming changes to a field type. [David]</p>

</li>
<li><p>Fixed a bug in the subelement type search display where the last element type search term was displayed in the search box. It now properly displays the last subelement type search string, if any. [David]</p>

</li>
<li><p>Reverted the change in the login redirect originally submitted to fix Bug # 1267. It turns out that this change is effectively the same as just setting the <code>ALWAYS_USE_SSL</code> <i>bricolage.conf</i> directive to true. So just do that instead (I&#39;ve suggested this in <a rel="section" href="../../../2.0/api/Bric/Admin.html" name="Bric::Admin">Bric::Admin</a>, too). [David]</p>

</li>
<li><p>Fixed <code>make clean</code> so that it cleans out <i>bin</i>. It was leaving junk in there! [David]</p>

</li>
<li><p>The code that handles note editing is now more careful to check that the user has the relevant document checked out before applying the note to it, and uses a smarter algorithm for caching the document in the user&#39;s session. This is an attempt to fix a bug reported by David Beaudet (Bug # 1265). [David]</p>

</li>
<li><p>Clicking &quot;Return&quot; when viewing a diff now properly returns the user to the document or template profile, rather than My Workspace. Thanks to Matt Rolf for the spot (Bug #1327)! [David]</p>

</li>
<li><p>Fixed logout exception (hardly noticeable, but there nonetheless) when the <code>ALWAYS_USE_SSL</code> <i>bricolage.conf</i> directive is enabled, or when a user checks the &quot;Use SSL&quot; checkbox and logs in. [David]</p>

</li>
</ul>

<h1 id="Version-1.10.4-2008-03-09-">Version 1.10.4 (2008-03-09)</h1>

<h2 id="Improvements12">Improvements</h2>

<ul>

<li><p>Nicer use of the &quot;Bricolage Instance Name&quot; preference, now used on every page. [Phillip Smith]</p>

</li>
<li><p>More German corrections. [Steffen Schwigon]</p>

</li>
<li><p>Documented the need to look at <a rel="section" href="../../../2.0/api/Bric/Biz/Workflow/Parts/Desk.html" name="Bric::Biz::Workflow::Parts::Desk">Bric::Biz::Workflow::Parts::Desk</a> in <a rel="section" href="../../../2.0/api/Bric/Biz/Asset.html" name="Bric::Biz::Asset">Bric::Biz::Asset</a>&#39;s <code>set_desk_id()</code> method. [Greg Heo]</p>

</li>
<li><p>Fixed documentation of <code>Bric::Biz::Element::Container</code>&#39;s <code>delete_elements</code> method. [Bret Dawson]</p>

</li>
<li><p>Include meta-equiv tag in the header to set the charset to be UTF-8 if it is the only charset loaded in <code>$LOAD_CHAR_SETS</code>. Reported by Daisuke Maki. [Paul Orrock]</p>

</li>
<li><p>Added <code>--site</code> option to <code>bric_republish</code>. Suggested by Chauncey Thorn. [David]</p>

</li>
<li><p>Updated autovacuum documentation in <a rel="section" href="../../../2.0/api/Bric/DBA.html" name="Bric::DBA">Bric::DBA</a>. [David]</p>

</li>
<li><p>The installer now also checks in <i>/usr/lib</i> for libraries, by way of searching <code>$Config{libpth}</code> as well as <code>$Config{loclibpth}</code>. [Steffen Schwigon]</p>

</li>
<li><p>The <code>publish_status</code> attribute can now be set in stories and media created via SOAP. [David]</p>

</li>
<li><p>The code in code select fields can now access the <code>Bric::Biz::Element::Field|Bric::Biz::Element::Field</code> object itself using the variable <code>$field</code>. [Greg Heo]</p>

</li>
<li><p>When viewing elements when not checked out, whitespace is preserved for IE7, FF2, and Safari 3, so that reading and copying code is easier. Suggested by Michael Herring. [Matt Rolf]</p>

</li>
</ul>

<h2 id="Bug-Fixes12">Bug Fixes</h2>

<ul>

<li><p>More changes around bug 1267, remove protocol+hostname+port from practically all redirects (especially &quot;user profiles&quot;) in order to allow reverse proxying to work in Apache2. [Steffen Schwigon]</p>

</li>
<li><p>The <code>$BRICOLAGE_ROOT</code> environment variable specified in <i>contrib/start_scripts/freebsd</i> is now exported, allowing it to be properly passed through to <i>bric_apachectl</i>. [David]</p>

</li>
<li><p>Fix for bug 1254: checkbox fields are now saved correctly. Reported by Dawn Buie. [Scott]</p>

</li>
<li><p>Fix for bug 1294, where Search/Replace in Bulk Edit wasn&#39;t working. Reported by Phillip Smith. [Greg Heo]</p>

</li>
<li><p>Fix for bug 1269, needed to HTML-escape Notes. Reported by Matt Rolf. [Scott]</p>

</li>
<li><p>For bug 1284, weren&#39;t able to search element_type by output_channel in <code>bric_soap</code>. Reported by George Harrison. [Scott]</p>

</li>
<li><p>Bug 1291, added check for max_length of fields when importing in <code>bric_soap</code>. Reported by Simon Wilcox. [Scott]</p>

</li>
<li><p>Fix bug 1264, prevent searching on bad dates (like February 31). Reported by Marshall Roch. [Greg Heo]</p>

</li>
<li><p>Fix bug 1259, so burn_again works in the TT and PHP burners. Reported by Adeola Awoyemi. [David and Scott]</p>

</li>
<li><p>Fix bug 1307, related stories can be unrelated. Reported by Steffen Schwigon. [Scott]</p>

</li>
<li><p>Fixed issue with trailing newlines sometimes becoming a part of a contributor&#39;s name. [Greg Heo and Ryan O&#39;Toole]</p>

</li>
<li><p>Eliminated backslashes in <i>sql/Pg/Bric/Biz/Asset/Template.val</i>, which were causing warnings under PostgreSQL 8.3. The backslashes were for newlines, so I just switched to real newlines, instead.</p>

</li>
<li><p>Fixed a Perl 5.10 warning in <a href="http://search.cpan.org/perldoc?Bric::App::Callback::Search">Bric::App::Callback::Search</a>, where calls to <code>substr</code> were being properly resolved to <code>CORE::substr</code>.</p>

</li>
<li><p>Fixed the handling of globs in <a rel="section" href="../../../2.0/api/Bric/Util/Burner/TemplateToolkit.html" name="Bric::Util::Burner::TemplateToolkit">Bric::Util::Burner::TemplateToolkit</a>. It seems that in Perl 5.10, package scalars can actually be <code>SCALAR</code>s rather than `GLOB`s.</p>

</li>
<li><p>PostgreSQL 8.3 warns when we try to apply inappropriate permissions to sequences, so we updated <i>bin/bric_pgimport</i> and <i>inst/db_grant.pl</i> to grant permissions to sequences and tables separately.</p>

</li>
<li><p>Fix for bugs 1255 and 1271, which addresses pagination problems in searches for elements, groups, media, and templates. [Matt Rolf and Michael Herring]</p>

</li>
<li><p>Yet another fix for the &quot;ident&quot; authentication issue, this time for granting database permissions. [Alex Krohn]</p>

</li>
</ul>

<h1 id="Version-1.10.3-Finally-2007-08-09-">Version 1.10.3 &quot;Finally&quot; (2007-08-09)</h1>

<h2 id="Improvements13">Improvements</h2>

<ul>

<li><p>If <code>Term::ReadPassword</code> isn&#39;t found during installation, a better error message is displayed. [Scott]</p>

</li>
<li><p>Added output channel name to &quot;Could not find template&quot; error message in the Mason Burner. [Paul Orrock]</p>

</li>
<li><p>The contributed Linux start script (<i>contrib/start_scripts/linux</i>) now restarts the <code>bric_queued</code> server when the <code>restart</code> command is used and the <code>bric_queued</code> server is enabled. It also now also passes a log file name to <code>bric_queued</code> so that publishing errors can more easily be traced. [David]</p>

</li>
<li><p>Overriding Mason inheritance in story element templates by setting <code>$inherit</code> in the <code>&lt;%flags&gt;</code> block now works correctly. Thanks to Alexey Sheynuk for tracking down the issue. Reported by Ashlee Caul. [David]</p>

</li>
<li><p>Added start script for FreeBSD, <i>contrib/start_scripts/freebsd</i>. [David]</p>

</li>
<li><p>Updated the Portuguese localizations. [Pedro Custodio]</p>

</li>
<li><p>A story being published for the first time now has its <code>publish_status</code> set to true <i>before</i> it is published, instead of afterwards. This both prevents an exception when a template tries to save a story that has not been published before, and eliminates the need for templates to set the <code>publish_status</code> on a story before calling <code>publish_another()</code> for a another story that will search for the current story in the database. Reported by Rod Taylor (Ticket # 1230). [David]</p>

</li>
<li><p>Related stories and media can no longer be added to container elements not based on related story and/or media element types. Reported by Marshall Roch (Ticket # 1231). [David]</p>

</li>
<li><p>When the <code>ALWAYS_USE_SSL</code> <i>bricolage.conf</i> directive is enabled, Bricolage now sets up the non-SSL port to permanently redirect to the SSL port. This prevents users from removing the &quot;s&quot; from &quot;https&quot; and thus being able to use Bricolage insecurely when their administrators don&#39;t want them to. Reported by Joe Pletcher (Ticket # 1233). [David]</p>

</li>
<li><p>Added &quot;Autovacuum&quot; section to Bric::DBA. The <code>autovacuum</code> settings in <i>postgresql.conf</i> are available in PostgreSQL 8.1 and later. [David]</p>

</li>
<li><p>Improved verbose output in <i>contrib/bric_media_upload</i> to include bric_soap commands in output. Also now uses /usr/bin/perl instead of /usr/local/bin/perl to be consistent with other scripts and bricolage core. [Paul Orrock]</p>

</li>
<li><p>Fixed an error message during <i>inst/clone.pl</i> where the wrong version was being displayed. [Scott]</p>

</li>
<li><p>Added <code>make hot_copy</code>, which will install a clone that uses hardlinks to the original installation for MASON_DATA_ROOT and MASON_COMP_ROOT. This is useful for forking a production install into a development install (on the same box) without duplicating all of your media files. Requires `cp` from GNU coreutils, so it will not work out of the box on BSD or OS X. [Marshall]</p>

</li>
<li><p>Removed extra call to Category-&gt;list during cloning. [Scott]</p>

</li>
<li><p>Added a <code>--site</code> option to <code>bric_dev_sync</code> to limit the templates and elements that are synchronized to one site. [Marshall]</p>

</li>
<li><p>Various minor notes tweaks, including the elimination of version 0 notes from the UI, and we no longer include the note from the previous version in the form for the new version. [David Beaudet]</p>

</li>
<li><p>Added optional sortby parameter to $story-&gt;get_secondary_categories to allow sorting by uri. Returns default order if not given. [Paul Orrock]</p>

</li>
<li><p>Fixed typo in &#39;Story&#39; element type description. Reported (bug 1289) by Brad Harder. [Scott]</p>

</li>
<li><p>Several German localization patches from Steffen Schwigon and improved buttons from Rolf Schaufelberger.</p>

</li>
<li><p>Increased length of full names of categories to be 128 characters from 64 [Paul Orrock]</p>

</li>
<li><p>When saving from the Keyword Profile, the message &#39;Keyword profile &quot;Name&quot; saved.&#39; was using the previous Name instead of the updated one. [Scott]</p>

</li>
<li><p>Made category browser show only categories in the same site as the story, fix for bug 1249. [Scott]</p>

</li>
<li><p>Fixed bug 1251, the list of Element Types when uploading a new media from a related media subelement is constrained to those in the current site. [Scott]</p>

</li>
<li><p>Added notes about PostgreSQL&#39;s genetic query optimizer and its hate for Bricolage queries to <a rel="section" href="../../../2.0/api/Bric/DBA.html" name="Bric::DBA">Bric::DBA</a>. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes13">Bug Fixes</h2>

<ul>

<li><p>Fixed bug that resulted in an SQL error when trying to create a new contributor group. Reported by Joe Pletcher. [David]</p>

</li>
<li><p>Fixed some foreign key constraints in the <code>story_instance</code> and <code>template_instance</code> tables that improperly have <code>ON DELETE SET NULL</code> clauses on <code>NOT NULL</code> columns. Reported by Andrei Arsu. [David]</p>

</li>
<li><p>The &quot;Trail&quot; link in the template profile works again. Spotted by Marshall. [David]</p>

</li>
<li><p>If run as root, <code>make clone</code> now <code>chown</code>s the <i>inst</i> directory to the PostgreSQL user before becoming the PostgreSQL user, so that the user has permission to create the <i>inst/Pg.sql</i> file. [David]</p>

</li>
<li><p><code>make clone</code> no longer runs <code>distclean</code>, and therefore no longer deletes <i>inst/Pg.sql</i>. It also creates the new <i>Pg.sql</i> in the new distribution directory, instead of replacing the existing <i>Pg.sql</i>. [David]</p>

</li>
<li><p>Deleting categories via SOAP works again. Reported by Brad Harder. [David]</p>

</li>
<li><p>Fixed loading of deprecated classes so that older templates that still use them will continue to work. [David]</p>

</li>
<li><p>Removed &quot;Teaser&quot; field from the story search interface, since there is no such field, and so it did nothing, anyway. [David]</p>

</li>
<li><p>Publishing media documents that have had new files uploaded to them no longer causes a publish failure. Reported by Christian Niles and numerous others. [David]</p>

</li>
<li><p>Added even <i>more</i> code to the <code>inst/upgrade/1.8.9/fix_publish_status.pl</code> upgrade script to better cover the possible variations in publish status inaccuracies. [Alex Howarth, David]</p>

</li>
<li><p>The &quot;Document Type/Output Channel&quot; selection in the &quot;Default Asset Sort&quot; no longer breaks things. [David]</p>

</li>
<li><p>Contributors with no more than the default role, &quot;DEFAULT&quot;, who are associated with a story or media document, are once again correctly associated via the role. Reported by Chris Schults. [David]</p>

</li>
<li><p>&quot;Checkin and Shelve&quot; works again in the story profile. Reported by Chris Heiland (Ticket # 1237). [David]</p>

</li>
<li><p>Fixed a script that upgrades to 1.9.1 to better copy over default values for field types from the 1.8 schema. Those who have already upgraded to check to make sure that any default values you had for custom fields in 1.8 are still present in 1.10.x. Anyone who has yet to upgrade to 1.10.x will now have their default values properly copied to the new schema when they do decide to upgrade. Reported by Chris Schults (Ticket # 1239). [David]</p>

</li>
<li><p>Story and media subelements are once again properly deleted from within their profiles when the &quot;Delete this Profile&quot; checkbox is checked and either the &quot;Save&quot; or the &quot;Save and Stay&quot; button is pressed. Reported by Chris Schults (Ticket #1240). [David]</p>

</li>
<li><p>Searches by URI for media to relate to a document now properly remember the search results the next time the related media search page is loaded. Reported by Chris Schults (Ticket # 1241). [David]</p>

</li>
<li><p>`make dev` no longer supports the &quot;single&quot; installation mode, since it will wipe out all of <i>/usr/local/lib</i> and <i>/usr/local/bin</i>. Reported by Christian Muise (Ticket # 1246). [David]</p>

</li>
<li><p>The search interface for paginated searches no longer gets stuck when the alpha search preference is enabled. Reported by Neal Sofge (Ticket # 1247). [David]</p>

</li>
<li><p>Fixed <i>contrib/bric_media_upload</i> so that it works with 1.10 categories and XML elements. [David, Paul Orrock, and George Harrison]</p>

</li>
<li><p>Bricolage now assumes that template files uploaded in the template profile are encoded in UTF-8, since the same is assumed for templates pasted into the form field. [David]</p>

</li>
<li><p>Fixed resource deletion code in <a rel="section" href="../../../2.0/api/Bric/DBA.html" name="Bric::DBA">Bric::DBA</a> to properly use booleans for boolean columns. Reported by John Greene. [David]</p>

</li>
<li><p>Eliminated &quot;Use of uninitialized value in substitution (s///)&quot; warning for stories with no slug and a URI format with &quot;%{slug}&quot; in it. Reported by Wayne Slavin. [David]</p>

</li>
<li><p><i>bric_soap</i> no longer prompts for a password if you use <code>--use-cookie-file</code>. Reported by Paul Orrock. [Scott]</p>

</li>
<li><p><i>bin</i> files should no longer be put under the default site script directory (compensates for an ExtUtils::MakeMaker change). [Scott]</p>

</li>
<li><p>When a media document gets a new file uploaded with the same name as the previously published file in that same media document, Bricolage will no longer expire the new file right after publishing it. Reported by Chris Schults and others. [David]</p>

</li>
<li><p>The delete checkbox and menu to move an asset to another desk no longer appear for assets listed on a desk that are checked out do a different user. [David Beaudet]</p>

</li>
<li><p>Fixed bugs in <code>bric_dev_sync</code> resulting from the renaming of Elements to Element Types. [Marshall]</p>

</li>
<li><p>Fixed an apparently old bug (1232) with editing keywords in the Category Profile, where you couldn&#39;t Save if there were exactly 3 keywords. [Scott]</p>

</li>
<li><p>Fixed pasto in <a rel="section" href="../../../2.0/api/Bric/Util/Trans/SFTP.html" name="Bric::Util::Trans::SFTP">Bric::Util::Trans::SFTP</a> that should have prevented it from ever working, but somehow did not. [David P. Beaudet]</p>

</li>
<li><p>Fixed the datetime-handling regex in <a rel="section" href="../../../2.0/api/Bric/Util/Time.html" name="Bric::Util::Time">Bric::Util::Time</a>&#39;s <code>datetime</code> function, introduced in version 1.9.0. It was failing on datetimes that end with &#39;Z&#39; (c.f. ISO 8601). [Scott]</p>

</li>
<li><p>Fixed bug 1258, where MIME types weren&#39;t being recognized. [Bret Dawson]</p>

</li>
<li><p>Fixed bug 1283, allowing <code>&lt;=</code> in Alerts. [Brad Fox]</p>

</li>
<li><p>Fixed pasto causing <code>Can&#39;t locate object method &quot;get_grp_ids&quot; via package &quot;id&quot;</code> error in Element Profile. Reported by Matt Rolf. [Scott]</p>

</li>
<li><p>When adding subelements to an ElementType profile, subelements that have already been added are no longer listed. Reported by Phillip Smith in bug 1253. [Scott]</p>

</li>
<li><p>Stopped the upgrade script <i>inst/upgrade/1.9.1/delete_old_stuff.pl</i> from incorrectly deleting <i>lib/Bric/App/Callback/Profile/ElementType.pm</i>, which is still in use. If you&#39;ve upgraded from before 1.9.1, you&#39;ll have to copy that file from the distribution source. [Scott]</p>

</li>
<li><p>Changing the category of a media object now calls a preview of the asset if AUTO_PREVIEW_MEDIA is turned on. [Paul Orrock]</p>

</li>
<li><p>For bug 1267, remove protocol+hostname+port from a login URL in order to allow reverse proxying to work in Apache2. [Steffen Schwigon]</p>

</li>
<li><p>Fixed contributor type creation (bug 1299). [Greg Heo]</p>

</li>
</ul>

<h1 id="Version-1.10.2-Summer-2006-06-22-">Version 1.10.2 &quot;Summer&quot; (2006-06-22)</h1>

<h2 id="Improvements14">Improvements</h2>

<ul>

<li><p>Added the <code>subelement_id</code> parameter to the story and media <code>list()</code> methods. [David]</p>

</li>
<li><p>Added placeholder for Japanese localization. Expect a translation soon! [David]</p>

</li>
<li><p>The &quot;codeselect&quot; field&#39;s Perl code can now return an array of array references or a hash reference, in addition to the previous support for an even-sized array reference. [David]</p>

</li>
<li><p>Added a &quot;Republish&quot; checkbox and corresponding &quot;Publish Checked&quot; button to the Story and Media &quot;Find&quot; pages for stories and media not currently in workflow and to which the user has PUBLISH permission. Based on a patch from Serge Sozonoff. [David]</p>

</li>
<li><p>Added tests for <a rel="section" href="../../../2.0/api/Bric/SOAP/Auth.html" name="Bric::SOAP::Auth">Bric::SOAP::Auth</a>, although they haven&#39;t yet been integrated into <code>make devtest</code>. [Scott]</p>

</li>
<li><p>The number of items on a desk can now be displayed next to the desk&#39;s name in the navigation menu, e.g. &quot;Edit (10)&quot;. This feature is configurable on a per-user basis via the new &quot;Show Desk Asset Counts&quot; preference. Based heavily on a patch from Alex Howarth. [Marshall]</p>

</li>
<li><p>Updated <i>README.MacOSX</i> with instructions on how to use the built-in version of Apache instead of compiling everything yourself. Also fixed a broken link and an outdated warning about <a href="http://search.cpan.org/perldoc?Apache::SizeLimit">Apache::SizeLimit</a>. [Marshall]</p>

</li>
<li><p>Internationalized the JavaScript messages for the Find/Replace dialog box, although there are currently no translations. [David]</p>

</li>
<li><p>Added a close icon to the drag bar of the dialog box. This is useful when the dialog box is bigger than the browser window and the close button therefore is off-screen. [David]</p>

</li>
<li><p>Optimized the <code>get_notes()</code> and <code>has_notes()</code> methods of <a rel="section" href="../../../2.0/api/Bric/Biz/Asset.html" name="Bric::Biz::Asset">Bric::Biz::Asset</a> and therefore of the story, media, and template classes. [David]</p>

</li>
<li><p>Aliases are now indicated in Find Stories by an arrow icon just before the story title. Suggested by Paul Orrock. [David]</p>

</li>
<li><p>Added <code>PUBLISH_RELATED_FAIL_BEHAVIOR</code> <i>bricolage.conf</i> directive to be used when <code>PUBLISH_RELATED_ASSETS</code> is enabled. If the automatic publication of a related story or media document will not be possible then the publish request will fail. It can be changed to &quot;warn&quot;, the previous behaviour, if required. [Paul Orrock]</p>

</li>
<li><p>Added the &quot;Remove Frameset&quot; link to the control bar next to the &quot;Repreview&quot; link in the preview window. [Paul Orrock]</p>

</li>
<li><p>Deleted all of the outdated and unused <i>.use</i> files from <i>sql/Pg</i>. [David]</p>

</li>
<li><p>Removed documentation of the <code>-t</code> option of <i>bric_pgimport</i>, which hasn&#39;t actually done anything for a long time, anyway. [David]</p>

</li>
<li><p>Moved translation-specific JavaScript and CSS files into <i>i18n</i> folders under their respective folders in <i>comp/media/</i>. [Marshall]</p>

</li>
<li><p>Slightly tweaked the background color on table rows to make them easier to read. [Marshall]</p>

</li>
<li><p>Converted the group permissions editor to XHTML and CSS to fix some rendering glitches. [Marshall]</p>

</li>
<li><p>Made word and character counts properly appear read-only, and repositioned the find/replace and cheat sheet buttons to the top right of the box. [Marshall]</p>

</li>
<li><p>Object select lists (such as for story element types when creating a new story) will now display as scrolling lists if there are more than 50 items in the list, rather than 20 or more items. [David]</p>

</li>
<li><p>Added a CSS ID to the <code>&lt;body&gt;</code> tag in the UI, of the form &quot;bricolage_<code>VHOST_SERVER_NAME</code>&quot;, where <code>VHOST_SERVER_NAME</code> is the value defined in <i>bricolage.conf</i>. Use this ID when writing user stylesheets to override the look of the Bricolage UI (see SkinningBricolage in the Wiki) [Marshall]</p>

</li>
</ul>

<h2 id="Bug-Fixes14">Bug Fixes</h2>

<ul>

<li><p>Fixed the rarely-used <code>DISABLE_NAV_LAYER</code> <i>bricolage.conf</i> directive. [Scott]</p>

</li>
<li><p>Fixed warnings in deprecated methods of <a rel="section" href="../../../2.0/api/Bric/Biz/Element/Container.html" name="Bric::Biz::Element::Container">Bric::Biz::Element::Container</a> so that they are no longer fatal. Reported by Nate Perry-Thistle. [David]</p>

</li>
<li><p>Fixed reverted media that led to the &quot;Too many Bric::Biz::Element::Container objects found&quot; error. It was supposed to have been fixed in 1.10.1, but that fix unfortunately only fixed stories. Reported by Tom Kjeldsen. [David]</p>

</li>
<li><p>Fixed the <code>subelement_key_name</code> parameter to the story and media <code>list()</code> methods. [David]</p>

</li>
<li><p>Fixed the &quot;Search by Subelement&quot; feature of story search. Thanks to Nate Perry-Thistle for the spot. [David]</p>

</li>
<li><p>Fixed highlighting when sorting by Element on desks (bug 1185). [Brad Harder]</p>

</li>
<li><p>The &quot;Default Field&quot; select list in Bulk Edit works again. Thanks to Tom Kjeldsen for uncovering the underlying problem. [David]</p>

</li>
<li><p>The <code>throw_error()</code> method in <a rel="section" href="../../../2.0/api/Bric/Util/Burner.html" name="Bric::Util::Burner">Bric::Util::Burner</a> works properly again. Thank to Paul Orrock for the spot and to Scott for revealing the solution. [David]</p>

</li>
<li><p>The &quot;Story Type&quot; and &quot;Media Type&quot; options for sorting stories and media, respectively, on desks and on My Workspace, work again. Reported by Brad Harder. [David]</p>

</li>
<li><p>The <i>inst/upgrade/1.9.1/xtract_attype2.pl</i> upgrade script now detects whether the database has been converted to use boolean columns and casts values moved from numeric columns accordingly. Reported by Brad Harder. [David]</p>

</li>
<li><p>Fields that use the &quot;codeselect&quot; widget work again. Reported by Michael Glaesemann. [David]</p>

</li>
<li><p>Fixed auto-publishing related media and stories so that relateds of relateds now correctly pull out all the items to be published, e.g., media related to story related to published story (bug 1190). [Paul Orrock]</p>

</li>
<li><p>Updated <i>inst/upgrade/1.9.0/no_more_numeric.pl</i> so that it properly handles cases where PostgreSQL&#39;s dump does not use parentheses for casts. Reported by George Harrison. [David]</p>

</li>
<li><p>Aliases no longer show up in the search results of the &quot;New Alias&quot; screen, since aliases can&#39;t be aliased. The &quot;New Alias&quot; screen now also shows the site a document belongs to if there are multiple sites. [Marshall]</p>

</li>
<li><p>Fixed the appearance of template diffs. Insertions and deletions now have color and no longer show underlines and strikethroughs (bug 1171). [Marshall]</p>

</li>
<li><p>Character counts in Bulk Edit are now properly updated after using Find/Replace. [Marshall]</p>

</li>
<li><p>Pulldowns no longer improperly display as 32-items tall in the story/media profiles (bug 1178, reported by Alex Howarth). [Scott and Marshall]</p>

</li>
<li><p>Fixed a bug where search results would get &quot;stuck&quot; when pagination is turned on. Thanks to Nate Perry-Thistle for the spot (bug 1166). [Marshall]</p>

</li>
<li><p>Fixed a warning from <i>bric_republish</i> when run without a password. Thanks to John Gillis for the spot (bug 1188). [Marshall]</p>

</li>
<li><p>Fixed the &quot;Site&quot; dropdown in searches to only require READ permissions rather than EDIT. Spot and quasi-patch by Chris Sutton. [Marshall]</p>

</li>
<li><p>New fields now are properly configured with the their <code>multiple</code> attribute copied from the field type. [Alexey Sheynuk]</p>

</li>
<li><p>New destinations can now be created via <a rel="section" href="../../../2.0/api/Bric/SOAP/Destination.html" name="Bric::SOAP::Destination">Bric::SOAP::Destination</a>. [Christian Niles]</p>

</li>
<li><p>Fields in an element that are based on field types deleted from the element type can now still be edited in Bulk Edit. Thanks to Nate Perry-Thistle for the spot. [David]</p>

</li>
<li><p>New users can once again be created when using the LDAP authentication engine. Reported by Christian Niles. [David]</p>

</li>
<li><p>Using Internet Explorer to create a media document via a the upload field in a related media element no longer uses a full Windows file system path. Reported by Tom Kjeldsen. [David]</p>

</li>
<li><p>Fixed caching issue with reversion of assets to earlier versions. [David]</p>

</li>
<li><p>The category SOAP interface now allows the <code>&lt;path&gt;</code> XML element to not have a trailing slash, as was the case in Bricolage 1.8 and earlier. [David]</p>

</li>
<li><p>Aliases are once again identifiable on desks by a different background color for the title, and now also with an arrow icon that appears just before the story title. [David]</p>

</li>
<li><p>A field deleted from the contributor profile no longer continues to appear in the profile when pressing the &quot;Save and Stay&quot; button. Reported by Marshall. [David]</p>

</li>
<li><p>Eliminated an endless loop in prompting for the PostgreSQL user during installation when the <code>INSTALL_VERBOSITY</code> is set to &quot;QUIET&quot;. [Rod Taylor]</p>

</li>
<li><p>Contributors are no longer sorted by the &quot;Name Format&quot; preference&#39;s representation of the contributors&#39; names in the interface to edit contributor associations. They are now properly sorted by association order. Reported by Bret Dawson. [David]</p>

</li>
<li><p>Documents without cover dates (mainly created via the SOAP interface) will no longer have broken URIs. Reported by Christian Niles. [David]</p>

</li>
<li><p>The Help and logo popup buttons works again in Internet Explorer. Reported by Chris Heiland. [David]</p>

</li>
<li><p>Autosizing textarea fields now display full size in Internet Explorer when they have no content, instead of only 1 character wide. Reported by Paul Orrock. [David]</p>

</li>
<li><p>The Bulk Edit and template code textarea fields no longer jump around as you type in IE 6. [David]</p>

</li>
<li><p>The list of templates deployed is now reported properly after a successful deploy. [Paul Orrock]</p>

</li>
<li><p>Searching by URI for related media works again. [David]</p>

</li>
<li><p>The results when searching for media or stories to relate are no longer tied to the search for stories and media in general. [David]</p>

</li>
</ul>

<h1 id="Version-1.10.1-2006-03-20-">Version 1.10.1 (2006-03-20)</h1>

<h2 id="New-Features3">New Features</h2>

<ul>

<li><p>Added a guide on how to profile Mason templates. See <i>contrib/template_profiling</i>. [Scott]</p>

</li>
<li><p>Added ContribType, Destination, and Preference SOAP modules. [Scott]</p>

</li>
<li><p>When a page finishes loading, the first text or textarea form field now automatically gets the focus. [David]</p>

</li>
<li><p>Added upload and download feature to the template interface, so that templates can optionally be uploaded or downloaded. Suggested by Chris Sutton. [David]</p>

</li>
</ul>

<h2 id="Improvements15">Improvements</h2>

<ul>

<li><p>When a story is previewed, any related media are distributed to the preview server only if the <code>AUTO_PREVIEW_MEDIA</code> <i>bricolage.conf</i> directive is disabled or the media documents need to be previewed. [David]</p>

</li>
<li><p>Added installation defaults for FreeBSD that will be used when the <code>USE_DEFAULTS</code> environment variable is set to &quot;freebsd&quot; during installation. [Rod Taylor]</p>

</li>
<li><p>Added a <code>make devclone</code> option which does the same as <code>make clone</code> but removes all of the locally previewed files, the <i>data/obj</i> files, staging and sandboxes. This means a large saving in download size for cloned production systems. [Paul Orrock]</p>

</li>
<li><p>Added <code>ALLOW_URIS_WITHOUT_CATEGORIES</code> <i>bricolage.conf</i> directive to allow URI formats not to include &quot;%{categories}&quot;, which is otherwise rquired. Use this directive with caution since it is not the recommended behaviour. [Paul Orrock]</p>

</li>
<li><p>Added a tooltip to show the underlying Bricolage database ID when hovering over a UUID in a story profile. This feature complements showing the UUID when the hovering over the Bricolage ID in a desk view. [Paul Orrock]</p>

</li>
<li><p>Changed the database columns for the <code>name</code>, <code>key_name</code>, and <code>description</code> attributes of <a rel="section" href="../../../2.0/api/Bric/Biz/ElementType/Parts/FieldType.html" name="Bric::Biz::ElementType::Parts::FieldType">Bric::Biz::ElementType::Parts::FieldType</a> from <code>VARCHAR</code> to <code>TEXT</code>, since some folks will have field types with names and key names longer than 32 characters. Reported by Nate Perry-Thistle. [David]</p>

</li>
<li><p>Created two new make targets, &quot;install_files&quot; and &quot;install_db&quot;, to allow the files to be installed without doing anything with the database. Useful for packagers who need to let users manually create the database. [Marshall]</p>

</li>
<li><p>Updated <a rel="section" href="../../../2.0/api/Bric/ElementAdmin.html" name="Bric::ElementAdmin">Bric::ElementAdmin</a> to be conversant in the merging of element type sets and elements. That is, it now makes sense in the context of Bricolage 1.10. Reported by Ryan O&#39;Toole. [David]</p>

</li>
<li><p>The View/Edit link has been restored to stories, media, and templates on desks, and the title has been returned to its status as a preview link. The URI is no longer a link. [David]</p>

</li>
<li><p>Made the &quot;Upload&quot; section of the media profile valid XHTML styled with CSS. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes15">Bug Fixes</h2>

<ul>

<li><p>Removed call to deleted component <i>comp/widgets/qa/qa.mc</i> from the side navigation component. This was only an issue when the <code>QA_MODE</code> <i>bricolage.conf</i> directive was enabled. Reported by Derek Poon. [David]</p>

</li>
<li><p>Fixed the typo &quot;Distribintion&quot; in the side navigation. Thanks to Christian Niles for the spot. [David]</p>

</li>
<li><p>Fixed some errors in and rearranged the SOAP schema in <a rel="section" href="../../../2.0/api/Bric/SOAP.html" name="Bric::SOAP">Bric::SOAP</a>. [Christian Niles]</p>

</li>
<li><p>Fixed a foreign key constraint on <code>media_element.related_story__id</code> that was pointing to <code>media.id</code> instead of <code>story.id</code>. Reported by Rod Taylor. [David]</p>

</li>
<li><p>Fixed localization errors such as, &quot;Can&#39;t use &quot;for Published&quot; as a method name in bracket group,&quot; which appeared in searches and on desks. Thanks to Guido B&uuml;lsk&auml;mper for the spot! [David]</p>

</li>
<li><p>The database upgrade script now updates table permissions after executing all of the scripts for each version to be upgraded, rather than after all of the upgrade scripts have run, thus allowing later scripts to properly access tables created by earlier scripts. Reported by Nate Perry-Thistle. [David]</p>

</li>
<li><p>Fixed some of the 1.8.9 upgrade scripts that run <i>after</i> the 1.9.x upgrade scripts to that they are properly compatible. [Nate Perry-Thistle, Rod Taylor, and David]</p>

</li>
<li><p><a rel="section" href="../../../2.0/api/Bric/Biz/ElementType.html" name="Bric::Biz::ElementType">Bric::Biz::ElementType</a> loads again. [Nate Perry-Thistle]</p>

</li>
<li><p>The <code>MEDIA_UNIQUE_FILENAME</code> <i>bricolage.conf</i> directive is now fixed so that the file name creation comes after the ID generation and therefore correctly saves the renamed file. [Paul Orrock]</p>

</li>
<li><p>Fixed the UI display in Firefox and IE. Particularly Meta Assets displaying down the page in IE, stretching out the banner in desks, corrected side menu position in IE and removed reference to broken images left in from the CSS reworking. Also fixed textarea which was ignoring cols setting in IE and set textarea col width for bulk edit to 80 wide, rather than 30 (although it should expand with the window size in most browsers). [Paul Orrock]</p>

</li>
<li><p>Fixed the history so that clicking the return button in the UI no longer goes back to the preview page when the preview page was the last page accessed. [Paul Orrock]</p>

</li>
<li><p>The XML generated when exporting element types via SOAP no longer includes the <code>top_level</code> element twice, thus avoiding mysterious &quot;no sites defined&quot; errors when attempting to import or update element types from that XML. Reported by Nate Perry-Thistle. [David]</p>

</li>
<li><p>Reverting stories and media no longer leads to occasional errors such as, &quot;Too many Bric::Biz::Element::Container objects found&quot;. Reported by Simon Wilcox. [David]</p>

</li>
<li><p>Disabled the &quot;sticky&quot; scroll bar in the story profile. It just didn&#39;t work very well. [David]</p>

</li>
<li><p>The &quot;Allow Multiple&quot; checkbox and &quot;Size&quot; field in the &quot;Add New Field&quot; section of the element type profile work again. Reported by Rod Taylor and Paul Orrock. [David]</p>

</li>
<li><p>Multiple select lists no longer break the story and element profiles, and can once again have their values properly changed from multiple to single to none. Spotted by Rod Taylor. [David]</p>

</li>
<li><p>Desk pagination is now properly styled. [David]</p>

</li>
<li><p>Assets can once again be properly deleted from desks. [David]</p>

</li>
<li><p>Silenced status messages when previewing a media document under the <code>AUTO_PREVIEW_MEDIA</code> <i>bricolage.conf</i> directive. Reported by Rod Taylor. [David]</p>

</li>
<li><p>Cancelling the checkout of an media document now deletes any new file that has been uploaded and, if the <code>AUTO_PREVIEW_MEDIA</code> <i>bricolage.conf</i> directive is enabled, re-previews the previous version of the media file. [David]</p>

</li>
<li><p>The autopopulated fields for image element types are now created when a new image element type is created. This was made possible by moving the selection of media type (Image, Audio, Video, or Other Media) to the New Element Type screen, where it is now part of the &quot;Content Type&quot; select list, which also includes the Story and Subelement options. As a result, one can no longer change the media type in an existing element type (not that it ever made sense to do so). Reported by Paul Orrock. [David]</p>

</li>
<li><p>Fixed the selection of text triggered by the Find dialog box on Mozilla and IE (although I find IE to be a bit broken in this way). [David]</p>

</li>
<li><p>Fixed the size of the preview links on desks/My workspace. [David]</p>

</li>
<li><p>Failed jobs can once again be cancelled. Reported by Rod Taylor. [David]</p>

</li>
<li><p>Publishing multiple versions of a document before any of the publish jobs for those versions are executed no longer leads to publishing errors when the older version is published. Thanks to Rod Taylor for the spot! [David]</p>

</li>
<li><p>The element trace generated for burn errors (those created by <code>$burner-&gt;throw_error()</code>) now use the <code>place</code> attribute of the element where the error was thrown, rather than the <code>object_order</code>, since <code>place</code> corresponds to the &quot;Position&quot; select list orderings in the UI, and therefore makes it much simpler to figure out where the error is. [David]</p>

</li>
<li><p>Output channels with includes can now be created via the output channel SOAP interface. [David]</p>

</li>
<li><p>Fixed the category SOAP interface to support post-1.10 URIs that support paths ending in a slash. [David]</p>

</li>
<li><p>Fixed the publication of multiple documents at once from a publish desk so that documents that are both selected and related to other documents don&#39;t get skipped. [David]</p>

</li>
<li><p>The &quot;Find Templates&quot; results now display the template URI rather than its file name, to be consistent with the template profile. Reported by Marshall. [David]</p>

</li>
</ul>

<h1 id="Version-1.10.0-2006-01-23-">Version 1.10.0 (2006-01-23)</h1>

<h2 id="Improvements16">Improvements</h2>

<ul>

<li><p>Eliminated letter graphics for &quot;Published&quot; and &quot;Deployed&quot; labels in story, media, and template managers in favor of localizable characters. [David]</p>

</li>
<li><p>Moved the <code>display_pages()</code> method from subclasses to <a rel="section" href="../../../2.0/api/Bric/Util/Burner.html" name="Bric::Util::Burner">Bric::Util::Burner</a>. Each subclass must implement a <code>display_element()</code> method for it to work; this means that it works for all current burners except the HTML::Template burner, which manages pages differently. This also fixed pagination issues in the Template Toolkit and PHP burners. [David]</p>

</li>
<li><p>Completely updated <a rel="section" href="../../../2.0/api/Bric/Templates.html" name="Bric::Templates">Bric::Templates</a> and <a rel="section" href="../../../2.0/api/Bric/AdvTemplates.html" name="Bric::AdvTemplates">Bric::AdvTemplates</a>, with expanded API documentation and examples in Mason, Template Toolkit, and PHP. [David]</p>

</li>
<li><p>Refactored the left navigation code to perform better and be easier to maintain. It now also sorts the admin menu items in alphabetical order by the localized name of each. [David]</p>

</li>
<li><p>Updated the UI to fix Internet Explorer glitches. [Marshall]</p>

</li>
<li><p>The Element Type profile is now much smarter about displaying site associations with an element type. If the user has access to only one site and the element type is associated with no more than one site, then the &quot;Sites&quot; section won&#39;t be displayed, but the primary output channel can be selected via a radio button among the list of output channels. If the user has access to more than one site or if the element type is associated with more than one site, the &quot;Sites&quot; section will be displayed and the primary output channel can be selected from a select list for each site. [David]</p>

</li>
<li><p>The Element Type Manager now displays the key name for each element, in addition to its name, and instead of the its description. [David]</p>

</li>
<li><p>Added <code>RELATED_DOC_POD_TAG</code> <i>bricolage.conf</i> directive, so that users don&#39;t have to be limited to seeing related stories and related media represented by <code>=related_story_uuid</code> and <code>=related_media_uuid</code>. Just set it to &quot;uuid&quot;, &quot;uri&quot;, &quot;url&quot;, or &quot;id&quot; to get a different tag. [David]</p>

</li>
<li><p>Optimized comparison of new and old attribute values when setting attributes. Based on an example sent by Curtis &quot;Ovid&quot; Poe. [David]</p>

</li>
<li><p>Added <code>site</code> parameter for a site name to the list() methods of the story, media, and template classes. [David]</p>

</li>
<li><p>Added <i>republish_by_uri</i> contrib script. [David and Mark]</p>

</li>
<li><p>Field types can now have their widgets changed via the UI as well as via SOAP. So you can change a &quot;text&quot; widget to &quot;textarea&quot;, for example. [David]</p>

</li>
<li><p>Fixed the options in the &quot;Default Asset Sort&quot; to be more up-to-date. [David]</p>

</li>
<li><p>Updated the context-sensitive online help avaialable by clicking the &quot;Help&quot;button at the top of the Bricolage UI. [David]</p>

</li>
</ul>

<h1 id="Version-1.9.1-Peeves-2005-10-28-">Version 1.9.1 &quot;Peeves&quot; (2005-10-28)</h1>

<h2 id="New-Features4">New Features</h2>

<ul>

<li><p>Added support for the <code>ANY()</code> function to pass multiple possible values for a given parameter to the <code>list()</code>, <code>list_ids()</code>, and, where pertinent, <code>href()</code> methods in the following classes:</p>

<dl>

<dt><a rel="section" href="../../../2.0/api/Bric/Dist/Action.html" name="Bric::Dist::Action">Bric::Dist::Action</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Dist/ActionType.html" name="Bric::Dist::ActionType">Bric::Dist::ActionType</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Dist/Resource.html" name="Bric::Dist::Resource">Bric::Dist::Resource</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Dist/Server.html" name="Bric::Dist::Server">Bric::Dist::Server</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Dist/ServerType.html" name="Bric::Dist::ServerType">Bric::Dist::ServerType</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/Alert.html" name="Bric::Util::Alert">Bric::Util::Alert</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/Alerted.html" name="Bric::Util::Alerted">Bric::Util::Alerted</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/AlertType.html" name="Bric::Util::AlertType">Bric::Util::AlertType</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/AlertType/Parts/Rule.html" name="Bric::Util::AlertType::Parts::Rule">Bric::Util::AlertType::Parts::Rule</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/Event.html" name="Bric::Util::Event">Bric::Util::Event</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/EventType.html" name="Bric::Util::EventType">Bric::Util::EventType</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/Job.html" name="Bric::Util::Job">Bric::Util::Job</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/MediaType.html" name="Bric::Util::MediaType">Bric::Util::MediaType</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/Pref.html" name="Bric::Util::Pref">Bric::Util::Pref</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/Priv.html" name="Bric::Util::Priv">Bric::Util::Priv</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/UserPref.html" name="Bric::Util::UserPref">Bric::Util::UserPref</a></dt>
<dd>

</dd>
</dl>

<p>[David]</p>

</li>
<li><p>Added <code>serialize_to_pod()</code> and <code>update_from_pod()</code> methods to the container element class. These support a pseudo-pod syntax that enables a complete hierarchy of elements to be edited, including links to related stories and media, in a single stream of text. [David]</p>

</li>
<li><p>Converted &quot;Bulk Edit&quot; in the UI to use the new POD syntax supported by the element classes and eliminated the old &quot;Super Bulk Edit&quot; interface since it became redundant. [David]</p>

</li>
<li><p>Added the &quot;Include deleted&quot; checkbox to Advanced Search in &quot;Find Stories,&quot; &quot;Find Media,&quot; and &quot;Find Templates&quot; intefaces; this allows searching for and reactivating deleted stories, media, and templates. [Scott]</p>

</li>
<li><p>Added the &quot;Subelement&quot; select list to the &quot;Find Stories&quot; interface, to allow searching on stories by the types of subelements they contain. [Scott]</p>

</li>
<li><p>The <code>Order</code> and <code>OrderDirection</code> parameters to the <code>list()</code> methods of the story, media, and template classes can now be specified as array references so as to sort on more than one attribute. [David]</p>

</li>
<li><p>Added <code>Order</code>, <code>OrderDirection</code>, <code>Limit</code>, and <code>Offset</code> parameters to the <code>list()</code> method of Bric::Util::Event. [David]</p>

</li>
<li><p>Added diff support to the UI to see changes between versions of templates, stories, and media documents. [David]</p>

</li>
<li><p>Added JavaScript-powered Find/Replace dialog box to Bulk Edit in the element profile and to the template profile. The &quot;Replace All&quot; function should work very well everywhere, while the &quot;Find&quot; function relies on IE- and Mozilla-specific features to properly highlight found text in the textarea box searched. Other browsers will get an alert indicating at what character the match was found. [David]</p>

</li>
<li><p>Added new &quot;Code Select&quot; custom field allows you to add arbitrary Perl code to generate the items in a select list. This is great for dynamically pulling in choices from another database, LDAP directory, or anything else you can get at from Perl code. [Scott]</p>

</li>
<li><p>Added ability to shelve a story from a desk or My Workspace. [David]</p>

</li>
<li><p>Added <code>reset()</code> method to <a rel="section" href="../../../2.0/api/Bric/Util/Job.html" name="Bric::Util::Job">Bric::Util::Job</a> and a &quot;Reset&quot; checkbox in the job profile in the UI so that failed jobs can easily be re-attempted. [David]</p>

</li>
<li><p>Added &quot;Cheat Sheet&quot; dialog box to Bulk Edit that displays the entire hierarchy of available subelements and fields as the pseudo-pod &quot;tags&quot; available for use in bulk editing content. [David]</p>

</li>
</ul>

<h2 id="Improvements17">Improvements</h2>

<ul>

<li><p>Added <code>related_story_id</code> and <code>related_media_id</code> parameters to the <code>list()</code> method of the story and media classes to search for stories and media that have a given story or media ID or list of IDs as relateds. Based on a patch from Rod Taylor. [David]</p>

</li>
<li><p>Moved story, media, and template notes into a column in the appropriate instance table, instead using attributes, and then removed the story, media, and template attribute objects. This is a much more efficient use of the database and eliminates a lot of cruft. [David]</p>

</li>
<li><p>Added <code>has_notes()</code> method to <a rel="section" href="../../../2.0/api/Bric/Biz/Asset.html" name="Bric::Biz::Asset">Bric::Biz::Asset</a> (and therefore its story, media, and template subclasses) as a more efficient way of determining whether an asset has notes for any of its versions than calling the <code>get_notes()</code> method. [David]</p>

</li>
<li><p>Added <code>note</code> parameter to the <code>list()</code> method of the story, media, and template classes. Unlike most of the parameters, this one will return assets with <code>any</code> of their versions having a note matching the <code>note</code> parameter. [David]</p>

</li>
<li><p>Updated search documentation and wrote tests for:</p>

<dl>

<dt><a rel="section" href="../../../2.0/api/Bric/Dist/ActionType.html" name="Bric::Dist::ActionType">Bric::Dist::ActionType</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/Alert.html" name="Bric::Util::Alert">Bric::Util::Alert</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/Alerted.html" name="Bric::Util::Alerted">Bric::Util::Alerted</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/AlertType/Parts/Rule.html" name="Bric::Util::AlertType::Parts::Rule">Bric::Util::AlertType::Parts::Rule</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/Event.html" name="Bric::Util::Event">Bric::Util::Event</a></dt>
<dd>

</dd>
</dl>

<p>[David]</p>

</li>
<li><p>The new &quot;Repreview&quot; iframe now works for the links in subelements, too. [David]</p>

</li>
<li><p>Category and story URIs now all end in a slash. This is so that they all behave consistently with root categories and home page URIs, and so that they properly indicate directories. Note that this does not apply if the <code>STORY_URI_WITH_FILENAME</code> <i>bricolage.conf</i> directive has been enabled. <b>Note to Templaters:</b> You may need to modify your templates to take into account that story and category URIS now end in a slash, if you were appending a slash in your templates or searching on category URIs for related stories. [David]</p>

</li>
<li><p>Now require Perl 5.8.0 or newer. Realistically it should only be 5.8.3 or newer. [David]</p>

</li>
<li><p>Added support for searching on UUIDs to the story and media classes. [David]</p>

</li>
<li><p>Added support for searching on URIs in the story class and modified the same parameter in the media class to search <i>all</i> possible URIs for media, not just the URI associated with the primary output channel. [David]</p>

</li>
<li><p>The select list of fields and subelements that can be added to an element now lists all of the fields and subelements in alphabetical order. [David]</p>

</li>
<li><p>Improved JavaScript word and character counts in Bulk Edit so that they&#39;re actually accurate, including when POD tags are present. [David]</p>

</li>
<li><p>The word and character counts in Bulk Edit are now kept up-to-date as you type. [David]</p>

</li>
<li><p>Added the current element object to exception object in <code>throw_burn_error</code> and, by extension the burner <code>throw_error()</code> method. Now a kind of breadcrumb trail will illustrate where in the element hierarchy of a story a burn error was thrown. (Note: this only works for exceptions thrown by <code>throw_burn_error</code>.) [Scott]</p>

</li>
<li><p>Fixed the <code>get_data()</code> and <code>get_container()</code> element methods so that, in list context, they return <code>undef</code> instead of an empty list when there is no corresponding field or element. This will be especially useful in templates, where it will prevent errors such as Mason&#39;s, &quot;Odd number of parameters passed to component expecting name/value pairs.&quot; [David]</p>

</li>
<li><p>Renamed the <code>related_instance_id</code> attribute of elements to <code>related_story_id</code>, for parity with <code>related_media_id</code>--not to mention the <code>get_related_story()</code> method. The <code>get_related_instance_id()</code> and <code>set_related_instance_id()</code> accessor methods remain in place for purposes of backwards compatibility. [David]</p>

</li>
<li><p>Renamed &quot;Element&quot; to &quot;Element Type&quot; and &quot;Element Type&quot; to &quot;Element Type Set&quot;. This is to avoid confusing element types, which define the structure of elements, and elements, which are contain content and are based on element types. These are not ideal names, but at least we now have something different to call them. The old <code>get_element()</code> method and the accessors that get and set <code>element_id</code> or <code>element__id</code> have also been renamed to <code>get_element_type()</code> and to access <code>element_type_id</code>. [David]</p>

</li>
<li><p>Changed the attributes and objects that refer to the Bric::Biz::ElementType::Parts::FieldType object in Bric::Biz::Asset::Parts::Tile::Data from <code>element_data_id</code> and <code>get_element_data()</code> to <code>field_type_id</code> and <code>get_field_type()</code>. [David]</p>

</li>
<li><p>Made the scroll bar &quot;sticky&quot; in the Story Profile, so that when you save a story, the reload will scroll back to the same spot in the story profile where you left odff. [Scott]</p>

</li>
<li><p>Added a &quot;dialog box&quot; widget for generating JavaScript-driven dialog boxes. The buttons are nicely styled to match the Bricolage UI, and can be configured to trigger JavaScript functions. Dialog boxes can also be dragged around the browser window by grabbing their title bars. Used by the new Find/Replace and Bulk Edit Cheat Sheet features, but will likely be used in other contexts in the future. [David]</p>

</li>
<li><p>Normalized story and media elements and fields so that they no longer store copies of their names, key names, and descriptions--and, in the case of fields, the autopopulated and sql_type attributes--since these are actually element type and field type attributes easily referenced in the element type and field type tables. This change significantly reduces the size of the database and has the potential to increase performance when getting and setting field values, especially during publishes. [David]</p>

</li>
<li><p>Major refactoring of the field types class, <a rel="section" href="../../../2.0/api/Bric/Biz/ElementType/Parts/FieldType.html" name="Bric::Biz::ElementType::Parts::FieldType">Bric::Biz::ElementType::Parts::FieldType</a>. Attributes that describe how fields should be displayed are no longer stored in a separate attribute object, but as true attributes of field type objects. This makes them much more efficient in terms of database access. [David]</p>

</li>
<li><p>Added fuller management of field types in the Element Type Manager, such as supporting the setting of a default value in a checkbox field in the field profile. [David]</p>

</li>
<li><p>Added much more fine-grained field type management to the Element Type SOAP interface. More field attributes can now be updated via SOAP. For example, one can now change the widget type from &quot;text&quot; to &quot;textarea&quot;. These improvements are thanks to the normalization of the element type and field type classes. Note that there are a number of new XML elements, and some of the existing ones have changed names, but we have tried to preserve backwards compatibility as much as possible. [David]</p>

</li>
<li><p>Added many new tests for the element type, field type, and element classes. [David]</p>

</li>
<li><p>Renamed &quot;Element Data&quot; to &quot;Field Type&quot;. [David]</p>

</li>
<li><p>Renamed a number of tables and appropriate foreign key columns, indexes, constraints, and the like, to better reflect the names used for these things in general. The tables renamed are:</p>

<dl>

<dt>element to element_type</dt>
<dd>

</dd>
<dt>at_type to field_type</dt>
<dd>

</dd>
<dt>story_container_tile to story_element</dt>
<dd>

</dd>
<dt>story_data_tile to story_field</dt>
<dd>

</dd>
<dt>media_container_tile to media_element</dt>
<dd>

</dd>
<dt>media_data_tile to media_field</dt>
<dd>

</dd>
<dt>formatting to template</dt>
<dd>

</dd>
</dl>

<p>[David]</p>

</li>
<li><p>Fixed a bunch of inconsistently named foreign key indexes. [David]</p>

</li>
<li><p>Renamed the Element and Element Type classes as follows:</p>

<ul>

</li>
<li><p>Bric::Biz::AssetType is now <a rel="section" href="../../../2.0/api/Bric/Biz/ElementType.html" name="Bric::Biz::ElementType">Bric::Biz::ElementType</a>.</p>

</li>
<li><p>Bric::Biz::AssetType::Parts::Data is now <a rel="section" href="../../../2.0/api/Bric/Biz/ElementType/Parts/FieldType.html" name="Bric::Biz::ElementType::Parts::FieldType">Bric::Biz::ElementType::Parts::FieldType</a>.</p>

</li>
<li><p>Bric::Biz::Asset::Business::Parts::Tile is now <a rel="section" href="../../../2.0/api/Bric/Biz/Element.html" name="Bric::Biz::Element">Bric::Biz::Element</a>.</p>

</li>
<li><p>Bric::Biz::Asset::Business::Parts::Tile::Container is now <a rel="section" href="../../../2.0/api/Bric/Biz/Element/Container.html" name="Bric::Biz::Element::Container">Bric::Biz::Element::Container</a>.</p>

</li>
<li><p>Bric::Biz::Asset::Business::Parts::Tile::Data is now <a rel="section" href="../../../2.0/api/Bric/Biz/Element/Field.html" name="Bric::Biz::Element::Field">Bric::Biz::Element::Container</a>.</p>

</li>
</ul>

<p>They now properly reflect what they&#39;re called in the UI, in SOAP, and in the database. The old classes have been changed to simply inherit from the new classes, so as to maintain backwards compatibility. [David]</p>

<li><p>Changed various <code>get_data()</code>, <code>set_data()</code> <code>del_data()</code> and such methods to <code>get_field_types()</code>, <code>get_value()</code>, <code>set_value()</code>, <code>add_field_types()</code>, etc., to disambiguate fields from field types more consistently. These changes are to the interfaces of <a rel="section" href="../../../2.0/api/Bric/Biz/ElementType.html" name="Bric::Biz::ElementType">Bric::Biz::ElementType</a>, <a rel="section" href="../../../2.0/api/Bric/Biz/ElementType/Parts/FieldType.html" name="Bric::Biz::ElementType::Parts::FieldType">Bric::Biz::ElementType::Parts::FieldType</a>, and <a rel="section" href="../../../2.0/api/Bric/Biz/Element/Container.html" name="Bric::Biz::Element::Container">Bric::Biz::Element::Container</a>. The old methods are of course left in place for purposes of backwards compatibility. [David]</p>

</li>
<li><p>Added <code>get_values()</code> and <code>set_values()</code> methods to the field class (<a rel="section" href="../../../2.0/api/Bric/Biz/Element/Field.html" name="Bric::Biz::Element::Field">Bric::Biz::Element::Field</a>) to make getting and setting multivalue fields easier and more centralized. [David]</p>

</li>
<li><p>Removed the unused and meaningless <code>referenced</code> attribute from <a rel="section" href="../../../2.0/api/Bric/Biz/ElementType.html" name="Bric::Biz::ElementType">Bric::Biz::ElementType</a>. [David]</p>

</li>
<li><p>Removed the unused and meaningless <code>publishable</code> and <code>map_type_id</code> attributes from <a rel="section" href="../../../2.0/api/Bric/Biz/ElementType/Parts/FieldType.html" name="Bric::Biz::ElementType::Parts::FieldType">Bric::Biz::ElementType::Parts::FieldType</a>. [David]</p>

</li>
<li><p>Turned Bric::Biz::ATType into an appendix: something that&#39;s there, and may have served a purpose in the past, but isn&#39;t needed now. All of its attributes have been moved to <a rel="section" href="../../../2.0/api/Bric/Biz/ElementType.html" name="Bric::Biz::ElementType">Bric::Biz::ElementType</a>, and you should still be able to get the ATType object from existing elements, but new elements won&#39;t need it anymore. It has been removed from the UI, but the SOAP interface and the class itself remain for now. Bric::Biz::ATType will be completely removed in a future version of Bricolage. [David]</p>

</li>
<li><p>The Element Type profile no longer displays the &quot;Sites&quot; section if there is only one site, and no longer displays the output channel section if there is only one output channel. [David]</p>

</li>
<li><p>Renamed Bric::SOAP::ElementType to Bric::SOAP::ATType, Bric::SOAP::Element to <a href="Bric:SOAP::ElementType">Bric:SOAP::ElementType</a>, and Bric::App::Callback::Profile::ElementData to <a href="http://search.cpan.org/perldoc?Bric::App::Callback::Profile::FieldType">Bric::App::Callback::Profile::FieldType</a>. [David]</p>

</li>
<li><p>Added support for typical Windows character encodings. This means that users can select &quot;Windows Western (CP1252)&quot; as their encoding in order to fix gremlin characters pasted from Microsoft Word. [David]</p>

</li>
<li><p>It is now fatal to submit characters in an invalid encoding. For example, if a user is using UTF-8 (the default) but pastes the contents of a Word document with an m-dash (a CP1252 character), Bricolage will now throw an exception. It probably threw an exception from the database in the past, but now we&#39;re throwing one earlier. The solution for such a user is to of course select the proper encoding in their &quot;Character Set&quot; preference. [David]</p>

</li>
<li><p>New categories now inherit all group memberships and permissions granted to access assets in the category from their parent categories. This makes it far easier for users with CREATE permission to categories to create new categories without having to then edit group memberships and user group permissions to make them the same as the parent&#39;s permission, which is what is usually wanted. Of course, existing categories are unaffected, and if user needs different group memberships or permissions than the parent, she will still have to edit them. [David]</p>

</li>
<li><p><i>bric_republish</i> now uses the <code>published_version</code> Bric::SOAP::Workflow parameter to always republish the last version of a story to be published. This means that even if a story is checked out, it can be republished without interfering with the checkout.</p>

</li>
<li><p>The User and Contributor managers in the UI now use the List Name Format preference to display the whole names for users and contributors. This allows users to easily see whatever name parts they need by simply changing their List Name Format preferences. [David]</p>

</li>
<li><p>Alert emails now use an email address, if one can be found, for the user who triggered the alert event for the From header in the alert email. The <code>ALERT_FROM</code> <i>bricolage.conf</i> directive is still used as the fallback. [David]</p>

</li>
<li><p>The <code>pre_path</code> and <code>post_path</code> attributes of output channels have been eliminated, since they can now be used directly in the URI formats. [David]</p>

</li>
<li><p>The admin tools are now listed in alphabetical order in the side navigation of the UI. [David]</p>

</li>
<li><p>Added <code>get_primary_category()</code> alias for <code>get_category()</code> in the media document class so as to make it more like the story class, thus making dispatch simpler. [David]</p>

</li>
<li><p>Users creating media documents from within a related media element (because the <code>RELATED_MEDIA_UPLOAD</code> <i>bricolage.conf</i> directive has been enabled and they have the proper permissions) are now redirected to the &quot;New Media&quot; profile when the new file has been uploaded, so that the element type, category, cover date, priority, etc. can be changed. [David]</p>

</li>
<li><p>Story and media cover dates are now versioned. [David]</p>

</li>
<li><p>Output channels are now associated with burners and can only include other output channels associated with the same burners. Element types are no longer associated with burners at all. [David]</p>

</li>
<li><p>Renamed Bric::Biz::Asset::Formatting to <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Template.html" name="Bric::Biz::Asset::Template">Bric::Biz::Asset::Template</a>. [David]</p>

</li>
<li><p>Added the <code>TT_OPTIONS</code> <i>bricolage.conf</i> directive to allow Bricolage administrators to pass template toolkit directive options to the Template object when it is instantiated by the Template Toolkit burner. [David]</p>

</li>
<li><p>Added the <code>COMPILE_EXT</code> option to the instantiation of the Template Toolkit object in the Template Toolkit burner. This will cache compiled versions of the templates so that they do not have to be parsed and compiled every time a story is published. This should make the TT burner substantially faster. [David]</p>

</li>
<li><p>Publish and distribution jobs are now tied to a specific version of a story or media document, rather than the media document itself. This will allow a whole series of publishes for versions of a document to be scheduled for execution over time, as well as help to protect currently checked-out documents from being mysteriously removed from workflow by scheduled publishes being executed. Sponsored by Freerun Technologies. [David]</p>

</li>
<li><p>Searches now are remembered for each manager in the UI for as long as a session lasts. So if you perform a search for element types, and then do a search for stories or output channels, the last results you saw in the element type manager will be there again when you return to it. [David]</p>

</li>
<li><p>Eliminated need for HTTP::BrowserDetect, since the UI is now completely browser-neutral. [David]</p>

</li>
<li><p>Media files can now be uploaded in the New Media profile. [David]</p>

</li>
<li><p>Added events for adding subelement element types to element types. [David]</p>

</li>
<li><p>Any symbols exported by <code>PERL_LOADER</code> code, plus those exported by <code>Bric::Util::DBI qw(:junction)</code>, are now imported into the Template Toolkit stash for direct use in Template Toolkit templates, and into the PHP global context for direct use in PHP templates. For example, the <code>ANY</code> function can now be used directly in TT templates and as <code>$ANY()</code> in PHP templates. The burner constants <code>PUBLISH_MODE</code> and <code>PREVIEW_MODE</code> can also be used <code>$PUBLISH_MODE()</code> and <code>$PREVIEW_MODE()</code> in PHP) if the default <code>PERL_LOADER</code> in <i>bricolage.conf</i> is left in place. But TT can&#39;t have multiple symbols with the same names, so for each symbol exported, it adds to the stash the first one it finds in this order: CODE, HASH, ARRAY, IO, GLOB, FORMAT, and SCALAR. Use of imported functions in PHP templates requires PHP::Interpreter 1.1.0 or later. [David]</p>

</li>
<li><p>The story, burner, element, and content variables are now globals in PHP templates, rather than each being stored in a global $BRIC associative array, which is now gone. This brings the style of PHP templates more in line with that of Mason and Template Toolkit templates. [David]</p>

</li>
</ul>

<h1 id="Version-1.9.0-Punkin-2005-08-19-">Version 1.9.0 &quot;Punkin&quot; (2005-08-19)</h1>

<h2 id="New-Features5">New Features</h2>

<ul>

<li><p>Added <code>MASON_INTERP_ARGS</code> <i>bricolage.conf</i> directive to allow arguments to be passed to the Mason template interpreter. [Scott]</p>

</li>
<li><p>Added support for sub-second precision to date and time management in Bricolage. This means that dates can be stored in the database with microsecond precision. This was done by modifying Bricolage&#39;s date and time handling to use the DateTime module from CPAN under the hood. The upshot is that you can use the full suite of <code>strftime</code> formats supported by DateTime, including the formats for milliseconds and microseconds. Sponsored by Alinghi. [David]</p>

</li>
<li><p>Added new &quot;Precision&quot; option to DateTime fields added to elements and contributor types. The supported precisions are &quot;Year&quot;, &quot;Month&quot;, &quot;Day&quot;, &quot;Hour&quot;, &quot;Minute&quot;, &quot;Second&quot;, &quot;Millisecond&quot;, and &quot;Microsecond&quot;. For purposes of backwards compatibility, the default precision for custom DateTime fields is &quot;Minute&quot;. Sponsored by Alinghi. [David]</p>

</li>
<li><p>Added <code>preview_another_all_ocs()</code> and <code>blaze_another()</code> to Bric::Util::Burner. The former executes a preview for all of the output channels a document is associated with. The latter takes a document for its argument and calls <code>publish_another()</code> in PUBLISH_MODE and <code>preview_another_all_ocs()</code> in PREVIEW_MODE. [Serge Sozonoff]</p>

</li>
<li><p>Added <code>$INSTALL_VERBOSITY</code> makefile environment variable that, when set to &quot;QUIET&quot;, eliminates many of the questions asked during installation and cloning, falling back on the default values. [Rod Taylor &amp; Andrea Rota]</p>

</li>
<li><p>Added <code>$USE_DEFAULTS</code> makefile environment variable that, when used with <code>$INSTALL_VERBOSITY</code>, will use platform-specific answers to all of the installation questions. This allows for completely silent, customizable installations, which are necessary for packagers. [Marshall]</p>

</li>
<li><p>Added <code>make dev</code> makefile target for installing a development version straight out of a Subversion checkout. It performs a standard installation, then symlinks bin/, comp/ and lib/ back to the Subversion checkout. [Marshall]</p>

</li>
<li><p>Added <code>RELATED_MEDIA_UPLOAD</code> <i>bricolage.conf</i> directive that allows editors to upload media files directly into an element profile if they have permission to create media and to access a media workflow. This makes it a much simpler process for editors to quickly associate media with story documents. The uploaded media files will be created based on the media type element selected from a select list, and given the same category, cover date, and priority as the current document. Enabled by default. [Jo&atilde;o Pedro and David]</p>

</li>
<li><p>Added the element type and output channel modules to the SOAP interface. [Scott]</p>

</li>
<li><p>Added the <code>ENABLE_GZIP</code> <i>bricolage.conf</i> directive to turn on compression of the UI pages through <code>mod_gzip</code>. This results in pages as much as fifteen times smaller, with minimal extra server load. If <code>mod_gzip</code> is found during installation, the appropriate <code>LoadModule/AddModule</code> lines will be added to <i>httpd.conf</i>. Disabled by default. Suggested by Rod Taylor. [Marshall]</p>

</li>
<li><p>Added &quot;Show Alpha Search&quot; preference that determines whether the alpha search (&quot;A | B | C | ... [All]&quot;) links should be shown. The alpha search isn&#39;t very useful because you can type the first letter in the textbox (or &quot;%&quot; for &quot;All&quot;) for the same results, and it supports only the ASCII alphabet. Alpha search is now off by default. [Marshall]</p>

</li>
<li><p>Added <code>MEDIA_UNIQUE_FILENAME</code> <i>bricolage.conf</i> directive to allow the file name of media documents to be set to a unique, automatically generated file name on upload, (off by default). Also added the <code>MEDIA_FILENAME_PREFIX</code> directive for setting a prefix word, such as &quot;media&quot;, to be prepended to the file name if desired (off by default). [Paul Orrock / Digital Craftsmen]</p>

</li>
<li><p>Added support for the <code>ANY()</code> function to pass multiple possible values for a given parameter to the <code>list()</code>, <code>list_ids()</code>, and, where pertinent, <code>href()</code> methods in the following classes:</p>

<dl>

<dt><a rel="section" href="../../../2.0/api/Bric/Biz/ATType.html" name="Bric::Biz::ATType">Bric::Biz::ATType</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/AssetType.html" name="Bric::Biz::AssetType">Bric::Biz::AssetType</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/AssetType/Parts/Data.html" name="Bric::Biz::AssetType::Parts::Data">Bric::Biz::AssetType::Parts::Data</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/Category.html" name="Bric::Biz::Category">Bric::Biz::Category</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/Contact.html" name="Bric::Biz::Contact">Bric::Biz::Contact</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/Keyword.html" name="Bric::Biz::Keyword">Bric::Biz::Keyword</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/Org.html" name="Bric::Biz::Org">Bric::Biz::Org</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/Org/Parts/Addr.html" name="Bric::Biz::Org::Parts::Addr">Bric::Biz::Org::Parts::Addr</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/Org/Person.html" name="Bric::Biz::Org::Person">Bric::Biz::Org::Person</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/Org/Source.html" name="Bric::Biz::Org::Source">Bric::Biz::Org::Source</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/OutputChannel.html" name="Bric::Biz::OutputChannel">Bric::Biz::OutputChannel</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/OutputChannel/Element.html" name="Bric::Biz::OutputChannel::Element">Bric::Biz::OutputChannel::Element</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/Person.html" name="Bric::Biz::Person">Bric::Biz::Person</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/Person/User.html" name="Bric::Biz::Person::User">Bric::Biz::Person::User</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/Site.html" name="Bric::Biz::Site">Bric::Biz::Site</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/Workflow.html" name="Bric::Biz::Workflow">Bric::Biz::Workflow</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/Workflow/Parts/Desk.html" name="Bric::Biz::Workflow::Parts::Desk">Bric::Biz::Workflow::Parts::Desk</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Util/Grp.html" name="Bric::Util::Grp">Bric::Util::Grp</a></dt>
<dd>

</dd>
</dl>

<p>More classes will support it soon! [David]</p>

</li>
<li><p>Added support for associating secondary categories and output channels when cloning a story. Sponsored by Alinghi. [David]</p>

</li>
<li><p>Added support for adding secondary output channels to a new clone by selecting a group of output channels. All output channels in that group that are allowed by the story element will be associated with the clone. This is an easy and accurate way to add a bunch of output channels to a clone at once. Users must have READ access to each listed output channel group. Sponsored by Alinghi. [David]</p>

</li>
<li><p>Added <code>MEDIA_UPLOAD_LIMIT</code> <i>bricolage.conf</i> directive for setting a size limit on uploaded media files. [Scott]</p>

</li>
<li><p>The URI formats are now more flexible. You can now use many more parts of the cover date in the URI, and in whatever format you like. So you could have a format of &quot;/%{categories}/%Y-%m-%d/&quot; and end up with the URI &quot;/foo/bar/2004-09-22/&quot; if you wanted. Or even &quot;/%{categories}/%Y/%V/&quot; to get the week number as part of the URI. You can also include your own text, similar to the URI Prefix and URI Suffix fields, anywhere in the URI (e.g. foobar in &quot;/%{categories}/%Y/%m/foobar/%{slug}/&quot;. Suggested by David. [Marshall]</p>

</li>
<li><p>Added a frame on top of the preview window with a &quot;Repreview&quot; link. This is useful for previewing changes when you&#39;re developing templates. Rather than having to save the template, go back to the workspace, repreview, and then go back to the template profile, you can preview the story, then edit the template and click &quot;Repreview&quot; as necessary after each save. [Marshall]</p>

</li>
<li><p>Added a pluggable authentication system. New authentication engines can be created by simply implementing a module named <code>Bric::Util::Auth*</code>, where &quot;*&quot; is the name of the authentication scheme. The new scheme can then be used by adding it to the new <code>AUTH_ENGINES</code> <i>bricolage.conf</i> directive. By default only the existing authentication scheme is used. Sponsored by Kineticode. [David]</p>

</li>
<li><p>Added support for authentication to Bricolage against an LDAP server. The new <code>LDAP_*</code> <i>bricolage.conf</i> directives make it simple to configure Bricolage to authenticate against any LDAP server. Includes support for authenticating users only if they are members of a specific user group in the LDAP database. Users must still exist in Bricolage, however. Sponsored by Kineticode. [David]</p>

</li>
<li><p>Added support for multiple WYSIWYG editors. The <code>ENABLE_HTMLAREA</code> <i>bricolage.conf</i> directive has been replaced by the <code>ENABLE_WYSIWYG</code> and <code>WYSIWYG_EDITOR</code> directives. You can now choose between htmlArea 3 and the new Xinha, a more active fork of htmlArea (recommended). More editors possibly coming soon. See <a rel="section" href="../../../2.0/api/Bric/Admin.html" name="Bric::Admin">Bric::Admin</a> for details. [Marshall]</p>

</li>
<li><p>Added <code>AUTO_PREVIEW_MEDIA</code> <i>bricolage.conf</i> directive. Enabling this directive allows media files uploaded to a media document to be distributed to all relevant preview servers as soon as the media document is saved. Sponsored by Alinghi. [David]</p>

</li>
<li><p>Added a PHP burner. Implemented by George Schlossnagle of Omni TI consulting. Sponsored by PT.com. [George Schlossnagle]</p>

</li>
<li><p>Added UUIDs to story and media documents. A UUID is a universally unique identifier. The format for UUIDs has been described in RFC 4122, ITU-T Rec. X.667 and ISO/IEC 11578:1996. In Bricolage, they are generated by <a href="http://search.cpan.org/perldoc?Data::UUID">Data::UUID</a>.</p>

</li>
</ul>

<h2 id="Improvements18">Improvements</h2>

<ul>

<li><p>Creating a template that was deactivated now reactivates it instead of just giving an error message. [Scott]</p>

</li>
<li><p>The &quot;User Override&quot; screen has been integrated into the &quot;Users&quot; screen since the two pages are mostly redundant except for a few links. [Marshall]</p>

</li>
<li><p>User overrides are now recorded in the event log. Suggested by David. [Marshall]</p>

</li>
<li><p>The UI now shows which user is logged in and includes a link to the user&#39;s profile at the top of each page, above the log out button. Suggested by Philip Brown. [Marshall]</p>

</li>
<li><p>All of the old &quot;NUMERIC&quot; columns have been removed from the database and replaced with the more appropriate (and faster) &quot;INTEGER&quot;, &quot;SMALLINT&quot;, and &quot;BOOLEAN&quot; data types. [Neil Conway &amp; David]</p>

</li>
<li><p>Added <code>exclude_id</code> parameter to the <code>list()</code> methods of the story, media, and template classes. This parameter can be used to exclude one or more asset IDs from the list of objects returned by the call to <code>list()</code> and friends. Suggested by Curtis Poe. [David]</p>

</li>
<li><p>The <code>get_desk_stamps()</code> method in the asset classes has been removed (it was deprecated in Bricolage 1.8.4). The same goes for the <code>required_satisfied()</code> method in Bric::Biz::Workflow. Thanks to Marshall Roch for the spot! [David]</p>

</li>
<li><p>Users now must have at least READ permission to sources to add them to stories. If upgrading from an earlier version of Bricolage, for purposes of backward compatibility, members of the &quot;All Users&quot; group (that is to say, all users) will be granted READ access to all sources. Change this permission to limit access as appropriate. For new installations of Bricolage, the default &quot;Story Editors&quot; and &quot;User Producers&quot; groups have READ permission to all sources. Suggested by Simon Wilcox. [David]</p>

</li>
<li><p>There is now a &quot;Preserve Template&quot; (disabled by default) option in Bulk Edit that retains leading spaces, trailing spaces, and line breaks. With this option set, you can, for example, paste in poetry without it all ending up on one line. [Marshall]</p>

</li>
<li><p>URI formats now require that the categories be a part of the format. [David]</p>

</li>
<li><p>When using the command line tools, you can now opt to be prompted for your password rather than entering it on the command line, which would store your plain text password in the shell history. [Marshall]</p>

</li>
<li><p>Added tests for the burners. This was important for thoroughly testing the new PHP burner, but it will keep the other burners functioning well from here on in, as well. [David]</p>

</li>
<li><p>Moved the <code>burn_again</code> attribute from Bric::Util::Burner::Mason to Bric::Util::Burner, since it could be useful to other burners, and since Bric::Util::Burner had knowledge of it, anyway. [David]</p>

</li>
<li><p>The HTML::Template burner now sets parameters for all attributes of a story as returned by the <code>my_meths()</code> method of the story class, rather than just the story title. So, for example, you can now use &lt;tmpl_var primary_uri&gt; or &lt;tmpl_var cover_date&gt; with out creating a <i>.pl</i> template to set them up. [David]</p>

</li>
<li><p>Refactored the separate <code>_add_resource()</code> methods in each of the burner subclasses int Bric::Util::Burner itself. [David]</p>

</li>
<li><p>Arguments can now be passed to the <code>display_element()</code> method of the Template Toolkit burner and they will be set up as variables in the stash of the execution context of the element template.</p>

</li>
<li><p>Category templates in the HTML::Template burner now cascade just like in all the other burners, rather than stopping at the first category template found in the category URI. Users of HTML::Template templates should take note of this if they have more than one category template in their category URIs. [David]</p>

</li>
<li><p>The HTML::Template burner now has access to both the related story and the related media URIs via the <code>rel_story_uri</code> and <code>rel_media_uri</code> variables. The old <code>link</code> variable has been deprecated, since it cannot handle an element that has both a related media and a related story. [David]</p>

</li>
<li><p>Major interface clean-up. The UI is finally mostly valid XHTML and uses CSS for all styles. The <code>USE_XHTML</code> directive, added in 1.7.0, is no longer used. The file sizes of some pages have been reduced by as much as 70%, offering improved page load times. Also, it will now be much easier to customize colors, etc. by customizing the CSS stylesheet. [Marshall]</p>

</li>
<li><p>The desks/My Workspace have been slightly modified to be more usable. Most notably, the &quot;View&quot; and &quot;Edit&quot; links (depending on checkout status) have been moved to the asset&#39;s title, where the preview link formerly was, the &quot;Category&quot; line has been replaced with &quot;Primary URI&quot;, and the URI itself is the preview link. Also, the &quot;Site&quot; line now only shows up when there is more than one site. [Marshall]</p>

</li>
<li><p>Added <code>MASON_STATIC_SOURCE</code> <i>bricolage.conf</i> directive to enable static sources in the Mason-powered UI. Enabling this directive can eliminate many file system stats on every request, thus increasing performance. It&#39;s disabled by default, but you should turn it on now! [David]</p>

</li>
<li><p>Changed the names of the attributes in Bric::Biz::AssetType and Bric::Biz::AssetType::Parts::Data that have double underscores to have only single underscores. The double underscores are still supported for the sake of backwards compatibility, but are no longer required. [David]</p>

</li>
<li><p>Updated search documentation and wrote tests for:</p>

<dl>

<dt><a rel="section" href="../../../2.0/api/Bric/Biz/Contact.html" name="Bric::Biz::Contact">Bric::Biz::Contact</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/AssetType/Parts/Data.html" name="Bric::Biz::AssetType::Parts::Data">Bric::Biz::AssetType::Parts::Data</a></dt>
<dd>

</dd>
<dt><a rel="section" href="../../../2.0/api/Bric/Biz/Org/Parts/Addr.html" name="Bric::Biz::Org::Parts::Addr">Bric::Biz::Org::Parts::Addr</a></dt>
<dd>

<p>[David]</p>

</dd>
</dl>

</li>
</ul>

<h1 id="Version-1.8.11-2006-06-19-">Version 1.8.11 (2006-06-19)</h1>

<h2 id="Improvements19">Improvements</h2>

<ul>

<li><p>The <code>throw_error()</code> burner method now accepts a list of arguments for an error message, rather than only a single argument. It will concatenate them all together so that you don&#39;t have to. [David]</p>

</li>
<li><p>Added check to require <code>Bric::Biz::Asset::Business-&gt;add_contributor</code>&#39;s first argument to be a <code>Bric::Util::Grp::Parts::Member::Contrib</code> if it&#39;s an object (it could also be an ID). [Scott]</p>

</li>
<li><p>Added <i>README.Ubuntu</i>. [Christian Muise]</p>

</li>
<li><p>Silenced warnings from <a href="http://search.cpan.org/perldoc?Net::SFTP">Net::SFTP</a> when distributing via SFTP. [David]</p>

</li>
<li><p>The metadata for related media now include preview links. The same goes for the metadata about a media document when editing a subelement of that media document in the media profile. [David]</p>

</li>
<li><p>The status message when a document is published now reports the site with which the document is associated, to help distinguish documents from their aliases in the status message. Reported by Marshall. [David]</p>

</li>
<li><p>Added <code>get_site()</code> to <a rel="section" href="../../../2.0/api/Bric/Biz/Asset.html" name="Bric::Biz::Asset">Bric::Biz::Asset</a>, and therefore to the story, media, and template classes. Suggested by Marshall. [David]</p>

</li>
<li><p>Added support for the the <code>oc_id</code> parameter to <a rel="section" href="../../../2.0/api/Bric/Dist/Resource.html" name="Bric::Dist::Resource">Bric::Dist::Resource</a> to simplify looking up stale story and media files for expiration. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes16">Bug Fixes</h2>

<ul>

<li><p>My Workspace now remembers the sort order of assets just as well as desks do. [David]</p>

</li>
<li><p>Added more code to the <code>inst/upgrade/1.8.9/fix_publish_status.pl</code> upgrade script to better cover the possible variations in publish status inaccuracies. [Brad Fox, Brad Harder, &amp; David]</p>

</li>
<li><p>Distribution via any mover other than &quot;File System&quot; now correctly strips off port numbers from the host name. This is most useful when using FTP, SFTP, or WebDAV to distribute to a preview server serving content from an alternate port. Reported by Doug Dawson. [David]</p>

</li>
<li><p>If run as root, <code>make clone</code> now becomes the PostgreSQL system user before cloning the database, so that it should work properly where PostgreSQL is configured to use &quot;ident&quot; authentication. [David]</p>

</li>
<li><p>The list of desks that appear for a given workflow in the navigation iframe are now properly updated when a new desk is added to the workflow. [Alexey Dvoychenkov]</p>

</li>
<li><p>The side navigation no longer shows the &quot;New Alias&quot; links to users who don&#39;t have the proper permissions (CREATE on the start desk). (bug 1203) [Marshall]</p>

</li>
<li><p>The code of a template no longer disappears when you click &quot;Trail&quot; in the Template Profile. (bug 1204) [Marshall]</p>

</li>
<li><p><i>bric_soap</i> is now more intelligent about parsing IDs from XML elements with either single or double quotes, and from multiple tags. [Christian Niles and David]</p>

</li>
<li><p>Failing to fill in either the &quot;To&quot; or &quot;Bcc&quot; fields of an Email distribution action no longer throws you back a screen, but stays in the Email action profile. Reported by Scott. [David]</p>

</li>
<li><p>Fixed media publishing so that when a media document is published to more than one output channel, <i>and</i> there are differences in the URIs for that media document between the output channels, that they won&#39;t trigger the expiration of each other&#39;s files. Reported by Rod Taylor. [David]</p>

</li>
<li><p>Fixed bug where users granted CREATE permission were unexpectedly allowed to PUBLISH items on the Publish Desk. [Christian Niles]</p>

</li>
<li><p><i>bric_queued</i> now works with all burners, not just the Mason burner. Reported by Christian Niles. [Scott]</p>

</li>
<li><p>A required field deleted from an element definition will now be deletable in the stories and media in which it appears, instead of remaining required. [Rod Taylor]</p>

</li>
<li><p>Adding a new source to a group when you create it no longer causes an error. Thanks to Alex Howarth for the spot! [David]</p>

</li>
<li><p>Changing an asset note and then going back to the notes screen before saving the asset now properly shows the changed note instead of the old note. Reported by Phillip Smith. [David]</p>

</li>
<li><p>New categories created via the SOAP interface with underscores in their URIs no longer end up with backslashes in the URIs. Reported by Ashlee Caul. [David]</p>

</li>
<li><p>Users attempting to access the &quot;New Alias&quot; link without permission to create an alias will now be told so, instead of getting an error. Reported by Marshall. [David]</p>

</li>
<li><p>Status messages now properly appear after saving or deleting a contributor type. Reported by Marshall. [David]</p>

</li>
<li><p>The <code>get_attr_hash()</code> method of <a rel="section" href="../../../2.0/api/Bric/Util/Attribute.html" name="Bric::Util::Attribute">Bric::Util::Attribute</a> now excludes deleted attributes from its return value. [David]</p>

</li>
</ul>

<h1 id="Version-1.8.10-2006-03-16-">Version 1.8.10 (2006-03-16)</h1>

<h2 id="Improvements20">Improvements</h2>

<ul>

<li><p>Changed (hopefully optimized) the buffer size when reading in files on media upload. [Scott]</p>

</li>
<li><p>The installer no longer prompts for the PostgreSQL system username if the PostgreSQL server is not running on the local box. It therefore also no longer becomes that user in such cases. This will simplify installing Bricolage onto a remote PostgreSQL server. [David]</p>

</li>
<li><p>The Jobs manager now sorts pending jobs by scheduled time rather than name. [David]</p>

</li>
<li><p>Desks now remember the sort order you selected when you last visited them, for the duration of a single login to Bricolage. [David]</p>

</li>
<li><p>When adding contributors based on a type that allows multiple roles, you no longer have to select the role if the contributor has only one role. Suggested by Phillip Smith. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes17">Bug Fixes</h2>

<ul>

<li><p>Eliminated errors inserting array references fetched from image info while uploading and saving new image files. Reported by Michael Holden. Also documented extra methods not previously documented in <a rel="section" href="../../../2.0/api/Bric/App/MediaFunc.html" name="Bric::App::MediaFunc">Bric::App::MediaFunc</a>. [David]</p>

</li>
<li><p>Fixed typo in the final message after an upgrade completes. Reported by Nate Perry-Thistle. [David]</p>

</li>
<li><p>Fixed a 1.8.9 upgrade script that adds a foreign key constraint to the &quot;element_member&quot; table so that it properly tests for the foreign key constraint before it tries to add it. Reported by Wayne Slavin. [David]</p>

</li>
<li><p>Refined a few other upgrade scripts, with thanks to Rod Taylor. [David]</p>

</li>
<li><p><a rel="section" href="../../../2.0/api/Bric/Biz/Person/User.html" name="Bric::Biz::Person::User">Bric::Biz::Person::User</a> loads again under <i>bric_queued</i>. [David]</p>

</li>
<li><p>The thumbnail-generating code now tries even harder to determine the media type of a file, thus more likely supporting files that it might not have been able to support before. [Rod Taylor]</p>

</li>
<li><p><i>bric_republish</i> no longer reverses the meaning of its <code>--published-only</code> option. [David]</p>

</li>
<li><p>Publishing via SOAP works again. It was broken in 1.8.9, where it would appear to succeed, but no story or media would ever actually be distributed. [David]</p>

</li>
<li><p>Updated the Bricolage users list email address and archive link in <a rel="section" href="../../../2.0/api/Bric/Admin.html" name="Bric::Admin">Bric::Admin</a>/<i>INSTALL</i>. Reported by Michael Cummings [David]</p>

</li>
<li><p>Sort ordering on desks is no longer forgotten over multiple pages of assets on a desk. Thanks to Phillip Smith for the spot! [David]</p>

</li>
<li><p>Changed the title of the Trail page from &quot;Desk Stamps&quot; to &quot;Trail.&quot; Reported by Scott. [David]</p>

</li>
<li><p>It is now possible to look up stories, media, and templates by version IDs other than the current version ID. [David]</p>

</li>
</ul>

<h1 id="Version-1.8.9-2006-01-23-">Version 1.8.9 (2006-01-23)</h1>

<h2 id="Improvements21">Improvements</h2>

<ul>

<li><p>Added missing foreign key constraints and indexes on the <code>category_keyword</code>, <code>story_keyword</code>, <code>media_keyword</code>, <code>element_member</code>, and <code>media_contributor</code> tables. This should make keyword lookups, at least, much faster. [David]</p>

</li>
<li><p>When a story or media document is published with an expiration date earlier than the publish date, the UI will now properly report that the document has been &quot;expired&quot;, rather than &quot;published&quot;. Thanks to Simon Wilcox for the spot. [David]</p>

</li>
<li><p>The Bulk Publish interface in the UI now displays the name of the site alongside the category if there is more than one site, so as to disambiguate the list of categories. Reported by Marshall Roch. [David]</p>

</li>
<li><p>Added constraints to the story and media tables in the database to prevent the publish status from becoming out of sync with the publish date and first publish date. [David]</p>

</li>
<li><p>Changed code to show the first displayable data field of a subelement when viewing or editing an asset as opposed to only text fields. [Paul Orrock]</p>

</li>
<li><p><a rel="section" href="../../../2.0/api/Bric/SOAP/Workflow.html" name="Bric::SOAP::Workflow">Bric::SOAP::Workflow</a>&#39;s publish method now schedules a publish job instead of immediately publishing, thus allowing the <code>publish_date</code> parameter to actually work, and ensuring that the proper version is published. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes18">Bug Fixes</h2>

<ul>

<li><p>Fixed misnamed and/or missing keyword foreign keys on the <code>category_keyword</code>, <code>story_keyword</code>, and <code>media_keyword</code> tables. [David]</p>

</li>
<li><p>Documents created or updated via SOAP will now set the publish date to the same value as the first publish date if the latter is set and the former is not. [David]</p>

</li>
<li><p>The Burner <code>publish()</code> method now sets the publish date to the current date and time if it was not specified via an argument. This will hopefully fix instances of stories and media in the database with the <code>first_publish_date</code> set but not the <code>publish_date</code>. [David]</p>

</li>
<li><p>The version 1.8.8 upgrade script that moves media files around no longer fails when the media directory doesn&#39;t exist (because no media documents have been created). Reported by Wayne Slavin. [David]</p>

</li>
<li><p>Upgrades no longer fail if $BRICOLAGE_ROOT is not set and the instance of Bricolage to be upgraded is somewhere other than <i>/usr/local/bricolage</i>. Reported by Nate Perry-Thistle. [David]</p>

</li>
<li><p>Backported database upgrade permissions changes from Bricolage 1.10 so that the permissions are set for the super user for upgrade scripts such as <i>inst/upgrade/1.8.7/move_media.pl</i> and as the PostgreSQL user only when an upgrade script loads <i>inst/upgrade/lib/bric_upgrade.pm</i>. Thanks to Nate Perry-Thistle for reporting the permissions bug with the 1.8.7 upgrade script. [David]</p>

</li>
<li><p>Fixed file names for files uploaded by MSIE on Windows. Again. Reported by Wayne Slavin. [David]</p>

</li>
<li><p>Modified the <code>set_publish_status()</code> and <code>set_published_version()</code> methods of <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business.html" name="Bric::Biz::Asset::Business">Bric::Biz::Asset::Business</a> so that they each make sure that the other is set. This will hopefully prevent only one from being set. [David]</p>

</li>
<li><p>A media document that has a file uploaded to it before it is ever saved will no longer cause it to store the media file in a directory without an ID mapping it to the media document. This only affected installations where media were created by some method other than the Bricolage UI or SOAP. Reported by Rod Taylor. [David]</p>

</li>
<li><p>Story and Media on the search result page are now correctly sorted by the &quot;Default Asset Sort&quot; preference, or title if the preference is not set. [Paul Orrock]</p>

</li>
<li><p>Removed commented-out SQL that was appearing at the end of <i>inst/Pg.sql</i>. The comment style, <code>/* */</code>, caused problems with PostgreSQL 7.3 and earlier. Reported by Jerry Franz, with the underlying problem identified by &quot;aander07&quot;. [David]</p>

</li>
<li><p>Media file names are now URI-escaped for inclusion in the URIs returned by <code>get_uri()</code> and <code>get_primary_uri()</code>. Reported by Alexey Sheynuk. [David]</p>

</li>
<li><p>The burner now looks up existing resources (files) by both file system path and URI, instead of just the file system path, since the combination of the path and the URI are globally unique, not just the path. Reported by Paul Hyland. [David]</p>

</li>
<li><p>Publishing a document with a related document, where the related document is still at version 0 (because it has never been checked in), now properly displays a message indicating that the related document cannot be published because it is checked out. [David]</p>

</li>
<li><p>Removed testing code from the default <i>book_review.mc</i> template on the file system (not present in the template in the database) that was put in place before the release of 1.8.6. [David]</p>

</li>
<li><p>Eliminated an error in the permissions screen when a site with workflows has been deleted. Reported by Frank Febbraro. [David]</p>

</li>
<li><p>Fixed the &quot;help on event logs&quot; link in the Trail help page. Reported by Scott. [David]</p>

</li>
<li><p>If a desk or My Workspace does not have assets of a particular type (stories, media, or templates) on it, it will no longer display buttons for them. Reported by Scott. [David]</p>

</li>
<li><p>Fixed the sorting menus for templates on desks. Also fixed them for all assets on desks so that sorting on categories sorts by URIs (which are displayed) rather than names. Template sorting issues reported by Scott. [David]</p>

</li>
<li><p>Adding a variable to the message in an alert type now properly triggers the update of the message character count. Reported by Scott. [David]</p>

</li>
<li><p>Changed the media type for the files in the JavaScript directory from &quot;application/x-javascript&quot;, which Safari 2.03 didn&#39;t seem to like, to &quot;text/javascipt&quot;, which is what it should have been all along, anyway. [David]</p>

</li>
<li><p>Fixed sorting of SQL files for concatenation into <i>inst/Pg.sql</i> so that it should now always be in the right order, regardless of the local system&#39;s locale settings. This issue only applied to those running <code>make dist</code> or <code>make inst/Pg.sql</code>, since distributions already have <i>inst/Pg.sql</i>. [David]</p>

</li>
<li><p>URIs are now always constructed with the cover date reflecting the global Time Zone preference, rather than the setting from a user&#39;s overriding Time Zone preference. This prevents URI conflicts and makes searches for URIs with dates in them consistent. Reported by Li Li. [David]</p>

</li>
</ul>

<h1 id="Version-1.8.8-2005-10-27-">Version 1.8.8 (2005-10-27)</h1>

<h2 id="Bug-Fixes19">Bug Fixes</h2>

<ul>

<li><p>Fixed thumbnail URIs broken in 1.8.7. [David]</p>

</li>
<li><p>Fixed the &quot;media expire&quot; event. [David]</p>

</li>
<li><p>Media documents with more than one file version are no longer expired as soon as they&#39;re published. Reported by Wayne Slavin. [David]</p>

</li>
<li><p>Added upgrade script to adjust the file names of media files in the resource table in the database to be in sync with the new names on the file system introduced in 1.8.7. [David]</p>

</li>
</ul>

<p>##############################################################################</p>

<h1 id="Version-1.8.7-2005-10-24-">Version 1.8.7 (2005-10-24)</h1>

<h2 id="Improvements22">Improvements</h2>

<ul>

<li><p>The installer now prefers typical installation paths over those in the <code>$PATH</code> environment variable when searching for Apache and PostgreSQL installations. This is to favor servers installed manually over those included with the operating system. [David]</p>

</li>
<li><p>Added a partial index on the <code>comp_time</code> column of the job table so as to speed up lookups of jobs yet to be completed. This was originally in a 1.6.7 upgrade script, but never made it into the SQL for new installations. Suggested by Mark Jaroski. [David]</p>

</li>
<li><p>The Bulk Publish feature in the UI now only publishes the previously published versions of unexpired stories and media, rather than the latest version of expired and unexpired stories and media, thus avoiding errors when documents are checked out. [David]</p>

</li>
<li><p>If a story passed to the <code>publish_another()</code> or <code>preview_another()</code> burner methods is the same as the story currently being burned, it will no longer be published or previewed again by <code>publish_another()</code> or <code>preview_another()</code>, thus mitigating the possibility of infinite loops. [David]</p>

</li>
<li><p>Added an &quot;Expired&quot; event for when stories and media are expired. Suggested by Joshua Edelstein. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes20">Bug Fixes</h2>

<ul>

<li><p>The Template Toolkit and HTML::Template burners work again. [David]</p>

</li>
<li><p>Fixed syntax error in Bric::Util::Trans::SFTP. Reported by Kenneth Marshall. [David]</p>

</li>
<li><p>Eliminated &quot;Subroutine Bric::App::Handler::rethrow_exception redefined&quot; warning during startup with HTML::Mason 1.30. [David]</p>

</li>
<li><p>Fixed the <code>no_site_id</code> parameter to Bric::Biz::Asset::Formatting when specified using the <code>ANY()</code> function. [David]</p>

</li>
<li><p>Fixed an error in <i>comp/widgets/wrappers/sharky/header.mc</i> caused by having a custom field beginning with a leading underscore. [Scott]</p>

</li>
<li><p>Errors thrown when setting element field values will now be displayed as error messages within the context of the element profile, rather than throwing a fatal exception. This is useful for invalid dates, for example. [David]</p>

</li>
<li><p>The SOAP interface for categories now properly checks for and sets as appropriate the <code>active</code> attribute on categories being created or updated. Reported by Phillip Smith. [David]</p>

</li>
<li><p>Updated for compatibility with PostgreSQL 8.1. [David]</p>

</li>
<li><p>Defunct media files are now properly removed from the delivery server whenever a media document&#39;s file name has changed. Reported by Brad Fox. [David]</p>

</li>
<li><p>Clicking the &quot;Return&quot; button when viewing a subelement in a story or media document not checked out by the user no longer drops into edit view. Reported by John Greene. [David]</p>

</li>
<li><p>Attempting to create a category with the same URI as an existing but deactivated category once again fails with a useful error message rather than a database exception. Reported by Marshall. [David]</p>

</li>
<li><p>New elements and fields will now have any leading or trailing white space trimmed, rather than converted to underscores. Reported by Scott Lanning. [David]</p>

</li>
<li><p>Multiple select list custom fields no longer throw an exception when you select more than one value for the default value. Reported by Scott. [David]</p>

</li>
<li><p>In a story or media profile, deleting a subelement with the same ID as a field (or vice-versa) will no longer delete both. Reported by Scott Lanning. [David]</p>

</li>
</ul>

<h1 id="Version-1.8.6-2005-07-19-">Version 1.8.6 (2005-07-19)</h1>

<h2 id="Improvements23">Improvements</h2>

<ul>

<li><p>Added JavaScript code to validate that the username in the user profile does not have leading or trailing spaces. [David]</p>

</li>
<li><p>When started by the super user, <i>bric_queued</i> now runs as the same user as the Bricolage Apache server. This allows it to run as a user that isn&#39;t otherwise available as a login on the system (such as the typical &quot;nobody&quot; or &quot;www&quot; user). [David]</p>

</li>
<li><p>Added support for starting <i>bric_queued</i> in the Linux startup script in <i>contrib/start_scripts/</i>. [David]</p>

</li>
<li><p>The <code>get_related_story()</code> and get_related_media() methods of the element class now return <code>undef</code> in a list context when there is no related asset. [David]</p>

</li>
<li><p>Events in the event log are now returned (and displayed) in reverse chronological order. [David]</p>

</li>
<li><p>The SOAP server now uses a user&#39;s template sandbox when executing previews (such as with <code>bric_soap --to-preview workflow publish</code>). Reported by Marshall. [David]</p>

</li>
<li><p>A job no longer throws an exception when it can&#39;t get a lock on itself for execution. This is because the inability to get a lock may well be due to a race condition with another process. There&#39;s no need to throw an exception when it can&#39;t get a lock because another process has a lock. So it generates a warning, instead. Reported by Bill Cappell. [David]</p>

</li>
<li><p>Bric::Biz::Workflow now caches calls to <code>allowed_desks()</code>. This will allow desks to render <i>much</i> Faster, since most assets on a desk will list the same desks in the &quot;Move to&quot; select lists. [David]</p>

</li>
<li><p>When the <code>PUBLISH_RELATED_ASSETS</code> <i>bricolage.conf</i> directive is enabled, aliases are now also republished. Only aliases that have previously been published will be republished, and only the last published version will be republished, rather than any versions created since the last publish. Suggested by Serge Sozonoff. [David]</p>

</li>
<li><p>Added the <code>secret</code> parameter to the <code>list()</code>, <code>list_ids()</code>, and <code>href()</code> methods of Bric::Util::Grp. [David]</p>

</li>
<li><p>The <code>set_page_extensions()</code> method of the burner class now provides a list of duplicate extensions in the exception thrown when duplicate extensions are passed to it. [Paul Orrock]</p>

</li>
<li><p>A story or media document published with an expire date earlier than the scheduled publish time no longer bothers with the publish but just expires the story or media document. [David]</p>

</li>
<li><p>When two events in a list have the same timestamp, they are no longer listed in order by ID relative to each other, but relative to ID <i>descending</i>, to ensure that the one logged first will be listed after the one logged next. [David]</p>

</li>
<li><p>Media documents without an associated media file will no longer be displayed in the search results when attempting to relate a media document to an element. Reported by Adam Rinehart. [David]</p>

</li>
<li><p>When a template is moved to a new category, its ACL is now properly updated in the cached copy in the user&#39;s session, as well as in the database. [David]</p>

</li>
<li><p>Changed the <code>published_version</code> parameter to the <code>list()</code> method of Bric::Biz::Asset::Template (the template class) to <code>deployed_version</code>, but kept <code>published_version</code> as an alias.</p>

</li>
<li><p>Optimized <code>path</code> and <code>parent</code> searches in the Category <code>list_ids</code> SOAP method. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes21">Bug Fixes</h2>

<ul>

<li><p>The SOAP server now properly includes the start desk when it checks CREATE permissions for creating stories, media, or templates. Reported by Alexandra Gershman. [David]</p>

</li>
<li><p>Form validation and group management now properly work in the user profile. [David]</p>

</li>
<li><p>Fixed the &quot;story__category&quot; table to use the correct sequence for the id column&#39;s default value (although the default is never used, this is a good precaution). Reported by Paul Orrock. [David]</p>

</li>
<li><p>Stories and media documents now better pay attention to the letter case specification of output channels when returning URIs. Thanks to Jos&eacute; Castro for the spot. [Marshall]</p>

</li>
<li><p>Stories now properly set the letter case of file names in URIs when <code>STORY_URI_WITH_FILENAME</code> is enabled. Reported by Jos&eacute; Castro. [David]</p>

</li>
<li><p>The <i>bricolage.conf</i> <code>PERL_LOADER</code> directive now works properly with <i>bric_queued</i>. [David]</p>

</li>
<li><p>The SFTP mover now works with <code>bric_queued</code>. [David]</p>

</li>
<li><p>Fixed misspelled database index name. Spotted by Scott. [David]</p>

</li>
<li><p>Error messages are now properly localized in <code>bric_queued</code>. [David]</p>

</li>
<li><p>Stories updated via SOAP to change categories will no longer leave the old categories associated with the story. [David]</p>

</li>
<li><p>Media uploads no longer sometimes fail with an SQL error. [Rod Taylor]</p>

</li>
<li><p>&quot;All Types&quot; now properly shows up at the top of the Types select list in the Advanced Search. [Marshall]</p>

</li>
<li><p>Creating media with related stories via the SOAP interface will no longer cause the bizarre &quot;Could not find httpd.xml&quot; error. Reported by Curtis Poe. [David]</p>

</li>
<li><p>Removed possible circular processing of story and media documents when creating new story or media documents via SOAP. [David]</p>

</li>
<li><p>Previewing and publishing multipage stories created through <i>bric_soap</i> now properly burn all of the pages. [Scott]</p>

</li>
<li><p>Cloned stories now properly set the <code>published_version</code> attribute to <code>undef</code> rather than the value of the original story, thus preventing the clone from having a published version number greater than its current version number. Reported by Nate Perry-Thistle and Joshua Edelstein. [David and Nate Perry-Thistle]</p>

</li>
<li><p>The <i>bric_media_upload</i> contrib script now uses the site argument (if there is one) to search for categories. This will prevent it from finding a category in one site but not the upload target site. [David]</p>

</li>
<li><p>Fixed two bugs with <code>bric_template_diff</code>. <code>File::Spec::Functions</code> now properly exports <code>catfile()</code> and <code>--from--site</code> and <code>--to-site</code> now properly search on the site rather than the output channel. [Ovid]</p>

</li>
<li><p>When a category is added to a story that creates a URI conflict, the new category does not remain associated with the story in the story profile after the conflict error has been thrown. Reported by Paul Orrock. [David]</p>

</li>
<li><p>The <code>alias_id</code> parameter to the <code>list()</code> method of the story and media classes has been documented. [David]</p>

</li>
<li><p>Usernames are now SQL-escaped before being looked up when a user attempts to log in. The prevents errors when, for example, there are two users named &quot;food&quot; and &quot;foo_&quot;, and &quot;foo_&quot; attempts to login and gets a failure. [David]</p>

</li>
<li><p>All calls to <code>lookup()</code> methods by the SOAP server that pass string values to look up (such as category URIs and site, workflow, and desk names) are SQL escaped so as to prevent conflicts similar to those noted above for usernames. Reported by Scott Lanning. [David]</p>

</li>
<li><p>Contributor groups created in the contributor profile are no longer missing from the contributor manager search interface. Reported by Rachel Murray and Scott. [David]</p>

</li>
<li><p><code>ANY()</code> now works properly for the <code>output_channel_id</code> parameter to the list() method of the story and media classes. Reported by Serge Sozonoff. [David]</p>

</li>
<li><p>The <i>favicon.ico</i> works again. [David]</p>

</li>
<li><p>Stories are now properly expired when the <code>BRIC_QUEUED</code> <i>bricolage.conf</i> directive is enabled. Reported by Scott. [David]</p>

</li>
<li><p>When a template is checked out of the library and then the checkout is canceled, it is no longer left on the desk it was moved into upon the checkout, but properly reshelved. Reported by Marshall. [David]</p>

</li>
<li><p>Media created with the default &quot;Image&quot; and &quot;Photograph&quot; media type elements will now properly supply a &quot;Lock val&quot; check box for autopopulated fields. Reported by Marshall. [David]</p>

</li>
<li><p>Super Bulk Edit now works for media as well as stories. Reported by Scott. [David]</p>

</li>
<li><p>The description attribute of stories, media, and templates is now properly limited to 1024 characters in the UI. Reported by Scott. [David]</p>

</li>
<li><p>When a template is moved to a new category, the old version of the template is undeployed when the new version is deployed to the new category. The versions in the sandbox are properly synced, as well.</p>

</li>
<li><p>Eliminated a compile-time warnings from <i>contrib/bric_media_upload/bric_media_upload</i>. [David]</p>

</li>
</ul>

<h1 id="Version-1.8.5-2005-03-18-">Version 1.8.5 (2005-03-18)</h1>

<h2 id="Improvements24">Improvements</h2>

<ul>

<li><p>Added the <code>checked_in</code> parameter to the <code>lookup()</code>, <code>list()</code>, and <code>list_ids()</code> methods of the story, media, and template classes. If passed a true value, this parameter causes the checked in version of the most current version of the story to be returned. When a story is checked out, there are two instances of the current version: the one checked in last, and the one currently being edited. When the <code>checked_in</code> parameter is a true value, then the instance last checked in is returned, rather than the instance currently checked out. This is useful for users who do not currently have a story checked out and wish to see the story as of the last check in, rather than as currently being worked on in the current checkout. If a story is not currently checked out, this parameter has no effect.</p>

</li>
</ul>

<h2 id="Bug-Fixes22">Bug Fixes</h2>

<ul>

<li><p>Previews on non-checked out stories and media work again. [David]</p>

</li>
<li><p>Preview and views once again preview a story or media document as it was last checked in, rather than as it might be currently being worked on in a current checkout. [David]</p>

</li>
</ul>

<h1 id="Version-1.8.4-2005-03-18-">Version 1.8.4 (2005-03-18)</h1>

<h2 id="Improvements25">Improvements</h2>

<ul>

<li><p>Made story profile&#39;s subelement &#39;Preview In&#39; output-channel list consistent with the top level one (e.g. editing a Page shows the same preview OCs as editing the Story at the top level). [Scott]</p>

</li>
<li><p>Added Linux startup script <i>contrib/start_scripts/linux</i>. [David]</p>

</li>
<li><p>Added <code>version_id</code> parameter to the <code>list()</code> methods of the story, media, and template classes. Oversight reported by Kang-min Liu. [David]</p>

</li>
<li><p>Distribution via SFTP is now atomic and respects the <code>FTP_UNLINK_BEFORE_MOVE</code> directive. Spotted by Patrick Michael Kane. [David]</p>

</li>
<li><p>Related story and media elements managed through the SOAP server can now use a combination of URI and site ID to identify related assets in addition to the existing approach of using story and media IDs. [David]</p>

</li>
<li><p>Email sent by Bricolage now set the send date, since our understanding is that the MUA is responsible for setting the date and some SPAM filters trigger on missing Date: headers. [Cameron Miller]</p>

</li>
<li><p>The media type manager now validates media type names to ensure that they are of the form &quot;type/subtype&quot; with no spaces. Suggested by Marshall Roch. [David]</p>

</li>
<li><p>When started up by the super user, the virtual FTP server now runs as the same user as the Bricolage Apache server. This should prevent malicious users of the virtual FTP server from being able to do things as the root user that they shouldn&#39;t. [Keith Grennan]</p>

</li>
<li><p>SQL errors encountered when building the database are now fatal, meaning that they will cause the entire installation to fail, rather than continuing to execute SQL statements and build an incomplete database. This prevents the creation broken databases when people didn&#39;t notice errors in the past. [David]</p>

</li>
<li><p>A list of subelements is now less likely to mysteriously become out of order and thus lead to strange action-at-a-distance errors. And even if they do become out of order, the error message will be more appropriate (&quot;Warning! State inconsistent&quot; instead of &quot;Can&#39;t call method &#39;get_name&#39; on an undefined value&quot;). Reported by Curtis Poe. [David]</p>

</li>
<li><p>Updated mail list information in <a rel="section" href="../../../2.0/api/Bric/Hacker.html" name="Bric::Hacker">Bric::Hacker</a>. Reported by Marshall Roch. [David]</p>

</li>
<li><p>The SOAP media interface now supports creating relationships between the media documents elements and other story and media documents, just like the SOAP story interface does. [David]</p>

</li>
<li><p>The SOAP interface now supports Related stories and media on story type and media type elements just as in the UI. This involved the somewhat hackish necessity for including the &quot;related_story_id&quot; and &quot;related_media_id&quot; (or &quot;related_story_uri&quot; and &quot;related_media_uri&quot;) attributes in the &quot;elements&quot; XML element, but it does the trick. [David]</p>

</li>
<li><p>The list of elements to select from when creating a new template is now in alphabetical order. [David]</p>

</li>
<li><p>The XML representation of media documents used by the SOAP server now supports the media type of the file. [David]</p>

</li>
<li><p>The &quot;multi&quot; install destination is now the default, rather than the &quot;single&quot; install destination. The two styles (&quot;multi&quot; and &quot;single&quot;) are now also better described during installation. [David]</p>

</li>
<li><p>When the installer prompts for database passwords, it no longer echoes them to the terminal. Suggested by Marshall. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes23">Bug Fixes</h2>

<ul>

<li><p>Versions of Perl that disallow the use of the <code>-I</code> argument in a setuid environment will no longer cause the upgrade to fail. Reported by Serge Sozonoff. [David]</p>

</li>
<li><p>The new support for a false value to the <code>checked_out</code> parameter to the <code>list()</code> methods of the story, media, and template classes is now properly supported by the SOAP <code>list_ids</code> method, as well. [David]</p>

</li>
<li><p>Calls to publish documents via SOAP will no longer fail if the <code>published_version</code> attribute is not specified and the document to be published has never been published before. [David]</p>

</li>
<li><p>The Bricolage virtual FTP server will no longer fail to start if Template Toolkit is installed but its version number is less than 2.14. Reported by Adam Rinehart. [David]</p>

</li>
<li><p>Fixed a bug where nothing would ever publish if you had <code>PUBLISH_RELATED_ASSETS</code> enabled in <i>bricolage.conf</i>. [Mark]</p>

</li>
<li><p>Added &quot;slug&quot; to the list of attributes specified in the error message for a non-unique URI in a story. Thanks to Rachel Murray for the spot! [David]</p>

</li>
<li><p>Fix in the SOAP server code to adjust for changes in Exception::Class 1.20. [David]</p>

</li>
<li><p>Stories and Media created or updated via the SOAP interface will now associate contributors of the appropriate type, instead of &quot;All Contributors&quot;. [Scott &amp; David]</p>

</li>
<li><p>Deleting an element that has a template no longer causes an error. Thanks to Susan for the spot! [David]</p>

</li>
<li><p>Eliminated encoding errors when using the SOAP interface to output stories, media, or templates with wide characters. Reported by Scott Lanning. [David]</p>

</li>
<li><p>Fields with a an empty string or 0 (zero) for their values will no longer be displayed as &quot;Not defined&quot; when viewing a story. [David]</p>

</li>
<li><p>Reverting (stories, media, templates) no longer gives an error. Reported by Simon Wilcox, Rachel Murray, and others. [David]</p>

</li>
<li><p>Publishing a published version of a document that has a later version in workflow will no longer cause that later version to be mysteriously removed from workflow. This could be caused by passing a document looked up using the <code>published_version</code> to <code>list()</code> to <code>$burner-&gt;publish_another</code> in a template. [David]</p>

</li>
<li><p>The SOAP server story and media interfaces now support elements that contain both related stories and media, rather than one or the other. [David]</p>

</li>
<li><p>Attempting to preview a story or media document currently checked out to another user no longer causes an error. Reported by Paul Orrock. [David]</p>

</li>
<li><p>Desk asset buttons are no longer broken in non-English localizations. Thanks to Scott Lanning for the spot! [David]</p>

</li>
<li><p>Subelements will be properly deleted when selecting a &quot;Delete&quot; checkbox and clicking &quot;Save&quot; or &quot;Save and Stay&quot; in the story or media profile. It always worked in the element profile, and now it&#39;s consistent across document profile interfaces. Spotted by Scott Lanning. [David]</p>

</li>
<li><p>Custom fields with default values now have their values included when they are added to stories and media. Thanks to Clare Parkinson for the spot! [David]</p>

</li>
<li><p>The <code>get_desk_stamps()</code> method in the asset classes has been deprecated (it never worked, anyway) and will be removed in Bricolage 1.10.0. The same goes for the <code>required_satisfied()</code> method in Bric::Biz::Workflow. Thanks to Marshall Roch for the spot! [David]</p>

</li>
<li><p>Subclasses of the media class no longer cause errors when distributing files via <code>bric_queued</code>. Thanks to Jason Edgecombe for the spot! [David]</p>

</li>
<li><p>Elements created via SOAP now correctly have site IDs associated with them. [David]</p>

</li>
<li><p>The &quot;All&quot; alphabetical search now properly escapes the &quot;%&quot; wild card character. Thanks to Frank Holtz for the spot! [David]</p>

</li>
<li><p>The <code>bric_queued</code> script now requires a username and password and will authenticate the user. This user will then be used for logging events. All events logged when a job is run via the UI are now also logged by <code>bric_queued</code>. [Mark and David]</p>

</li>
<li><p>Jobs now get a &quot;Job Created&quot; event logged when they are created. Reported by Rachel Murray. [David and Mark]</p>

</li>
<li><p>Eliminated &quot;Use of uninitialized value in pattern match (m//)&quot; warnings when uploading media files. Reported by Scott Lanning. [David]</p>

</li>
<li><p>Preview redirections now use the protocol setting of the preview output channel if it&#39;s available, and falls back on using &quot;http://&quot; when it&#39;s not, instead of using the hard-coded &quot;http://&quot;. Thanks to Martin Bacovsky for the spot! [David]</p>

</li>
<li><p>The <code>has_keyword()</code> method in the Business class (from which the story and media classes inherit) now works. Thanks to Clare Parkinson for the spot! [David]</p>

</li>
<li><p>Templates that abort during calls <code>preview_another()</code> now properly abort when not using <code>PREVIEW_LOCAL</code>. [Paul Orrock]</p>

</li>
<li><p>Clicking a link in the left-side navigation after the session has expired now causes the whole window to show the login form, rather than it showing inside the nav frame, which was useless. [Marshall]</p>

</li>
<li><p>The names of media types (a.k.a. MIME types) can now be changed without encountering an error. Thanks to Marshall Roch for the spot! [David]</p>

</li>
<li><p>Media type MIME Type names are now properly required in the UI. [David]</p>

</li>
<li><p>Fixed typo in the virtual FTP server which was causing an error when saving a template. [Keith Grennan]</p>

</li>
<li><p>The JavaScript that validates form contents once again works with htmlArea, provided htmlArea itself is patched. See <a href="http://sourceforge.net/tracker/index.php?func=detail&aid=1155712&group_id=69750&atid=525656">this ticket</a> for the htmlArea patch. As of this writing, you must run the version of htmlArea in CVS. [David &amp; Marshall]</p>

</li>
<li><p>The JavaScript that handles the double list manager has been vastly optimized. It should now be able to better handle large lists, such as a list of thousands of categories. Reported by Scott. [Marshall]</p>

</li>
<li><p>Logging now works properly with the virtual FTP server. [Keith Grennan]</p>

</li>
<li><p>Some cases in which it was impossible to add actions to a destination have been fixed. Reported by Marshall Roch. Thanks to Jason Edgecombe for making available a server that exhibits the problem. [David]</p>

</li>
<li><p>The virtual FTP server no longer saves a template for every line in the template when the FTP client uses ASCII mode. Thanks to Keith Grennan for the spot! [David]</p>

</li>
<li><p>Reverting a template to a previous version now properly updates to the reverted version on the user&#39;s sandbox. Also, canceling a checkout now properly removes a template from a user&#39;s sandbox. [David]</p>

</li>
<li><p>When creating a new workflow, the workflow profile no longer forgets the selected site when you click the &quot;New Desk&quot; button. [David]</p>

</li>
<li><p>Changing a template in such a way that it will be deployed to a new location (by changing the category, for example) once again deletes the previous version from the previous location when it is deployed. [David]</p>

</li>
<li><p>Uploading a new image to a media document with a different media type than the previous image no longer causes an Imager error. [David]</p>

</li>
</ul>

<h1 id="Version-1.8.3-2004-11-09-">Version 1.8.3 (2004-11-09)</h1>

<h2 id="Improvements26">Improvements</h2>

<ul>

<li><p><code>make clone</code> now ignores files in the source directory that start with &quot;bricolage-&quot;. This should prevent copying previous clones into the new clone. [David]</p>

</li>
<li><p>Added <i>contrib/thumbnails/precreate-thumbs.pl</i> script to pre-create thumbnails from images. Useful for upgraders. [Scott]</p>

</li>
<li><p>Added primary key to the &quot;event_attr&quot;, &quot;element__site&quot;, &quot;story_uri&quot;, and &quot;media_uri&quot; tables in the database. This will make it easier to do database replication. [David and Kenneth Marshall]</p>

</li>
<li><p>Added <i>contrib/bric_import_contribs</i> to import contributors from a tab-delimited file. Development by Kineticode, sponsored by the RAND Corporation. [David]</p>

</li>
<li><p>Added the <code>published_version</code> parameter to the <code>list()</code> methods of the story, media, and template classes. This parameter forces the search to return the versions of the assets as they were last published, rather than the most recent version. This will be most useful to those looking up other documents in templates and publishing them, as a way of avoiding pulling documents out from other anyone who might have them checked out! [David]</p>

</li>
<li><p>For those using the Template Toolkit burner, the required version is now 2.14, so as to take advantage of the improved Unicode support in that version. [David]</p>

</li>
<li><p>All publishing and distribution jobs are now executed in their own transactions when they are triggered by the user interface. This is to reduce the chances of a deadlock between long-running publishing transactions. [David]</p>

</li>
<li><p>The installer now requires PostgreSQL 7.3 or later. This is because 7.2 hasn&#39;t worked properly with Bricolage since 1.8.0. [David]</p>

</li>
<li><p>Optimized SQL queries for key names or that order by string values to use indexes in the <code>list()</code> and <code>list_ids()</code> methods of the story, media, and template classes. [David]</p>

</li>
<li><p>The installer will now fail to install if the version of Apache is greater than version 1--that is, it will refuse to install under Apache 2 (for now). [David]</p>

</li>
<li><p>Added Russian localization. [Sergey Samoilenko].</p>

</li>
<li><p>Changed the foreign keys in the story, media, and formatting (template) tables so that <code>DELETE</code>s do not cascade, but are restricted. This means that before deleting any source, element, site, workflow, or other related object that has a foreign key reference in an asset table, those rows must be deleted. Otherwise, PostgreSQL will throw an exception. Hopefully, this will put a stop to the mysterious but very rare disappearance of stories from Bricolage. [David]</p>

</li>
<li><p>The distribution monitor, <i>bric_dist_mon</i>, no longer populates HTTP headers with lists of Job IDs for execution. Instead, it simply sends a request to the distribution handler, and Bric::Dist::Handler looks up the jobs to execute itself. This fixes an issue with too many headers being put into the request, and makes the operation of Bric::Dist::Handler more efficient. [David]</p>

</li>
<li><p>A call to <code>$burner-&gt;publish_another</code> in a template that passes in a date/time string in the future now causes a publish job to be scheduled for that time, rather than immediate burning the document and then scheduling the distribution to take place in the future. Reported by Ashlee Caul. [David]</p>

</li>
<li><p>Improved context-sensitive help for the &quot;New Template&quot; profile. [Paul Orrock and David]</p>

</li>
<li><p>Make slug actually be required when <code>ALLOW_SLUGLESS_NONFIXED</code> isn&#39;t enabled, in particular on the clone page. Thanks to Dharmender Yadav at Enabling Dimensions for part of the patch. [Scott]</p>

</li>
<li><p>Removed the hack that commits a database transaction in the middle of a request that does a &quot;Check in and Publish&quot;, since we now require PostgreSQL 7.3 and the bug that the hacked worked around was fixed in that release. [David]</p>

</li>
<li><p>Added missing constraint to the &quot;type&quot; column of the &quot;workflow&quot; table. [David]</p>

</li>
<li><p>Changing the sort order of a list of items in a search interface now properly reverses the entire collection of object over the pages, rather than just the objects for the current page. Thanks to Marshall for the spot! [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes24">Bug Fixes</h2>

<ul>

<li><p>The localization libraries load without error again. Added tests to ensure that this doesn&#39;t happen again. [David]</p>

</li>
<li><p>Publishing stories not in workflow via the SOAP server works again. [David]</p>

</li>
<li><p>Documents that the SOAP workflow publish finds in workflow but not on a desk (which shouldn&#39;t happen, but sometimes does) are now just published anyway. [David]</p>

</li>
<li><p>The Burner object&#39;s <code>encoding</code> attribute is now setable as well as readable. [David]</p>

</li>
<li><p>The category browser works again. [David]</p>

</li>
<li><p>Fixed the &quot;event&quot; table to use the correct sequence the for they id column&#39;s default value (although the default is never used, this is a good precaution). [David]</p>

</li>
<li><p>Fixed Media Upload bug where the full local path was being used, by adding a &#39;winxp&#39; key to Bric::Util::Trans::FS to account for an update to HTTP::BrowserDetect. [Mark Kennedy]</p>

</li>
<li><p>A call to <code>$element-&gt;get_elements</code> in an array context when the element contains no subelements no longer returns an array reference. Reported by Clinton Gormley. [David]</p>

</li>
<li><p>Fix bug 839 so that categories can be deleted. [Scott]</p>

</li>
<li><p>Instances of a required custom field in story elements is no longer required once it has been deleted from the element definition in the element manager. Reported by Rod Taylor. [David]</p>

</li>
<li><p>A false value passed to the <code>checked_out</code> parameter of the <code>list()</code> and <code>list_ids()</code> methods of the story, media, and template (formatting) classes now properly returns only objects or IDs for assets that are not checked out. [David]</p>

</li>
<li><p>The cover date select widget now works properly in the clone interface when a non-ISO style date preference is selected. Thanks to Susan G. for the spot! [David]</p>

</li>
<li><p>By forcing the upgrade scripts to execute as the PostgreSQL user, running <code>make upgrade</code> with PostgreSQL &quot;ident sameuser&quot; security now works properly. [Keith Grennan]</p>

</li>
<li><p>The <code>LoadModule</code> and <code>AddModule</code> <i>httpd.conf</i> directives should now be generated properly during installation. <code>LoadModule</code> will use <code>config_log_module</code> or <code>mod_log_config</code> depending on the system, but <code>AddModule</code> will always use <i>mod_log_config.c</i>. Spotted by Dave Jablonski. [Marshall]</p>

</li>
<li><p>Deleted sites will no longer be displayed in the site context menu in the UI. Reported by Ed Stevenson. [David]</p>

</li>
<li><p>Sorting templates based on Asset Type (Element) no longer causes an error. [David]</p>

</li>
<li><p>Events are now logged during the cleanup phase in alphabetical order by event type key name, to prevent deadlocks between two transactions logging events of the same types in different orders at the same time. [David]</p>

</li>
<li><p>Fixed a number of the callbacks in the story, media, and template profiles so that they didn&#39;t clear out the session before other callbacks were done with it. Most often seen as the error &#39;Can&#39;t call method &quot;get_tiles&quot; on an undefined value&#39; in the media profile, especially with IE/Windows (for some unknown reason). Reported by Ed Stevenson. [David]</p>

</li>
<li><p>Fixed typo in clone page that caused all output channels to be listed rather than only those associated with the element itself. [Scott]</p>

</li>
<li><p>Fixed double listing of the &quot;All&quot; group in the group membership double list manager. [Christian Hauser]</p>

</li>
<li><p>Mail sent for alerts and the like now has DOS and Macintosh line-endings converted to Unix so that they are displayed properly in most mail clients. [Christian Hauser and David]</p>

</li>
<li><p>Documented required <code>user__id</code> parameter to the <code>new()</code> method in the story and media classes. Reported by Rod Taylor. [David]</p>

</li>
<li><p>Image buttons now correctly execute the <code>onsubmit()</code> method for forms that define an <code>onsubmit</code> attribute. This means that, among other things, changes to a group profile will persist when you click the &quot;Permissions&quot; button. [David]</p>

</li>
<li><p>Media type groups now properly display their members.</p>

</li>
<li><p>The &quot;Edit&quot; link that showed up for categories associated with a story when the <code>ENABLE_CATEGORY_BROWSER</code> <i>bricolage.conf</i> directive has been removed. It didn&#39;t belong there in the first place. Reported by Ho Yin Au. [David]</p>

</li>
<li><p>Simple search now works when it is selected when the &quot;Default Search&quot; preference is set to &quot;Advanced&quot;. Reported by Marshall Roch. [David]</p>

</li>
<li><p>Multiple alert types set up to trigger alerts for the same event will now all properly execute. Thanks to Christian Hauser for the spot! [David]</p>

</li>
<li><p>Publishing stories or media via SOAP with the <code>published_only</code> parameter (<code>--published-only</code> for <i>bric_republish</i>) now correctly republishes the published versions of documents even if the current version is in workflow. Reported by Adam Rinehart. [David]</p>

</li>
<li><p>Added upgrade script to clean out old records left in the &quot;member&quot; table if users elected to delete old jobs during the 1.8.2 upgrade. [David]</p>

</li>
<li><p>Users granted a permission greater than READ to the members of the &quot;All Users&quot; group no longer get such permission to any members of the &quot;Global Admins&quot; group unless they have specifically been granted such permission to the members of the &quot;Global Admins&quot; group. Thanks to Marshall Roch for the spot! [David]</p>

</li>
</ul>

<h1 id="Version-1.8.2-2004-11-13-">Version 1.8.2 (2004-11-13)</h1>

<h2 id="Improvements27">Improvements</h2>

<ul>

<li><p>Added note to the context-sensitive help for the story, media, and template search pages to search on &quot;/&quot; to return all records, and to use SQL wildcards such as &quot;%&quot; to generalize the search. [David]</p>

</li>
<li><p><code>make upgrade</code> no longer copies the entire installed component root to a new directory as a way to get rid of old UI component files. We now require that any deleted component files get removed from an existing installation via an upgrade script, instead. See <i>inst/upgrade/1.7.0/delete_old_components.pl</i> for an example. [David]</p>

</li>
<li><p>Bricolage now runs under a DSO <code>mod_perl</code> as long as it uses a Perl compiled with <code>-Uusemymalloc</code> <i>or</i> <code>-Ubincompat5005</code>. See the <a href="http://perl.apache.org/docs/1.0/guide/install.html#When_DSO_can_be_Used">mod_perl DSO documentation</a> for details. Thanks to Marshall Roch for finding that link. [David]</p>

</li>
<li><p>The New Story and New Media profiles by default no longer have a value selected for the Story Type or Media type (respectively), so as to prevent the inadvertent creation of documents of the wrong type. [David]</p>

</li>
<li><p>Alerts triggered to be sent to users who don&#39;t have the appropriate contact information will now be logged for those users so that they can see them and acknowledge them under &quot;My Alerts&quot;. [David]</p>

</li>
<li><p>Added <i>bric_media_dump</i> script to <i>contrib/</i>. [David]</p>

</li>
<li><p>The category association interface used in the story profile when the <code>ENABLE_CATEGORY_BROWSER</code> <i>bricolage.conf</i> directive is enabled now uses radio buttons instead of a link to select the primary category. Suggested by Scott Lanning. [David]</p>

</li>
<li><p>Search by site is now supported in the &quot;Advanced Search&quot; interface of &quot;Find Stories&quot;, &quot;Find Media&quot;, and &quot;Find Templates&quot; when there is more than one site and the &quot;Filter by Site Context&quot; preference is not turned on. [David]</p>

</li>
<li><p>Removed Bric::FAQ, since it is now maintained on the Website, instead. [David]</p>

</li>
<li><p>Updated Bric::Admin to suggest that PostgreSQL&#39;s <code>initdb</code> be run with <code>--no-locale</code> so as to avoid collation issues with non-Western characters. See <a href="http://archives.postgresql.org/pgsql-general/2004-08/threads.php#01079">this discussion</a> for more information.</p>

</li>
<li><p>Added a warning to the story and media profiles for when related stories and media have been deactivated and a different story or media document should be related.</p>

</li>
<li><p>Added output to the Apache log consisting of the 20 most recent events on an asset that has lost track of what workflow and/or desk it is on. This is to provide debugging information that might help us to track down when an asset forgets its workflow and/or desk, so that we might eventually be able to eliminate the code that picks up on this and corrects it. [David]</p>

</li>
<li><p>The distribution monitor, <i>bric_dist_mon</i>, now prints error information to <code>STDERR</code> when there is an error, instead of just printing it to the system log. [David]</p>

</li>
<li><p>Existing jobs are now executed within their own transactions, as opposed to no transaction specification. This means that each job must succeed or fail independent of any other jobs. New jobs are executed before being inserted into the database so as to keep them atomic within their surrounding transaction (generally a UI request). All this means that transactionality is much more intelligent for jobs and will hopefully eliminate job table deadlocks. Reported by Mark Jaroski, Serge Sozonoff, Patrick Michael Kane, and others. [David]</p>

</li>
<li><p>The workflow, destination, and output channel profiles only display site information if the user has EDIT access to more than one site. The &quot;Find Stories&quot; and &quot;Find Media&quot; managers only display the site information for the listed documents if there is more than one site in Bricolage. Suggested by Scott Lanning. [David]</p>

</li>
<li><p>Updated documentation of parameters to the <code>list()</code> method of Bric::Biz::Asset::Template (the template class). Also documented a few parameters to the story and media class <code>list()</code> methods that were supported but previously undocumented. [David]</p>

</li>
<li><p>Variables are now properly decoded to UTF-8 when they are populated from the database. [David]</p>

</li>
<li><p>The strings used in translations are now all properly decoded to UTF-8. [David]</p>

</li>
<li><p>All templates now execute with UTF-8 character strings enabled. This means that any templates that convert content to other character sets might need to change the way they do so. For example, templates that had used <code>&lt;%filter&gt;</code> blocks to convert content to another encoding using something like <code>Encode::from_to($_, &#39;utf-8&#39;, $encoding)</code> must now use something like <code>$_ = Encode::encode($encoding, $_)</code>, instead. Bric::Util::CharTrans should continue to do the right thing. [David]</p>

</li>
<li><p>Added <code>encoding</code> attribute to Bric::Util::Burner so that, if templates are outputting something other than Perl <code>utf8</code> decoded data, they can specify what they&#39;re outputting, and the file opened for output from the templates will be set to the proper mode. Applies to Perl 5.8.0 and later only. [David]</p>

</li>
<li><p>Added example use for <code>$burner-&gt;display_pages</code> to Bric::AdvTemplates. [Cinly Ooi]</p>

</li>
<li><p>Added <i>README.Mandrake</i>. [Cameron Miller]</p>

</li>
<li><p>Added <code>SFTP_HOME</code> <i>bricolage.conf</i> directive to specify the home directory and location of SSH keys when SSH is enabled. [Cameron Miller]</p>

</li>
<li><p>Users can no longer implicitly publish related stories and media via the UI that they don&#39;t have PUBLISH access to. [David]</p>

</li>
<li><p>Users can no longer publish related documents via the UI or SOAP that are in workflow but not on a publish desk. [David]</p>

</li>
<li><p>Added search by output channel to &quot;Find Templates&quot;. [David]</p>

</li>
<li><p>Previewing a document with a related media document that&#39;s checked out no longer triggers a &quot;Cannot auto-publish related media because it is checked out&quot; message. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes25">Bug Fixes</h2>

<ul>

<li><p>The burner <code>next_page_file()</code> and <code>next_page_uri()</code> methods now properly return a value if the <code>burn_again</code> attribute has been set to a true value in the Mason burner. [David]</p>

</li>
<li><p>The <code>list()</code> and <code>list_ids()</code> methods of the story, media, and template classes no longer return <code>undef</code> in a scalar context when there are no objects to be returned. They return an empty array reference, instead. [David]</p>

</li>
<li><p>The <code>is_fixed()</code> method in the story and media classes now works properly. Reported by Marshall Roch. [David]</p>

</li>
<li><p><code>make clone</code> once again properly copies the <i>lib/Makefile.PL</i> and <i>bin/Makefile.PL</i> files from the source directory. [David]</p>

</li>
<li><p>Fixed the <code>my_meths()</code> method of Bric::Biz::AssetType::Parts::Data to return metadata for the the <code>key_name</code> attribute instead of an <code>undef</code> for the removed <code>name</code> attribute. [Scott]</p>

</li>
<li><p>Added missing language-specifying HTML attributes so as to properly localize story titles and the like. Reported by Joshua Edelstein. [David]</p>

</li>
<li><p>The list of output channels to add to an element in the element profile now contains the name of the site that each is associated with, since different sites can have output channels with the same names. [David]</p>

</li>
<li><p>You can no longer delete a category from a story when you have also marked it to become the primary category. Reported by Simon Wilcox. [David]</p>

</li>
<li><p>Editing notes from My Workspace now works properly. Thanks to Simon Wilcox for the spot! [David]</p>

</li>
<li><p>The &quot;Advanced Search&quot; interface once again works for searching for related story and media documents. Reported by Ben Bangert and many others. [David]</p>

</li>
<li><p>Renaming a site and its domain name now always properly renames the associated site permission user groups. Reported by Will Trillich. [David]</p>

</li>
<li><p>The &quot;Alias Story&quot; interface now works properly when the <code>USE_THUMBNAILS</code> directive is enabled. Reported by Ben Bangert. [David]</p>

</li>
<li><p>Attempting to create a new source with the same name as an existing but deactivated source no longer throws an SQL error, but provides a nice error message. Reported by Marshall Roch. [David]</p>

</li>
<li><p>Bricolage no longer attempts to email alerts to an empty list of recipients. This will make your SMTP server happier. [David]</p>

</li>
<li><p>The version numbering issues of Bricolage modules have all been worked out after the confusion in 1.8.1. This incidentally allows the HTML::Template and Template Toolkit burners to be available again. Reported by Mike W. [David]</p>

</li>
<li><p>Misspelling the name of a key name tag or including a non-repeatable field more than once in Super Bulk Edit no longer causes all of the changes in that screen to be lost. [David]</p>

</li>
<li><p>When a user overrides the global &quot;Date/Time Format&quot; and &quot;Time Zone&quot; preferences, the affects of the overrides are now properly reflected in the UI. [David]</p>

</li>
<li><p>The &quot;Default Asset Sort&quot; preference now actually works. Reported by Simon Wilcox. [David]</p>

</li>
<li><p>Publishing a story or media document along with its related story or media documents from a publish desk again correctly publishes the original asset as well as the relateds. Reported by Paul Orrock. [David]</p>

</li>
<li><p>Users can now set their own values for overrideable preferences. [David]</p>

</li>
<li><p>The <code>list()</code> and <code>list_ids()</code> methods of the Story, Media, and Template (<i>Template.pm</i>) classes no longer have the side effect of changing values in the hash references passed to them. This had caused problems for date/time parameters. Reported by Paul Orrock. [David]</p>

</li>
<li><p>Auto-generated slugs (enabled via the <code>AUTOGENERATE_SLUG</code> <i>bricolage.conf</i> directive) no longer convert uppercase characters to underscores. Thanks to Paul Orrock for the spot! [David]</p>

</li>
<li><p>Changes made to story content in the story profile are no longer preserved when clicking the &quot;Cancel&quot; button. Reported by Paul Orrock. [David]</p>

</li>
<li><p>The story and media profiles now clear out the session cache for the story or media element when leaving the story or media profile. This is to prevent perceived caching of changes that were canceled in a profile, noticed only when one canceled an edit of a story or media document and immediately edited the same document. [David]</p>

</li>
<li><p>Clicking the &quot;Add More&quot; button to add more keywords to a new category no longer causes an error. [David]</p>

</li>
<li><p>Adding a new category to a group and asking it to cascade that group membership into subcategories no longer causes an error. Thanks to Adam Rinehart for the spot! [David]</p>

</li>
<li><p>Adding an existing publish desk to a workflow no longer unsets its publish attribute. [David]</p>

</li>
<li><p>Deleted output channels no longer show up in the select list for story type and media type elements. [David]</p>

</li>
<li><p>Deleting a workflow from the workflow manager now properly updates the workflow cache so that the deleted workflow is removed from the left navigation without a reboot. [David]</p>

</li>
<li><p>Creating a story, checking it in, checking it out, and then canceling the checkout no longer incorrectly removes the story from workflow. [David]</p>

</li>
<li><p>The source of a story can now be changed. [David]</p>

</li>
<li><p>Status messages sent to the browser during previews are now hidden if an error is triggered. [Marshall]</p>

</li>
<li><p>Publishing a document with deactivated related documents no longer causes those deactivated documents to be published, too. Reported by Paul Orrock. [David]</p>

</li>
<li><p>The Bricolage 404, 403, and 500 error pages now send the appropriate HTTP header to the browser. Thanks to Marshall Roch for the spot! [David]</p>

</li>
<li><p>The Output Channel URI Prefix and URI Suffix fields are once again allowed to include a slash (<i>/</i>). Reported by Kevin Elliott. [David]</p>

</li>
<li><p>An attempt to create a new template with the proper extension as part of the name (e.g., <i>foo.mc</i> for a Mason template) now keeps the extension instead of changing the dot to an underscore and adding the extension (e.g., it stays <i>foo.mc</i> instead of becoming <i>foo_mc.mc</i>). This is especially useful when creating utility templates and for users of <code>bric_dev_sync</code>. Thanks to Paul Orrock for the spot! [David]</p>

</li>
<li><p>When Bricolage notices that a document or template is not in workflow or on a desk when it should be, it is now more intelligent in trying to select the correct workflow and/or desk to put it on, based on current workflow context and user permissions. Reported by Hal Creech. [David]</p>

</li>
<li><p>Content submitted to Bricolage in the UTF-8 character set is now always has the <code>utf8</code> flag set on the Perl strings that store it. This allows fields that have a maximum length to be truncated to that length in characters instead of bytes. Thanks to Kang-min Liu for the spot! [David]</p>

</li>
<li><p><code>Bric::Biz::OutputChannel-&gt;list_ids</code> no longer returns duplicate IDs. This incidentally allows output channels that happen to be in groups to be edited, eliminating the &#39;name &quot;Web&quot; is already used by another Output Channel&#39; error. Thanks to John Greene for the spot! [David]</p>

</li>
<li><p>The media type of media documents now defaults to &quot;none&quot; instead of inserting a <code>NULL</code> into the database. The column has also be marked <code>NOT NULL</code> in order to ensure that this remains the pattern. [David]</p>

</li>
<li><p>Changed the &quot;name&quot; and &quot;error_message&quot; columns in the &quot;job&quot; table in the database from <code>VARCHAR</code> to &lt;TEXT&gt;. This is so that we don&#39;t have to truncate them before inserting them. [David]</p>

</li>
<li><p>Elements with autopopulated fields (e.g., for image documents) can now be created via the SOAP interface. Reported by Todd Tyree. [David]</p>

</li>
<li><p>Fixed a number of the parameters to the <code>list()</code> method of the Story, Media, and Template classes to properly handle an argument using the <code>ANY</code> operator. These include the <code>keyword</code> and <code>category_uri</code> parameters. Passing an <code>ANY</code> argument to these parameters before this release could cause a well-populated database to lock up with an impossible query for hours at a time. [David]</p>

</li>
<li><p>Restored foreign keys and constraints missing on the &quot;job&quot; table and related tables since version 1.8.0. [David]</p>

</li>
<li><p>The error message for failed distribution jobs is now properly displayed in the UI. [Mark]</p>

</li>
<li><p>Fixed bug with the execution of jobs in <i>bric_queued</i>. [Mark]</p>

</li>
<li><p>Attempting to create a new desk with the same name as a deactivated desk no longer returns an SQL error, but a more informative error.</p>

</li>
<li><p>Template sandboxes now work for the Template Toolkit burner. [David]</p>

</li>
<li><p>The output channel and element profiles no longer display deactivated output channels in their output channel select lists (for output channel includes in the output channel profile and for primary output channels in the element profile). [David]</p>

</li>
<li><p>The side navigation layer now works correctly with Internet Explorer 5.5 for Windows. [Marshall]</p>

</li>
</ul>

<h1 id="Version-1.8.1-2004-07-08-">Version 1.8.1 (2004-07-08)</h1>

<h2 id="Improvements28">Improvements</h2>

<ul>

<li><p>More complete Traditional Chinese and Simplified Chinese localizations. Also, the Mandarin localization now simply inherits from the Traditional Chinese localization. [Kang-min Liu]</p>

</li>
<li><p><code>make clone</code> now copies the <i>lib</i> directory and all of the <i>bin</i> scripts from the target to the clone, rather than from the sources. This allows any changes that have been made to scripts and classes to be properly cloned. [David]</p>

</li>
<li><p>When installing Bricolage, it will now allow you to proceed if the database already exists by asking if you want to create the Bricolage tables in the existing database. Suggested by Mark Fournier and Marshall Roch. [David]</p>

</li>
<li><p>Added some missing translations for English. [David]</p>

</li>
<li><p>The installer is now a bit smarter in how it handles loading the <code>log_config</code> (or <code>config_log</code>, as the case may be) module. [Marshall Roch]</p>

</li>
<li><p>Added ID attributes to story, media, and element profiles and &quot;fieldcontent&quot; class to content field values in the &quot;View&quot; screens so that they can be used as CSS selectors. [David]</p>

</li>
<li><p>Added language-specific style sheets. This is especially useful for right-to-left languages or for languages that require special fonts. [David]</p>

</li>
<li><p>The &quot;New Alias&quot; search interface now displays thumbnails when searching for media documents to alias and the <code>USE_THUMBNAILS</code> <i>bricolage.conf</i> directive is enabled. Reported by Serge Sozonoff. [David]</p>

</li>
<li><p>The <code>has_member()</code> method of Bric::Util::Grp is now faster when searching for a specific group member. [David]</p>

</li>
<li><p>Aliases can now be made to documents within the same site. [Serge Sozonoff]</p>

</li>
<li><p>When viewing the contents of a document, the contents now have their HTML escaped. This prevents any broken HTML in the content from breaking the Bricolage UI. Suggested by Neal Sofge. [David]</p>

</li>
<li><p>The SOAP interface for importing and exporting elements now properly has &quot;key_name&quot; XML elements instead of &quot;name&quot; XML elements. The changes are backwards compatible with XML exported from Bricolage 1.8.0 servers, however. Reported by Tony Cowderoy. [David]</p>

</li>
<li><p>Added <code>move()</code> method to the virtual FTP interface. This means that to deploy a template, rather than having to rename it locally to append &quot;.deploy&quot;, one can simply move in FTP to its new name with &quot;.deploy&quot; on appended to the new name. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Document expirations are now somewhat more intelligent. Rather than just scheduling an expiration job only if there is an expiration date the first time a document is published, Bricolage will now always schedule an expiration job for a document provided that one does not already exist (scheduled or completed) for the same time and for one of the file resources for the document. This should allow people to more easily and arbitrarily expire content whenever necessary. Thanks to John Greene for the discussion that finally motivated this change. [David]</p>

</li>
<li><p>Improved zh-cn translation. [Gang Luo]</p>

</li>
<li><p>Burner notes now persist for all sub burns (triggered by <code>publish_another()</code> and <code>preview_another()</code> in a single burn. [Serge Sozonoff]</p>

</li>
<li><p>Keyword groups now properly display their members. [David]</p>

</li>
<li><p>Added ability to create and manage groups of objects for several different types of objects. Also added the ability manage group membership within the administrative profiles for those objects. This change makes it possible to give users permission to administer subsets of objects. The new groupable objects are:</p>

<dl>

<dt>Preferences</dt>
<dd>

</dd>
<dt>Groups</dt>
<dd>

</dd>
<dt>Alert Types</dt>
<dd>

</dd>
<dt>Element Types</dt>
<dd>

</dd>
<dt>Keywords</dt>
<dd>

</dd>
<dt>Contributors</dt>
<dd>

</dd>
</dl>

<p>[David]</p>

</li>
<li><p>Alert rules are now evaluated within a safe compartment (using Safe.pm) to prevent security exploits. [David]</p>

</li>
<li><p>The Bulk Publish admin tool is no longer limited to use only by members of the Global Admins group. Now anyone can use it. All one needs is READ permission to the categories of stories, and PUBLISH permission to the stories and media documents to be published. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes26">Bug Fixes</h2>

<ul>

<li><p>Bulk Publish now ensures that users have at least READ access to categories they wish to publish from. [Scott]</p>

</li>
<li><p>Eliminated &#39;Bareword &quot;ENABLE_HTMLAREA&quot; not allowed while &quot;strict subs&quot; in use&#39; warning that prevented startup for some installations. [Scott]</p>

</li>
<li><p>The Mason burner now appends a &quot;/&quot; to the end of the category path it specifies for burning a story. This removes the ambiguity between a directory request and a file request, which in rare circumstances could cause unexpected problems. [David]</p>

</li>
<li><p>Changes made to user or contributor contacts without changing any other part of the user or contributor object are now properly saved. [David]</p>

</li>
<li><p>When cloning a story, the list of output channels to select from is now limited to the site the current workflow is in. Thanks to Serge Sozonoff for the spot! [David]</p>

</li>
<li><p>Attempting to publish a story or media document with brackets in the title no longer causes an error. Reported by Serge Sozonoff. [David]</p>

</li>
<li><p>Fixed a <i>bric_soap</i> <code>list_ids</code> bug [712] with the <code>no_workflow</code> option. [Clive Jones]</p>

</li>
<li><p>The upgrade to 1.8.0 now correctly updates story URIs that use the URI Suffix of an output channel instead of using the URI Prefix twice. [John Greene]</p>

</li>
<li><p>The Advanced Search interface for stories and media now displays only the top-level elements associated with the site the workflow is in when searching for stories and media &quot;By Type&quot;. [David]</p>

</li>
<li><p>Improved error logging for more recent versions of Apache, which unfortunately escape newlines. [David]</p>

</li>
<li><p>When Bricolage discovers a document or template on a desk but not in a workflow, it now places it in a workflows associated with the same site as the document or template is associated with. Thanks to Serge Sozonoff for the spot! [David]</p>

</li>
<li><p>Aliases of Image, Audio, or Video media documents no longer remain stuck on desks. Reported by Serge Sozonoff. [David]</p>

</li>
<li><p>Related media and story subelements of media documents now work properly. Thanks to Kang-min Liu for the spot! [David]</p>

</li>
<li><p>The distribution and SOAP handlers now load a localization object so that any code that uses localization will work properly. Reported by Clive Jones. [David]</p>

</li>
<li><p>The <code>set_page_extensions()</code> method of Bric::Util::Burner now throws an exception if duplicate page extensions are passed, rather than deferring the exception to the creation of a distribution job, which was confusing. [Clive Jones]</p>

</li>
<li><p>Calls to <code>preview_another()</code> in Bric::Util::Burner will now use any templates in the current user&#39;s sandbox and properly burn them to the preview root rather than to the staging root used for publishing. Reported by Serge Sozonoff. [David]</p>

</li>
<li><p>Contributor fields for roles other than the default role now properly store and retain their values. [David]</p>

</li>
<li><p>The virtual FTP server now properly checks out templates when a template is uploaded and is already in workflow.</p>

</li>
<li><p>Uploading a non-existent template via the virtual FTP server now correctly creates a new template. The type of template depends on the name of the template being uploaded, and for element templates, on whether there is an element with the appropriate key name. The user must have CREATE permission to All Templates or to the start desk in the first template workflow in the relevant site.</p>

</li>
<li><p>Reverting a document or template to the current version number now properly reverts all changes to the time the user checked out the document or template. Reversion is also a bit more efficient in how it looks up the previous version in the database. [David]</p>

</li>
<li><p>The SOAP server now rolls back any changes whenever an error is thrown. This prevents problems when a few objects are created or updated before an exception is thrown. Now any error will cause the entire SOAP request to fail. Thanks to Neal Sofge for the spot! [David]</p>

</li>
<li><p>Changing the &quot;Size&quot; display attribute of a field in the Field profile (a subprofile of the Element admin profile) now properly causes the field to actually display in the new size. Reported by Tony Cowderoy. [David]</p>

</li>
<li><p>The table of contacts in the alert type profile is now more like other tables, in terms of border colors, etc. [David]</p>

</li>
<li><p>The Bulk Publish admin tool now only limits the category search to the current site context if the &quot;Filter by Site Context&quot; preference is checked. [David]</p>

</li>
</ul>

<h1 id="Version-1.8.0-Portland-2004-05-03-">Version 1.8.0 &quot;Portland&quot; (2004-05-03)</h1>

<h2 id="Improvements29">Improvements</h2>

<ul>

<li><p>The <i>inst/upgrade/1.7.0/data_tile_key_name.pl</i> upgrade script now skips upgrading &quot;key_name&quot; if it would be no different than &quot;name&quot;. This can save a lot of time during upgrade if your database is large. [Scott]</p>

</li>
<li><p>For checked-out media, stories, and documents listed in the &quot;Active&quot; and &quot;Find&quot; interfaces, added the name of the user who has each checked out to the empty column that would otherwise contain a &quot;Checkout&quot; checkbox. [David]</p>

</li>
<li><p>Keyword names are now always editable in the keyword manager. [David]</p>

</li>
<li><p>Added UI for managing organizations, which provide the base data for souces. [David]</p>

</li>
<li><p>HTML, CSS, and JavaScript fixes that allow Bricolage to work properly with most browsers, including Safari 1.2.1, IE 5.2/Mac, Konqueror, Opera 7, and many others. [Marshall Roch]</p>

</li>
<li><p>Added stubs for zh-hk localization. [David]</p>

</li>
<li><p>Added missing localizations to the Language preference. Many of these are not yet translated, but there they are. [David]</p>

</li>
<li><p>Selecting a checkbox to delete an output channel in a story or media profile and then clicking a button other than the output channel &quot;Delete&quot; button or the &quot;Save&quot; or &quot;Save and Stay&quot; buttons no longer causes an error. Reported by Delfim Machado. [David]</p>

</li>
<li><p>If the &quot;Select All&quot; button is clicked to select all the checkboxes on a desk, and then is clicked again, it will uncheck all of the check boxes. [David]</p>

</li>
<li><p>Login redirection now works properly with Safari. [David]</p>

</li>
<li><p>The installation script now provides more information (and questions) when it attempts to create a database user that already exists. Suggested by Marshall Roch. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes27">Bug Fixes</h2>

<ul>

<li><p>Added a missing space to the breadcrumb in the header. [Marshall Roch]</p>

</li>
<li><p>The new <code>SFTP_MOVER_CIPHER</code> <i>bricolage.conf</i> directive now actually works. [David]</p>

</li>
<li><p>The group profile works again for element groups [David]</p>

</li>
<li><p>&quot;Check In To&quot; link misalignment fixed for Konqueror, as well as some other miscellaneous CSS fixes. [Marshall Roch]</p>

</li>
<li><p>The &quot;CREATE&quot; permission is now displayed when granting permission to user groups to access the members an &quot;All&quot; group. [David]</p>

</li>
<li><p>The &quot;none&quot; media type is no longer editable via the UI. [David]</p>

</li>
<li><p>Invalid story cover and expire dates now properly trigger an error message. [David]</p>

</li>
<li><p>Deactivated keywords are no longer returned by the <code>get_keywords()</code> methods of the Business asset class (from which Story and Media inherit) or the Category class. Reported by Paul Orrock. [David]</p>

</li>
<li><p>Events are now properly logged for keywords managed in the keyword profile. [David]</p>

</li>
<li><p>Media URIs are now properly updated when the primary output channel is changed. Reported by Ben Bangert. [David]</p>

</li>
<li><p>Bulk publish no longer marks checked-out stories as published when it hasn&#39;t published them. It also is no longer redundant when it reports that checked-out assets won&#39;t be published. Thanks to Serge Sozonoff for the spot! [David]</p>

</li>
<li><p>Safari users will no longer be stuck on the login page. [David]</p>

</li>
<li><p>The CSS directory now has its files always served as &quot;text/css&quot;. This should eliminate problems when Apache sometimes serves the CSS files as &quot;text/html&quot;. [David]</p>

</li>
<li><p>The <code>desk_id</code> parameter to the <code>list()</code> methods of the story, media, and template classes now works. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Stories published via the &quot;Checkin and Publish&quot; select list in the story profile now correctly publish related stories and media. Reported by Jo&atilde;o Pedro. [David]</p>

</li>
<li><p>Stories and media are no longer published twice when published from a publish desk or via Bulk Publish. [David]</p>

</li>
</ul>

<h1 id="Version-1.7.5-Ashland-2004-04-11-">Version 1.7.5 &quot;Ashland&quot; (2004-04-11)</h1>

<h2 id="New-Features6">New Features</h2>

<ul>

<li><p>Added <i>bric_template_dump</i> to <i>contrib</i>. This script uses the Bricolage SOAP server to export all of the templates in a single output channel. [David]</p>

</li>
<li><p>Added <code>SFTP_MOVER_CIPHER</code> <i>bricolage.conf</i> directive to tune the SFTP mover (if enabled) to the best cipher for good performance on the wire. [David]</p>

</li>
</ul>

<h2 id="Improvements30">Improvements</h2>

<ul>

<li><p>Added site and output channel support to <i>bric_template_diff</i> and <i>bric_template_patch</i> in <i>contrib</i>. [David]</p>

</li>
<li><p>When cloning a story, you can now select a new primary output channel, in addition to category, slug, cover date, etc. Suggested by Serge Sozonoff. [David]</p>

</li>
<li><p>Spell checking now works in HTMLArea. [Eric Sellers]</p>

</li>
<li><p>When creating a new story without a slug, Bricolage will now autogenerate a slug based on the title. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Added single underscore parameters to the <code>list()</code> methods of the Story, Media, and Template classes to complement those that have the awful double underscores. [David]</p>

</li>
<li><p>Made SOAP modules more tolerant of lack of sites in 1.6. [Scott]</p>

</li>
<li><p>The collection API now checks newly added members when deleting members. This ensures that newly added objects won&#39;t be saved to the database if they are deleted, first. [David]</p>

</li>
<li><p>Turned off browser autocompletion in the Server and User profiles. This prevents some browsers (e.g., Camino) from filling in your username and password where it doesn&#39;t belong. [David]</p>

</li>
<li><p>When the &quot;Filter by Site Context&quot; preference is enabled, it no longer filters documents when searching for documents to alias. Reported by Patrick Walsh. [David]</p>

</li>
<li><p>The &quot;Cancel Checkout&quot; button in the Story, Media, and Template profiles now tries to do the right thing instead of just leaving the asset on a desk in workfow every time. If the asset was just created by the user, it will be deleted. If it was just recalled from the library by the user, it will be removed from workflow and shelved in the library. Otherwise, clicking the &quot;Cancel Checkout&quot; button will leave the asset in workflow. Requested by Sara Wood, Rachel Murray, and others. [David]</p>

<p><code>make clone</code> now provides the current date and time for the default name for the cloned package. Suggested by Marshall Roch. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes28">Bug Fixes</h2>

<ul>

<li><p>Bricolage no longer tries to display thumbnails for related stories, since stories don&#39;t have thumbnails and would therefore create an error. [Eric Sellers]</p>

</li>
<li><p>Text::Levenshtein is again correctly loaded as an optional module, not a required module. Reported by Marshall Roch. [David]</p>

</li>
<li><p>Bric::Util::Burner&#39;s <code>preview_another()</code> method now actually works. Thanks to Serge Sozonoff for the spot. [David]</p>

</li>
<li><p>Fixed clone interface for IE users. Spotted by Serge Sozonoff. [Scott]</p>

</li>
<li><p>Some of the supported values for the <code>Order</code> parameter to the Story, Media, and Template classes, such as <code>category_uri</code>, did not work before. Now they do. [David]</p>

</li>
<li><p>Changing categories on a template no longer creates Frankensteinian template paths. [David]</p>

</li>
<li><p>Added constant <code>HAS_MULTISITE</code> to the Bric base classe so that all classes properly declare themselves for UI search results. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Story and Media SOAP calls now correctly use the element&#39;s key name to identify the element. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Story, Media, and Template creation via SOAP now correctly look up the Category by URI and site ID. [Jo&atilde;o Pedro &amp; David]</p>

</li>
<li><p>The Template SOAP interface now suports the <code>site</code> parameter to <code>list_ids()</code>. [David]</p>

</li>
<li><p>The Story, Template, and Media SOAP <code>list_ids()</code> intefaces now properly look up categories, output channels, and workflows with the <code>site</code> paremeter, if there is one. [David]</p>

</li>
<li><p>The <code>LOAD_LANGUGES</code> and <code>LOAD_CHAR_SETS</code> directives are now space delimited, to better match other <i>bricolage.conf</i> options. [David]</p>

</li>
<li><p>Aliased media documents now correctly point to the file name for the aliased media document. Reported by Patrick Walsh. [David]</p>

</li>
<li><p>Thanks to the improvements to the collection class, cloning stories and putting them into new output channels to ensure that they have unique URIs now works properly. Reported by Serge Sozonoff. [David]</p>

</li>
<li><p>The publish status and version is once again properly set for media when they are published. Reported by Serge Sozonoff. [David]</p>

</li>
<li><p>The group manager now properly displays the names of the sites that member objects are associated with if the class of the objects being managed knows that its objects are associated with sites. Reported by Ho Yin Au. [David]</p>

</li>
<li><p>The list of output channels to add to a media or story document in the media and story profiles now includes only those output channels associated with the site that the story or media document is in. [David]</p>

</li>
<li><p>Thanks to the fix to 1.6.13 that prevents deleted groups from affecting permissions, there is no longer any need to provide a checkbox to get access to deleted groups in the permissions interface. So it has been removed. [David]</p>

</li>
</ul>

<h1 id="Version-1.7.4-Sacramento-2004-03-18-">Version 1.7.4 &quot;Sacramento&quot; (2004-03-18)</h1>

<h2 id="New-Features7">New Features</h2>

<ul>

<li><p>Added &quot;Bulk Publish&quot; feature in ADMIN-&gt;PUBLISHING that lets members of the Global Admins group publish story and media documents by category. [Scott]</p>

</li>
<li><p>Added <code>notes()</code> method to Bric::Util::Burner, along with the accompanying <code>clear_notes()</code>. The <code>notes()</code> method provides a place to store burn data data, giving template developers a way to share data among multiple burns over the course of publishing a single story in a single category to a single output channel. Any data stored here persists for the duration of a call to <code>burn_one()</code>. [David]</p>

</li>
<li><p>Added new contributed scripts for Bricolage button generation. These scripts use the Gimp to generate localized buttons for the Bricolage UI based on the contents of an input file. See <i>contrib/button_gen/README</i> for details. [Florian Rossol]</p>

</li>
<li><p>Added support for icons for all media documents when the <code>USE_THUMBNAILS</code> <i>bricolage.conf</i> directive is enabled. These rely on the presence of PNG icon files for each MIME type in <i>comp/media/mime</i>. Only one such icons is distributed with Bricolage, <i>comp/media/mime/none.png</i> (borrowed from the KDE project under <a href="http://artist.kde.org/new/license.html#others">this license</a>), which is the default icon when the MIME type of a media file is unknown or when no icon file exists for the MIME type of the media file. Administrators are free to add their own icons, and the <code>copy_gnome_icons</code> script in <i>contrib</i> makes it easy to use GNOME icons. [David]</p>

</li>
<li><p>Added <code>bric_template_diff</code> and <code>bric_template_patch</code> scripts in <i>contrib/bric_template_diff</i>. These scripts can be used to sync templates between two Bricolage servers. [Sam]</p>

</li>
<li><p>added <code>bric_media_load</code> to <code>contrib/</code>. This script copies media into Bricolage while accounting for the new to update existing media. [Sam]</p>

</li>
<li><p>Added HTMLArea support. This adds a new type of field to be added to elements and contributor types, &quot;WYSIWYG&quot;. Such fields are then displayed in the UI using HTMLArea, a WYSIWYG HTML editor. This can be useful in particular for simple fields that often need emphasis added or links. It is not currently available in Bulk Edit or Super Bulk edit. See <a rel="section" href="../../../2.0/api/Bric/Admin.html" name="Bric::Admin">Bric::Admin</a> for installation and configuration details. [Eric Sellers]</p>

</li>
</ul>

<h2 id="Improvements31">Improvements</h2>

<ul>

<li><p>The list of categories for which permissions can be granted to user groups to access the documents and templates in the category now displays the categories for each site separately, so that categories with same URIs (such as for the root category in each site) can be easily told apart. Reported by Ho Yin Au. [David]</p>

</li>
<li><p>The list of workflows for which permissions can be granted in the permissions page now includes the parenthesized name of the site each workflow is associated with. [David]</p>

</li>
<li><p>Modified the indexes on the <code>workflow__id</code> and <code>desk__id</code> columns of the story, media, and formatting (template) tables to be more efficient, being indexed only when their IDs are greater than 0 (that is, when a story, media document, or template is actually on a desk and in a workflow). [David]</p>

</li>
<li><p>Added a method <code>is_fixed</code> to story and media objects, to determine whether a business asset has a fixed URL (for example, a Cover page). Refer to <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business.html" name="Bric::Biz::Asset::Business">Bric::Biz::Asset::Business</a>. [Scott]</p>

</li>
<li><p>Added the <code>ENABLE_OC_ASSET_ASSOCIATION</code> <i>bricolage.conf</i> directive to remove the ability to associate output channels from the story and media profiles. [Scott]</p>

</li>
<li><p>The element administration profile now automatically adds the currently selected site context to new elements, thus generally saving a step when creating new elements. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Added an interface to &#39;Clone&#39; for stories so that you can change the category, slug, and cover date, because otherwise an identical story is created, which would cause errors for some stories. Clones are no longer allowed to have URIs that are identical to the stories they were cloned from. [Scott &amp; David]</p>

</li>
<li><p>Added the ability to Delete from desks (same as My Workspace). Note however, that you can&#39;t delete from a publish desk. [Scott]</p>

</li>
<li><p>Completely documented the document element classes: <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business/Parts/Tile.html" name="Bric::Biz::Asset::Business::Parts::Tile">Bric::Biz::Asset::Business::Parts::Tile</a>, <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business/Parts/Tile/Data.html" name="Bric::Biz::Asset::Business::Parts::Tile::Data">Bric::Biz::Asset::Business::Parts::Tile::Data</a>, and <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business/Parts/Tile/Container.html" name="Bric::Biz::Asset::Business::Parts::Tile::Container">Bric::Biz::Asset::Business::Parts::Tile::Container</a>. This should make it a bit easier on templators learning their way around the Bricolage API. [David]</p>

</li>
<li><p>Refactored quite a bit of the code in the element classes. Renamed the methods with &quot;tile&quot; in their names to use &quot;element&quot; instead (but kept the old ones around as aliases, since they&#39;re used throughout the UI). Added a few methods to make the interface more complete. [David]</p>

</li>
<li><p>Modified the <code>get_containers()</code> method of Bric::Biz::Asset::Business::Parts::Tile::Container to take an optional list of key name arguments, and to return only the container subelements with those key names. This is most useful in templates, where it&#39;s fairly common to get a list of container subelements of only one or two particular types out all at once. It neatly replaces code such as this:</p>

<pre><code>for ( my $x = 1; my $quote = $element-&gt;get_container(&#39;quote&#39;, $x); $x++ ) {
    $burner-&gt;display_element($quote);
}</code></pre>

<p>With this:</p>

<pre><code>for my $quote ($element-&gt;get_containers(&#39;quote&#39;)) {
    $burner-&gt;display_element($quote);
}</code></pre>

<p>And is more efficient, too. [David]</p>

</li>
<li><p>Modified the <code>get_elements()</code> method of Bric::Biz::Asset::Business::Parts::Tile::Container to take an optional list of key name arguments, and to return only the subelements with those key names. [David]</p>

</li>
<li><p>Added the <code>get_data_elements()</code> method to Bric::Biz::Asset::Business::Parts::Tile::Container. This method functions exactly like <code>get_containers()</code> except that it returns data element objects that are subelements of the container element. It also takes an optional list of key name arguments, and, if passed, will return only the subelements with those key names. [David]</p>

</li>
<li><p>The <code>ANY()</code> subroutine will now throw an exception if no arguments are passed to it. Suggested by Dave Rolsky. [David]</p>

</li>
<li><p>Added the <code>unexpired</code> parameter to the <code>list()</code> method of the story and media classes. It selects for stories without an expire date, or with an expire date set in the future. [David]</p>

</li>
<li><p>The &quot;User Override&quot; admin tool is now available to all users. But a user can only override another user if she has EDIT permission to that other user. This makes it easier for user administrators to masquerade as other users without having to change passwords. [David]</p>

</li>
<li><p>Eliminated another SQL performance bottleneck with simple searches of media assets. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Images with no dimension greater than the <code>THUMBNAIL_SIZE</code> <i>bricolage.conf</i> directive are no longer expanded to have one side at least <code>THUMBNAIL_SIZE</code> pixels, but are left alone. [David]</p>

</li>
<li><p>Thumbnails are now displayed when searching media to relate to an element. [David]</p>

</li>
<li><p>Thumbnails are now displayed in related media subelements. [David]</p>

</li>
<li><p>Added <code>preview_another()</code> method to Bric::Util::Burner. This method is designed to be the complement of <code>publish_another()</code>, to be used in templates during previews to burn and distribute related documents so that they&#39;ll be readily available on the preview server within the context of previewing another document. [Serge Sozonoff]</p>

</li>
<li><p>Added the <code>subelement_key_name</code> parameter to the <code>list()</code> method of the story and media classes. This parameter allows searches on the key name for a container element that&#39;s a subelement of a story or media document. [David]</p>

</li>
<li><p>Added support for all of the parameters to the <code>list_ids()</code> method of the Story, Media, and Template classes to the <code>list_ids()</code> method of the corresponding SOAP classes. This allows for much more robust searches via the SOAP interface. [David &amp; Scott]</p>

</li>
<li><p>Eliminated <code>login_avail()</code> PostgreSQL function, replacing it with a partial constraint. This not only makes things simpler code-wise, but it also eliminates backup and restore problems where the <code>usr</code> table is missing. The downside is that it requires PostgreSQL 7.2 instead of our traditional minimum requirement of 7.1. So any PostgreSQL 7.1 users will need to upgrade before upgrading to this version of Bricolage. Suggested by Josh Berkus. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes29">Bug Fixes</h2>

<ul>

<li><p><code>make clone</code> will now properly clone a database on a different database server, provided the host name (and port, if necessary) have been provided. Thanks to Ho Yin Au for the spot! [David]</p>

</li>
<li><p>Admin tool lists that include the number &quot;9&quot; in the corner of a table of items is now properly orange instead of green. Reported by Ho Yin Au. [David]</p>

</li>
<li><p>Bricolage works with Perl 5.6.x again, although it&#39;s pretty strongly deprecated. Perl 5.8.0 or later is required for character set conversion and if any content uses characters outside of US ASCII. Thanks to John Greene for the spot! [David]</p>

</li>
<li><p>Image files uploaded in formats not recognized by Image::Info no longer trigger an error. Reported by Alexander Ling. [David]</p>

</li>
<li><p>Changing the cover date of a media document once again correctly updates the primary URI of the media document. Reported by Serge Sozonoff. [David]</p>

</li>
<li><p>Fixed API that was causing no elements to be returned on &quot;Add sub-elements&quot; page, when &quot;Filter by site context&quot; was turned on. [Jo&atilde;o Pedro]</p>

</li>
<li><p>When the SOAP server serializes and deserializes element templates, it now correctly identifies the element by its key name, rather than its name. Thanks to Jo&atilde;o Pedro for the spot! [David]</p>

</li>
<li><p>The template profile&#39;s &quot;cheat sheet&quot; of the subelements of an element now correctly display subelement key names instead of munging element names, as was required before version 1.7.0. [Jo&atilde;o Pedro]</p>

</li>
<li><p><code>Bric::SOAP::Category-&gt;list_ids</code> now converts site names to site IDs. [Jo&atilde;o Pedro]</p>

</li>
<li><p><code>Bric::Util::Burner-&gt;preview</code> once again defaults to previewing in an asset&#39;s primary output channel instead of using the element&#39;s primary output channel. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Added <code>first_publish_date</code> attribute to the SOAP input and output for stories and media. [David]</p>

</li>
<li><p>The category SOAP class now correctly calls <code>lookup()</code> with the site ID to prevent multiple categories with the same names but in different sites from being looked up. [Jo&atilde;o Pedro]</p>

</li>
<li><p>User overrideable preferences are now properly checked for permissions to allow users with READ permission to a user to see the permissions. [David]</p>

</li>
<li><p>Users can now edit their own user-overrideable preferences. [David]</p>

</li>
<li><p>Group management now works more correctly in user profiles where users have on READ access to the user object. [David]</p>

</li>
<li><p>Removed queries added in 1.7.2 that were running at Bricolage startup time. They could cause DBI to cache a database handle and return it after Apache forks, leading to strange errors such as &quot;message type 0x49 arrived from server while idle&quot;, and occaisionally a frozen server. [David]</p>

</li>
</ul>

<h1 id="Version-1.7.3-2004-03-01-">Version 1.7.3 (2004-03-01)</h1>

<h2 id="New-Features8">New Features</h2>

<ul>

<li><p>The virtual FTP server now moves templates into workflow when they&#39;re uploaded and puts them into the user&#39;s sandbox. This behavior allows the user to test the template changes without imposing possible bugs upon other Bricolage users. This approach is much safer than the previous behavior, which simply checked in and deployed a template upon upload. Templates can still be deployed via the virtual FTP server by appending &quot;.deploy&quot; to their names. The original behavior of always deploying templates upon upload can be restored by enabling the <code>FTP_DEPLOY_ON_UPLOAD</code> <i>bricolage.conf</i> directive. [David]</p>

</li>
<li><p>Added <code>ANY</code> function to be used with select parameters to story, media, and template (formatting) list. Pass a list of values to this function to have any of of them match for a given parameter. This is especially useful for matching on, say, a list of URIs or category IDs. This function is automatically available in templates. [David]</p>

</li>
<li><p>Added a feature that counts characters used in a textarea subelement on the fly. It displays this figure and the number of characters left, immediately above the textarea. This feature is enabled when the Max size attribute for the textarea is given a non zero value when adding it to the element profile stage. The JavaScript will also not allow you to have more than max size characters in the textarea by truncating the data to that number of characters every time someone adds another character beyond the maximum. [Paul Orrock/Digital Craftsmen]</p>

</li>
<li><p>Added a feature to display image thumbnails in the search results and active view for media objects that are image objects. This feature uses the Perl module Imager from CPAN and the relevant image library for each format you want to display. It can be turned on or off using the <code>USE_THUMBNAILS</code> <i>bricolage.conf</i> directive. See <a rel="section" href="../../../2.0/api/Bric/Biz/Asset/Business/Media/Image.html" name="Bric::Biz::Asset::Business::Media::Image">Bric::Biz::Asset::Business::Media::Image</a> for more information. [Paul Orrock/ Digital Craftsmen]</p>

</li>
</ul>

<h2 id="Improvements32">Improvements</h2>

<ul>

<li><p>The <i>bric_media_upload</i> contributed script now provides a more meaningful error message when it can&#39;t find <i>bric_soap</i>. [Dave Rolsky]</p>

</li>
<li><p>The <i>bric_dist_mon</i> <code>-U</code> option no longer requires that &quot;/dist/&quot; be at the end of the URL. If &quot;/dist/&quot; is missing, <i>bric_dist_mon</i> will append it. [David]</p>

</li>
<li><p>More story, media, and template query optimization. [David]</p>

</li>
<li><p>The story, media, and template queries now use aggregates to create arrays of group IDs, instead of returning a separate row for each individual group ID. Since all story, media, and template objects are now returned in single rows instead of potentially many rows, this greatly cuts down on the overhead of fetching data from the database. Suggested by Josh Berkus; implementation help from David Fetter. [David]</p>

</li>
<li><p>Thanks to the aggregation of group IDs into a single row for each story, media and template object, the <code>Offset</code> and <code>Limit</code> parameters to the <code>list()</code> methods of the story, media, and template (formatting) classes are now handled by the database back end, instead of in Perl space. This makes using these parameters much more efficient.</p>

</li>
<li><p>Added <code>-k</code> option to <i>bric_ftpd</i> to kill a currently running virtual FTP server. This is made possible by the addition of the new <code>FTP_PID_FILE</code> <i>bricolage.conf</i> directive. [David]</p>

</li>
<li><p>Asset groups associated with categories are now activated or deactivated whenever their corresponding categories are now activated or deactivated. This prevents them from showing up in the permissions interface. [David]</p>

</li>
<li><p>Added a check box to the permissions interface to enable the display of inactive groups. This is primarily so that permissions can be modified on inactive category groups, since they still affect access to any documents and templates in those categories, even after they&#39;re deactivated. [David]</p>

</li>
<li><p>Updated documentation to reflect the reality that one should really only use Perl 5.8.0 and later if one needs to use any characters outside of ASCII. [Andrea Rota]</p>

</li>
<li><p>Added <code>FTP_UNLINK_BEFORE_MOVE</code> <i>bricolage.conf</i> directive. This forces the FTP mover to unlink an older version of a file before renaming the new version to that name. This is necessary for some FTP servers that won&#39;t disallow renaming a file to replace an existing file. [Andrea Rota]</p>

</li>
<li><p>Updated zh-cn and zh-tw localizations, translating all untranslated messages and JavaScript messages. [Kang-min Liu]</p>

</li>
<li><p>Relabeled the &quot;Pre&quot; and &quot;Post&quot; attributes of output channels as &quot;URI Prefix&quot; and &quot;URI Suffix&quot;, respectively. [Serge Sozonoff]</p>

</li>
<li><p>Added <code>get_element()</code> method to Bric::Biz::Asset::Business and deprecated the <code>get_tile()</code> method. This will make things a bit more consistent for template developers, at least. [David]</p>

</li>
<li><p>Added <code>primary_category_id</code> parameter to the story class&#39; <code>list()</code> method. [David]</p>

</li>
<li><p>Updated the German localization. [Thorsten Biel]</p>

</li>
<li><p>Users can no longer sneakily add subelements for which they do not have at least READ permission to the corresponding element via the Super Bulk Edit. Reported by Patrick Walsh. [David]</p>

</li>
<li><p>The list of output channels available to be included in an output channel now has the name of the site with which each is affiliated listed as well. This is to prevent confusion between output channels with the same names in different sites. [David]</p>

</li>
<li><p>Changed the vertical alignment of the labels for textarea fields in the story profile to be consistent with the labels on the element profile. i.e. top aligned. [Paul Orrock/Digital Craftsmen]</p>

</li>
<li><p>Made the default installed &quot;Photograph&quot; and &quot;Illustration&quot; media document types true image objects, with autopopulated fields for height, width, etc. Suggested by Simon Wilcox. [David]</p>

</li>
<li><p>Changed the default value of the <code>SMTP_SERVER</code> <i>bricolage.conf</i> directive to localhost. This has a much greater chance of working than defaulting to the value of the <code>VHOST_SERVER_NAME</code> directive. [David]</p>

</li>
<li><p>Eliminated the term &quot;Asset Type&quot; from the UI, replacing it with &quot;Element&quot;, &quot;Story Type Element&quot;, or &quot;Media Type Element&quot;, as context demands. [David]</p>

</li>
<li><p>The Contributor manager no longer presents a &quot;New&quot; link if the Contributor Type on which the contributor is based has no custom fields. This will prevent folks from creating new contributor roles in the UI only to find that Bricolage hasn&#39;t created them because there are no custom fields. [David]</p>

</li>
<li><p>In the formBuilder interface used by the Element and Contributor Type profiles, the default maximum length of text and textarea fields is now &quot;0&quot;, or unlimited. [David]</p>

</li>
<li><p>When publishing from a publish desk, you can now uncheck related assets in order to not publish them. You can also unset the <code>PUBLISH_RELATED_ASSETS</code> <i>bricolage.conf</i> directive to never publish related assets. [Scott]</p>

</li>
</ul>

<h2 id="Bug-Fixes30">Bug Fixes</h2>

<ul>

<li><p>The virtual FTP server now correctly creates a utility template when a template with an unknown name is uploaded. [David]</p>

</li>
<li><p>The virtual FTP server now pays proper attention to all permissions. [David]</p>

</li>
<li><p>A number of upgrade script annoyances were cleared up. [David]</p>

</li>
<li><p>The <code>simple</code> parameter to the Media class&#39; <code>list()</code> method works again. As a result, so does &quot;Find Stories&quot; in the UI. [David]</p>

</li>
<li><p>The de-de localization library has been fixed so that it now works. [David]</p>

</li>
<li><p>Filter by site context now works. &#39;All sites&#39; context now returns results from all sites instead of none. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Several Alert Type fixes. Rule regular expression matching (=~, !~) now handles patterns containing slashes (important for URIs, for example). Attributes no longer show up as stringified hash references in subject or message variable substitution. <code>$trig_password</code> was removed from the Profile as it caused an error and was useless anyway. And finally, duplicate and spurious attributes were removed from the rules and message variable lists. [Scott &amp; David]</p>

</li>
<li><p>Fixed Template Element list, where container elements appeared twice. [Jo&atilde;o Pedro]</p>

</li>
<li><p>The deletion of a site now properly resets the workflows to be displayed in the side navigation layer. [David]</p>

</li>
<li><p>Changes to site settings are now correctly reflected in the UI for all users as soon as they are made. [David]</p>

</li>
<li><p>New media documents no longer attempt to validate URI uniqueness until a file has been uploaded. [David]</p>

</li>
<li><p>Autopopulated fields in media elements can once again have their values fetched in templates. This problem was due to bad key names being created for new image elements created after upgrading to 1.7.0. [David]</p>

</li>
<li><p>The workflow profile no longer displays deactivated sites in the site select list. Thanks to Serge Sozonoff for the spot. [David]</p>

</li>
<li><p>The upgrade script that adds the <code>first_publish_date</code> attribute to the database now properly sets that date for existing assets, no matter how many &quot;publish&quot; events have been logged. There should be only one, but some systems apparently have more. [Thorsten Biel]</p>

</li>
<li><p>Media, Story, and Template groups now properly display all of the permissions that can be granted to user groups to access them. [David]</p>

</li>
<li><p>The &quot;Next&quot; button in the Element Type profile now correctly loads the next page of the profile instead of returning to the manager. [David]</p>

</li>
<li><p>Fixed URI uniqueness upgrade scripts, which were having problems with PostgreSQL permissions. [David]</p>

</li>
<li><p><code>make clone</code> works again. [David]</p>

</li>
<li><p>Fixed database building installer scripts to use the <code>$PGHOST</code> environment variable when it has been explicitly set to &quot;localhost&quot;, both to override existing instances of that variable on a system, and to allow tunneling to work properly. [Thorsten Biel]</p>

</li>
<li><p>Distribution jobs can be edited via the UI again. Thanks to Marshall Roch for the spot. [David]</p>

</li>
<li><p>Publishes once again work when the &quot;Date/Time Format&quot; preference is set to something other than ISO-8601. Reported by Marshall Roch. [David]</p>

</li>
<li><p><code>bric_dist_mon</code> now <i>correctly</i> appends &quot;/dist/&quot; to the end of the server URL if it is not already appended. Reported by Marshall Roch. [David]</p>

</li>
<li><p>If a desk is in a template workflow and a story or media workflow, and you attempt to publish a media or story document from that desk in the context of the template workflow, it will now properly publish the story or media document instead of throwing an error. Reported by Serge Sozonoff. [David]</p>

</li>
<li><p>Fixed previewing with multiple OCs. [Serge Sozonoff]</p>

</li>
<li><p>Fixed a bug in <code>bric_soap story create/update</code> caused by refactoring in version 1.7.0. Found by David during a demo. [Scott]</p>

</li>
<li><p>An attempt to preview a story for which no template exists now gives a friendly error message again. This was broken by the change in 1.7.2 that made the Mason burner use document templates as true dhandlers. [Dave Rolsky]</p>

</li>
<li><p>The workflow menus in the side navigation layer no longer disappear after a server restart. Reported by Ben Bangert. [David]</p>

</li>
<li><p>The Mason burner&#39;s special <code>&lt;%publish&gt;</code>, <code>&lt;%preview&gt;</code>, and <code>&lt;%chk_syntax&gt;</code> tags now work as advertised. Reported by Ben Bangert. [David]</p>

</li>
<li><p>Publication of stories and media that automatically schedule expiration jobs no longer causes an error. Reported by Marshall Bloch. [David]</p>

</li>
</ul>

<h1 id="Version-1.7.2-Kat-2004-02-12-">Version 1.7.2 &quot;Kat&quot; (2004-02-12)</h1>

<h2 id="New-Features9">New Features</h2>

<ul>

<li><p>Bricolage now has a much more robust security policy. Users with permission to edit various objects and groups in the administrative interface can no longer increase their permissions. Nor can they manage the membership of groups of which they are not members or do not have EDIT access to the members. All this is to prevent users from giving themselves higher permissions. [David]</p>

</li>
<li><p>Added <code>publish_another()</code> method to Bric::Util::Burner. This method publishes a document other than the one currently being published. This is useful when a template for one document type needs to trigger the publish of another document. [David]</p>

</li>
<li><p>Added new permissions &quot;RECALL&quot; and &quot;PUBLISH&quot;. These permissions apply only to asset groups, including desks, categories, and workflows. Now users must have RECALL permission to recall assets from the library and bring them into workflow, and PUBLISH permission to publish assets. This should make it much easier to create more flexible permissions to manage approval processes. [David]</p>

</li>
<li><p>Bricolage now supports per-user preferences. Admins can mark a preference as overrideable, which allows users to set this preference to their preferred value. [Dave Rolsky]</p>

</li>
<li><p>The character set and language preferences have been moved into the database, so that these can be overridden by individual users if needed. [Dave Rolsky]</p>

</li>
<li><p>Added <code>--published-only</code> option to <i>bric_soap</i> and <i>bric_republish</i> so that the last-published version of a document can be republished, rather than the current version. [Scott]</p>

</li>
<li><p>Added Bric::Util::Job::Pub. Publication can now be placed into a queue and deferred until a scheduled time, instead of burning on command and distributing later, Bricolage will now burn a story at the time of the scheduled distribution. [Mark]</p>

</li>
<li><p>Added the <code>bric_queued</code> daemon to take advantage of the new publication scheduling of Bric::Util::Job::Pub. Together with the use of a carefully tuned instance of Bricolage, these new features allow the Bricolage administrator to control the amount of system resources given over to publishing. [Mark]</p>

</li>
<li><p>German localization completed. [Thorsten Biel]</p>

</li>
<li><p>Added <code>get_parent()</code> method to Bric::Biz::Asset::Business::Parts::Tile. This simplifies getting access to a parent element in an element template. [David]</p>

</li>
<li><p>Added User and Desk (asset) modules to the SOAP API, added asset commands to the Workflow module, and made corresponding changes to bric_soap. [Scott]</p>

</li>
<li><p>Added <code>burn_again</code> attribute to the Mason burner. This method can be called from within a template to force the burner to burn the current page again, creating a new file. This can be useful for creating multi-file output without extra paginated subelements. [David]</p>

</li>
<li><p>Added zh-cn localization, with translation based on zh-tw. [Kang-min Liu]</p>

</li>
</ul>

<h2 id="Improvements33">Improvements</h2>

<ul>

<li><p>A field that is both required and repeatable now allows instances of the field after the first instance to be deleted. Setting a field to required essentially means that one must always be present in the UI. [David]</p>

</li>
<li><p>HTML::Template and Template Toolkit are now optional. If they&#39;re not installed on your system, they won&#39;t be loaded by Bricolage. [David]</p>

</li>
<li><p>The default &quot;Story Editors,&quot; &quot;Media Producers,&quot; and &quot;Template Developers&quot; user groups now have READ permission to the members of the &quot;All Sites&quot; group so that they can properly select a site context and gain access to the workflows in their site context. [David]</p>

</li>
<li><p>A number of improvements for the <i>bric_media_upload</i> contrib script:</p>

<dl>

<dt>Creates intermediate categories if needed.</dt>
<dd>

</dd>
<dt>Added a <code>--skip-existing</code> directive.</dt>
<dd>

</dd>
<dt>Added a <code>--media-info</code> directive.</dt>
<dd>

</dd>
</dl>

<p>See the script&#39;s usage info for details. [Simon Wilcox]</p>

</li>
<li><p>Fixed upgrade scripts to be more intelligent in their handling of transactions. They no longer allow SQL errors without failing the upgrade. The upgrade scripts have also been updated to ensure successful upgrades to Bricolage installations as far back as 1.4.0. [David]</p>

</li>
<li><p><code>make upgrade</code> now suggests that the user run <code>make clone</code> on the existing installation, and asks the whether to continue or not. This is to encourage folks to have a good backup before upgrading, in case the upgrade fails. [David]</p>

</li>
<li><p>Added <code>element_key_name</code> parameter to the <code>list()</code> method of the story, media, and formatting classes. This makes it easier to use the name of a story type element, media type element, or template element to search for assets, rather than the <code>element__id</code> parameter, which isn&#39;t as friendly. [David]</p>

</li>
<li><p>Added &quot;Filter by Site Context&quot; preference. When active, search results only return assets relative to the site context instead of all the sites the user has access to [Jo&atilde;o Pedro]</p>

</li>
<li><p>The Mason burner now uses document templates as true dhandlers, enabling full Mason-style inheritance from autohandlers to work properly. [David &amp; Dave Rolsky]</p>

</li>
<li><p>&quot;All *&quot; groups can now be accessed via the Group Manager. Their names and memberships cannot be edited, but their permissions can. Inspired by a bug report from Patrick Walsh. [David]</p>

</li>
<li><p>Queries for stories, media, and templates have been greatly optimized. Thanks to a large database from <i>The Register</i> and query optimization from Josh Berkus (under sponsorship from WHO) and Simon Myers of GBDirect, searches for stories in the UI are now 10-40 times faster than they were before (depending on the version of PostgreSQL you&#39;re running). [David]</p>

</li>
<li><p>Added the <code>story.category</code> parameter to the <code>list()</code> method of Bric::Biz::Asset::Business::Story. Pass in a story ID, and a list of stories in the same categories as the story with that ID will be returned, minus the story with that ID. This parameter triggers a complex join, which can slow the query time significantly on underpowered servers or systems with a large number of stories. Still, it can be very useful in templates that want to create a list of stories in all of the categories the current story is in. But be sure to use the &lt;Limit&gt; parameter! Thanks to Josh Berkus for his help figuring out the query syntax. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes31">Bug Fixes</h2>

<ul>

<li><p>The &quot;Checkout&quot; checkbox is no longer missing in the Find interface for documents and templates that are already in workflow. [David]</p>

</li>
<li><p>Category groups can be edited again. Reported by Alexander Ling. [David]</p>

</li>
<li><p>Elements can be edited again. Thanks to Alexander Ling for the spot! [David]</p>

</li>
<li><p>Element fields can be edited again without encountering the &quot;called the removed method &#39;get_name&#39;&quot; error. Reported by Alexander Ling. [David]</p>

</li>
<li><p>Improved the upgrade script for converting field definitions to use key names, thanks to reports from Nate Perry-Thistle. [David]</p>

</li>
<li><p>Made the index on field key names case-insensitively unique. [David]</p>

</li>
<li><p>Restored category asset group permissions in user group profiles. [David]</p>

</li>
<li><p>Templates can be deleted again. Thanks to Adeola Awoyemi for the spot! [David]</p>

</li>
<li><p>Stories and media with non-unique URIs can now be deleted. Reported by Simon Wilcox. [David]</p>

</li>
<li><p>Checkin and Publish once again works in the media profile. Thanks to Alexander Ling for the spot. [David]</p>

</li>
<li><p>Adding users to any of the default site user permission groups no longer incorrectly allow those users to select that site for their context. Reported by Alexander Ling. [David]</p>

</li>
<li><p>The inline &quot;Bulk Edit&quot; feature in story and media profiles works again. Thanks to Neal Sofge for the spot! [David]</p>

</li>
<li><p>Fixed 1.7.0 upgrade scripts that create key names to better handle key name conflicts. Thanks to Nate Perry-Thistle for having an installation that generated such conflicts. [David]</p>

</li>
<li><p>Attempting to create a destination with the same name as an existing or deleted destination no longer causes an SQL error. Thanks to Simon Wilcox for the spot! [David]</p>

</li>
<li><p>Templates are now correctly saved to the user&#39;s sandbox when &quot;Save and Stay&quot; is pressed. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Select lists now correctly save their states so that, for example, dropdown menus in New Story remember the element and category that was selected last time. [Scott]</p>

</li>
<li><p>Group membership now correctly shows the site name for each object when there is more than one site in the installation. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Sites can now be disassociated with elements. Reported by Alexander Ling. [David]</p>

</li>
<li><p>Redirects during previews work again. [David]</p>

</li>
<li><p>The virtual FTP server works again for the first time since before the release of 1.7.0. Now when you log in to the FTP server, the root directory will contain a list of sites. When you change directories into one of the site directories, you&#39;ll see a list of the output channels in that site. [David]</p>

</li>
<li><p>The virtual FTP server no longer displays output channels or categories (or sites) that the user does not have at least READ permission to access. [David]</p>

</li>
</ul>

<h1 id="Version-1.7.1-2003-11-30-">Version 1.7.1 (2003-11-30)</h1>

<h2 id="Improvements34">Improvements</h2>

<ul>

<li><p>The members of the &quot;All&quot; groups are prevented from being changed in the callbacks now, as well as in the interface, where a JavaScript function had been preventing it. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes32">Bug Fixes</h2>

<ul>

<li><p>Passwords can be changed again. [Mike Slattery]</p>

</li>
<li><p>It is now virtually impossible to create media type or story type elements without site and output channel associations. This should eliminate errors when users try to create documents based on types without output channel associations. [David]</p>

</li>
<li><p>The &quot;Output Channel&quot; item for templates on desks now displays properly. [David]</p>

</li>
<li><p>Eliminated bogus &quot;Use of element&#39;s &#39;name&#39; field is deprecated&quot; warnings. Key names are allowed to have digits and underscores, and we weren&#39;t consistent about that. [David]</p>

</li>
<li><p>The <code>display_element()</code> method in the Mason burner once again passes component arguments on to components. And now, so does <code>sdisplay_element()</code>. [David]</p>

</li>
<li><p>Fixed <i>favicon.ico</i> code so that the browser and server don&#39;t go into an infinite loop with redirects of redirects. The <i>favicon.ico</i> still doesn&#39;t pop up in the location field in my browser, but it does display properly if I point my browser at it. [David]</p>

</li>
<li><p>An attempt to create a document with the same URI as an existing document no longer litters the database with broken stories. Thanks to Arthur for the spot. [David]</p>

</li>
<li><p>Redirection after some publishes and previews works again, instead of returning a text page to the browser. [David]</p>

</li>
<li><p>Now displaying the name of the site each story and media document is in in Find Stories and Find Media. Suggested by Arthur. [David]</p>

</li>
<li><p>A number of fixes for the <i>bric_media_upload</i> contrib script:</p>

<dl>

<dt>Made it work with the 1.7.0 XML Schema.</dt>
<dd>

</dd>
<dt>Fixed a bug in its use of File::Find.</dt>
<dd>

</dd>
<dt>Fixed problem in calculating category names when given a directory to upload.</dt>
<dd>

</dd>
<dt>Added <code>--bric_soap</code> and <code>--site</code> options.</dt>
<dd>

</dd>
</dl>

<p>See the script&#39;s usage info for details. [Dave Rolsky]</p>

</li>
<li><p>Changing a media item&#39;s category and then saving caused an error. [Dave Rolsky]</p>

</li>
<li><p>Changing a media document&#39;s cover date no longer causes the URI to disappear. Thanks to Dave Rolsky for the spot. [David]</p>

</li>
<li><p>Attempting to preview a story for which there are no associated destinations no longer causes the error &#39;Can&#39;t call method &quot;ACCESS&quot; without a package or object reference&#39;. Thanks to Earle Martin for the spot! [David]</p>

</li>
<li><p>Added <code>output_channel_id</code> parameter to the <code>list()</code> method of Bric::Biz::Site in order to prevent sites without output channel associations from being listed in the select list for story type and media type elements. [David]</p>

</li>
<li><p>When a document fails to publish because there are no destinations configured, the UI no longer displays a message saying that it was published. [David]</p>

</li>
<li><p>Fixed page logging so that redirects to the page before the current page can work correctly. It was most noticeably broken when trying to associate a contributor with a document. [David]</p>

</li>
<li><p>The upgrade process no longer moves media document files to where Bricolage can&#39;t find them. If this happened to you, just <code>mv $BRICOLAGE_ROOT/comp.old/data $BRICOLAGE_ROOT/comp</code>. [David]</p>

</li>
<li><p>Performing an action in the contributor and category association interfaces in the story and media profiles no longer causes an empty search to be performed and return all contributors or categories. This could be a pain for organizations with 1000s of contributors or categories. Thanks to Scott for the report! [David]</p>

</li>
<li><p>The Key Name field in the element profile is no longer editable. Only new elements can type in the key name field. Thanks to Arthur for the spot! [David]</p>

</li>
<li><p>The Template toolkit burner now correctly uses element key names instead of names to find corresponding templates. [David]</p>

</li>
<li><p>Management of user groups in a double list manager UI no longer causes an SQL error. Spotted by Alexander Ling. [David]</p>

</li>
<li><p>Sites added to a site group will now be listed as members of the site group in the site group&#39;s profile. Thanks to Alexander Ling for the spot. [David]</p>

</li>
<li><p>Improved permission checking in the virtual FTP server. [David]</p>

</li>
<li><p>Uploading a new version of a media file did not change the path to the media file stored in the database, unless the file name of the media was also changed. [Dave Rolsky]</p>

</li>
</ul>

<h1 id="Version-1.7.0-2003-10-22-">Version 1.7.0 (2003-10-22)</h1>

<h2 id="New-Features10">New Features</h2>

<ul>

<li><p>Added multisite support. Now all stories, media, output channels, templates, categories, and workflows may be associated with different sites, and even have the same names in different sites. This simplifies the management of multiple Web sites with Bricolage. Story type and media type elements may be shared between sites. Funded by Portugal Telecom Multimedia. [David, Arthur, Garth, &amp; Jo&atilde;o Pedro]</p>

</li>
<li><p>Added document aliasing. Stories and media in a site may now be aliased and published in another site, as long as the elements on which they are based are shared between sites. Control over the content of aliased documents remains in the original site, thus ensuring the editorial integrity of the document for that site. Funded by Portugal Telecom Multimedia. [David]</p>

</li>
<li><p>Changed element attribute &quot;name&quot; to &quot;key name&quot; to emphasize its uniqueness within an element. Also changed the &quot;Display Name&quot; to &quot;Label&quot; [Garth]</p>

</li>
<li><p>Added a &quot;key_name&quot; attribute to elements as the system-wide unique key for each element, rather than the name. The name is now used as a label. Note that the key name only allows certain characters, as it is used to name the template files that format the element. This makes the <code>has_name()</code> method a bit simpler -- and it can in fact be ignored in favor of <code>$element-&gt;get_key_name eq $key_name</code>. Thus there may be some warnings if older name values are passed to <code>has_name()</code>. [Garth]</p>

</li>
<li><p>Refactored Bric::Biz::Keyword. It is now more compliant with the standard API as defined in other classes. Also added support for keyword groups so that we can create a keyword manager. [David]</p>

</li>
<li><p>Added <code>$burner-&gt;sdisplay_element</code> method to Bric::Util::Burner. This is a <code>sprintf</code>-style version of <code>$burner-&gt;display_element</code>. [Scott]</p>

</li>
<li><p>Added <code>get_data_element()</code> method to Bric::Biz::Asset::Business::Parts::Tile::Container. This allows template writers to more easily find a single data element object, rather than just the value of a single data element (as <code>get_data()</code> does). Inspired by a comment from Bill Cappel. [David]</p>

</li>
<li><p>Added the <code>YEAR_SPAN_BEFORE</code> and <code>YEAR_SPAN_AFTER</code> <i>bricolage.conf</i> directives. These directives control how many years before and after the current year to display in the list of years in the date and time select widget. The default values are 10 for each, meaning that if the current year is 2003, then the date span will be from 1993 to 2013.</p>

</li>
<li><p>Added the <code>ENABLE_SFTP_V2</code> <i>bricolage.conf</i> directive to make SSH protocol 2 be tried first. [Scott]</p>

</li>
<li><p>Added &quot;Email&quot; action, which can be used to email the files generated by a publish to one or more email addresses. Funded by ETonline. [David]</p>

</li>
<li><p>Callbacks were moved from Mason components to modules based on Params::Callback and managed by MasonX::Interp::WithCallbacks. This makes the UI layer more responsive and enhances maintainability. [Scott]</p>

</li>
<li><p>Optimized performance of URI uniqueness checks by adding database tables to do the job, rather than constructing the URIs for all other documents in the same categories as the document being checked. This was the last major bottleneck affecting SOAP performance, as well as document editing in general. Funded by Kineticode. [David]</p>

</li>
<li><p>Added <code>instance()</code> class method to Bric::Util::Language, so that non-OO functions can get access to the current language handle. [David]</p>

</li>
<li><p>Added <code>output_channel_id</code> parameter to the <code>list()</code> methods of Story and Media to enable querying for documents in output channels other than the primary output channel. Based on a patch from Clive Jones. [David]</p>

</li>
<li><p>Lots of notification message localization fixes. [Radu Greab]</p>

</li>
<li><p>Status message localization fixes [David]</p>

</li>
<li><p>Added &quot;search by element type&quot; to Advanced Search of the Find Stories and Find Media interfaces. [Scott]</p>

</li>
<li><p>Added a preference to select Simple or Advanced search in Find Stories/Media the default search when you go to those screens. [Scott]</p>

</li>
<li><p>Added &quot;Select all&quot; button to select all the checkboxes on publish desks or My Workspace. [Scott]</p>

</li>
<li><p>Added Keyword Management interface to centrally manage keywords. [Scott]</p>

</li>
<li><p>Added <code>--workflow</code> and <code>--desk</code> options to create and update commands of <code>bric_soap</code>, so that assets can be moved to a desk at the same time as creation or updation. [Scott]</p>

</li>
<li><p>Added Group Membership sections to most of the profiles. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Some optimizations to Bric::SOAP::(Media|Story|Template) classes. [Scott]</p>

</li>
<li><p>Added HTML::Mason Custom tags support, allowing template developers to write code blocks that are context sensitive. See <a rel="section" href="../../../2.0/api/Bric/AdvTemplates.html" name="Bric::AdvTemplates">Bric::AdvTemplates</a> for documentation on this. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Added new page extension support to the burner, which allows template developers to set string extensions to use for successive file names, rather than the traditional use of numeric file name extensions for successive file names. [Clive Jones]</p>

</li>
<li><p>Added &quot;Text to search&quot; option in the Advanced search of Media and Stories to search for documents based on the contents of their field. [Jo&atilde;o Pedro]</p>

</li>
<li><p>All preview links are now generated by a single widget. This widget adds the story or media URI to the &quot;title&quot; attribute of the link tag (which is modern browsers will automatically work as a roll-over tooltip), makes the story or media URI copyable (by relying on JavaScript to actually open a new window for the preview), and manages selecting an output channel in which to preview a story. [David]</p>

</li>
<li><p>Made User Group Permissions UI wieldy with larger numbers of users by adding a select list to choose which type of Permission to look at. [Scott]</p>

</li>
<li><p>Added ability to preview stories in a selection of output channels in the View (read-only) story profile. [David]</p>

</li>
<li><p>Combined the asset &quot;Find&quot; managers into a single component, thus eliminating a lot of redundant code. [David]</p>

</li>
<li><p>Added <code>contrib_id</code> parameter to the <code>list()</code> methods of Bric::Biz::Asset::Business::Story and Bric::Biz::Asset::Business::Media to return a list of story or media documents associated with a given contributor. [David]</p>

</li>
<li><p>Switched Bric::Util::CharTrans from using Text::Iconv to Encode, thus removing the dependency on a C library (libiconv). Note that this has changed the API of Bric::Util::CharTrans. Its <code>to_utf8()</code> and <code>from_utf8()</code> methods now always convert the argument passed in in place. They did this before for references, but now they do it for plain strings, as well. Also note that use of character translation also now requires Perl 5.8.0 or later. [Scott &amp; David]</p>

</li>
<li><p>Factored out some of the SOAP asset classes into Bric::SOAP::Asset. [Scott]</p>

</li>
<li><p>Added MediaType, Site, and Keyword SOAP modules. [Scott]</p>

</li>
<li><p>Changes to a story&#39;s slug, cover date, or primary category will now be displayed before the story is saved. Suggested by a coworker of Andy Baio. [David]</p>

</li>
<li><p>The Find Stories, Find Media, and Find Templates interfaces now disallow searching for and returning all of the stories and media in the database. This will help prevent thousands or tens of thousands of assets from being displayed in the UI and sucking up all the resources on the server. [David]</p>

</li>
<li><p>Added &quot;element&quot; attribute to Bric::Util::Burner so that <code>$burner-&gt;get_element</code> should always return the element currently being burned. [David]</p>

</li>
<li><p>Added burner-specific exceptions with context information, including current output channel, current category, and current element. [David]</p>

</li>
<li><p>Added a <code>throw_error()</code> method to Bric::Util::Burner so that template developers can easily throw an exception that their users will see in the UI. [David]</p>

</li>
<li><p>Added <code>best_uri()</code> method to Bric::Util::Burner to return the most appropriate URI (in Bricolage&#39;s opinion) for a document. Mainly useful when multiple sites and document aliases are used. [David]</p>

</li>
<li><p>Greatly simplified burner subclassing by adding a new registration method to Bric::Util::Burner. This cuts down on the number of files that need to be edited to add a new burner. [David]</p>

</li>
<li><p>Moved category selection from Media and Story Profiles into their own separate components so that organizations with hundreds or thousands categories don&#39;t have to load them into a dropdown list every time an asset is edited. The category &quot;browser&quot; uses an interface similar to &#39;Associate Contributors&#39;, which has the advantage of being searchable rather than looking through a &quot;long list of all categories&quot;. This feature can be enabled via the new <code>ENABLE_CATEGORY_BROWSER</code> <i>bricolage.conf</i> directive. [Scott]</p>

</li>
<li><p>Added list paging to Desks and My Workspace. [Scott]</p>

</li>
<li><p>XHTML/CSS-ized desk items. This approach is the future of the Bricolage interface: purely structural HTML, with CSS to create the presentation. Eventually, we&#39;ll be able to have UI preferences to change font sizes or the entire look and feel just by switching style sheets. But for now, this change should help with the display of desks with many items on them, and it should also speed the display of such desks. Turn off the <code>USE_XHTML</code> <i>bricolage.conf</i> directive to get the old desk views back (useful for older browsers). [David]</p>

</li>
<li><p>Added a preference to set the default Story/Media sorting. [Scott]</p>

</li>
<li><p>Added the ability to test templates without having to deploy them by using &quot;template sandboxes&quot; for each template developer. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Added Template Toolkit burner support. [Arthur/Fotango]</p>

</li>
<li><p>Added a <i>bricolage.conf</i> directive, <code>ALLOW_SLUGLESS_NONFIXED</code>, to prevent slugless non-fixed (non-Cover) stories. [Scott]</p>

</li>
<li><p>Added support for installing and upgrading Bricolage with PostgreSQL on a separate host. [Thorsten Biel]</p>

</li>
<li><p>Added context-sensitive help for pages that were missing it. [Scott]</p>

</li>
<li><p><code>make upgrade</code> no longer simply overwrites the contents of the UI component root (<i>$BRICOLAGE_ROOT/comp</i>), but renames it <i>$BRICOLAGE_ROOT/comp.old</i> and writes out a new one. This is both so that deleted UI component files don&#39;t remain behind after an upgrade, and so that users can access any files that they&#39;ve changed in the old component root. Most users can just delete it after upgrading. [David]</p>

</li>
</ul>

<h1 id="Version-1.6.14-2004-05-02-">Version 1.6.14 (2004-05-02)</h1>

<h2 id="Bug-Fixes33">Bug Fixes</h2>

<ul>

<li><p><code>make upgrade</code> once again correctly creates <i>postgres.db</i> if the existing installation doesn&#39;t know the installed version of PostgreSQL. [David]</p>

</li>
<li><p>Adding notes to image, video, or audio media documents no longer causes an error. Reported by Christian Hauser. [David]</p>

</li>
<li><p>Errors in the <code>PERL_LOADER</code> <i>bricolage.conf</i> directive no longer silently fail. [David]</p>

</li>
<li><p>A successful login no longer redirects back to the login page, thus no longer forcing a second redirect in such cases. Reported by Marshall Roch. [David]</p>

</li>
<li><p>The <code>$burner</code> object is now available in Mason template <code>&lt;%once&gt;</code> blocks during the syntax check, although <code>$story</code> and <code>$element</code> are not. All three are in the <code>&lt;%once&gt;</code> block during previews and publishes. This means that they can all be used in a <code>&lt;%once&gt;</code> block like this:</p>

<pre><code>&lt;%once&gt;;
unless ($burner-&gt;get_mode == SYNTAX_MODE) {
    # Do stuff with $story or $element.
}
&lt;/%once&gt;</code></pre>

<p>Reported by Serge Sozonoff. [David]</p>

</li>
</ul>

<h1 id="Version-1.6.13-Tripled-2004-04-10-">Version 1.6.13 &quot;Tripled&quot; (2004-04-10)</h1>

<h2 id="Bug-Fixes34">Bug Fixes</h2>

<ul>

<li><p>Deactivated groups no longer affect permission checking. Discovered thanks to a bug report from Serge Sozonoff. [David]</p>

</li>
</ul>

<h1 id="Version-1.6.12-Tov-2004-04-09-">Version 1.6.12 &quot;Tov&quot; (2004-04-09)</h1>

<h2 id="Bug-Fixes35">Bug Fixes</h2>

<ul>

<li><p>Warnings are no longer fatal. This was only the case ouside of mod_perl, and so was probably quite rare, anyway. [David]</p>

</li>
<li><p>Upgrades no longer cause an error during the execution of <i>inst/db_grant.pl</i>. Reported by Abdul Halim Mazahar. [David]</p>

</li>
<li><p>Alerts once again properly check the attributes of the events that trigger them. Reported by Patrick Walsh. [David]</p>

</li>
</ul>

<h1 id="Version-1.6.11-Green-2004-03-17-">Version 1.6.11 &quot;Green&quot; (2004-03-17)</h1>

<h2 id="Bug-Fixes36">Bug Fixes</h2>

<ul>

<li><p>A checkbox that is unchecked in an element no longer reverts to checked when clicking &quot;Save and Stay&quot;. Reported by Scott Lanning. [David]</p>

</li>
<li><p>Date parameters to the <code>list()</code> methods of the story, media, and template classes are now properly converted to UTC (and the database internal format) before being passed to the database. [David]</p>

</li>
<li><p>Elminated some warnings. Reported by Christian Hauser. [David]</p>

</li>
<li><p>Simplified error handling in the <code>Bric</code> base class and when running outside of <code>mod_perl</code>. [David]</p>

</li>
<li><p>Fixed issue with load order directives in Bricolage dynamic <i>httpd.conf</i> generation. This had caused the <code>PREVIEW_MASON</code> directive to not work in some cases. Incidentally, this change also allows dynamic configuration of mod_perl 1.26 and earlier. [David]</p>

</li>
</ul>

<h1 id="Version-1.6.10-Jump-2004-02-29-">Version 1.6.10 &quot;Jump&quot; (2004-02-29)</h1>

<h2 id="Bug-Fixes37">Bug Fixes</h2>

<ul>

<li><p>Added missing index to the <code>workflow__id</code> column of the <code>story</code>, <code>media</code>, and <code>formatting</code> (template) tables. [David]</p>

</li>
<li><p>Made index on the <code>desk__id</code> column of the <code>story</code>, <code>media</code>, and <code>formatting</code> (template) tables a partial index, since the column will usually be <code>NULL</code>. [David]</p>

</li>
<li><p>Added an index to the description column of the <code>story_instance</code>, <code>media_instance</code>, and <code>formatting</code> (template) tables to speed up simple searches. [David]</p>

</li>
<li><p>Added missing foreign key constraints for the <code>desk_id</code> column of the <code>story</code>, <code>media</code>, and <code>formatting</code> (template) tables. [David]</p>

</li>
<li><p><code>make clone</code> no longer fails when it can&#39;t find <i>httpd.conf</i>, because it no longer looks for it. [David]</p>

</li>
<li><p><code>make clone</code> no longer assumes that the <i>conf</i> directory is in <code>$BRICOLAGE_ROOT</code>, and prompts the user to find out. [David]</p>

</li>
<li><p>Bricolage once again works with Perl 5.6.x and Perl 5.8.1. [David]</p>

</li>
<li><p>Made <i>bric_republish</i> and <i>bric_dev_sync</i> safe to use with <code>https://</code>. [Geoff Richards]</p>

</li>
<li><p>The user object is no longer instantiated from the database every time a user sends a request to Bricolage. It appears that this bit of overhead has unfortunately been imposed on every request since Bricolage 1.0 due to a very stupid typo. [David]</p>

</li>
<li><p>The creation of the Bricolage PostgreSQL user and database during installation no longer complains about usernames or database names with dashes and other non-alphanumeric characters in them. Thanks to Marshall Roch for the spot! [David]</p>

</li>
<li><p>Fixed ancient bug revealed by the release of DBI 1.41. [David]</p>

</li>
<li><p>Photoshop-generated images no longer make Bricolage choke when they&#39;re uploaded to a Media profile that autopopulates fields. Reported by Paul Orrock. [David]</p>

</li>
<li><p>The <code>lookup()</code> method of the story, media, and template classes will now correctly return inactive objects. [David]</p>

</li>
<li><p>Fixed typo of <code>CHECK_FREQUENCY</code> in Bric::Config that made it always use the default of 1. [Scott]</p>

</li>
<li><p>The <code>lookup()</code> method of the story, media, and template classes once again attempt to retrieve objects from the per-request cache before looking them up in the database. [David]</p>

</li>
<li><p>Changed the name of the event logged when templates are checked out from &quot;Template Checked Out Canceled&quot; to the correct &quot;Template Checked Out.&quot; [David]</p>

</li>
</ul>

<h1 id="Version-1.6.9-2004-02-06-">Version 1.6.9 (2004-02-06)</h1>

<h2 id="Bug-Fixes38">Bug Fixes</h2>

<ul>

<li><p>Fixed installation and upgrade scripts to use the same <i>perl</i> binary as was used to execute <i>Makefile.PL</i>. This ensures that all necessary CPAN modules will be correctly installed and located. [Simon Wilcox]</p>

</li>
<li><p>Story profile JavaScript validation works again. Thanks to Simon Wilcox for the spot! [David]</p>

</li>
<li><p>Eliminated the need for the Apache::ConfigFile module, and thus some annoying problems with the CPAN indexer when trying to install it. [David]</p>

</li>
<li><p>Fixed order of SQL statement execution upon installation so that dependencies are properly handled. [Mark]</p>

</li>
<li><p>New file resources created for distribution are now created with the proper media type. [Mark]</p>

</li>
<li><p>The German localization module (Bric::Util::Language::de_de) had the wrong package name, which meant that attempts to use it failed with the error &quot;Can&#39;t locate class method &#39;Bric::Util::Language::de_de::new&#39; via package &#39;Bric::Util::Language::de_de&#39;&quot;. [Dave Rolsky]</p>

</li>
<li><p>Added new path to find PostgreSQL installed by some Debian packages. [Cinly Ooi]</p>

</li>
<li><p>Workflows with special characters such as &quot;+&quot; and &quot;&amp;&quot; now work properly in the side navigation. Thanks to Patrick Walsh for the spot! [David]</p>

</li>
<li><p>Start desks can no longer be removed from workflows. This prevents workflows from having no desks, thus avoiding problems adding desks to such workflows. Reported by Patrick Walsh. [David]</p>

</li>
<li><p>Pushing the cancel button in a desk profile and then in a workflow profile no longer redirects back to the desk profile. [David]</p>

</li>
<li><p>Made publish_date not be empty when publish is done through the SOAP API and no publish_date argument is passed. [Scott]</p>

</li>
<li><p>Fixed CPAN installer to correctly update the list of modules to be installed after a module has been successfully installed. Reported by Perrin Harkins. [David]</p>

</li>
<li><p>Checkout checkboxes no longer appear for assets that users don&#39;t have permission to check out. Thanks to Alexander Ling for the spot! [David]</p>

</li>
<li><p>Bric::Biz::AssetType::Parts::Data&#39;s <code>lookup()</code> method now returns deactivated objects, as it should. Thanks to Nuno Barreto for the spot. [David]</p>

</li>
<li><p>Events with attributes with the same name as attributes of the object the event was triggered on (a common occurrence) no longer confuses the two. Thanks to Todd Tyree for the spot. [David]</p>

</li>
<li><p>Users granted permission to access the members of a group via two user group associations now always get the highest priority permission, as it should be. Thanks to Patrick Walsh for the spot. [David]</p>

</li>
<li><p>Textarea fields in elements no longer lose some of their default data after editing the field in the element manager. Reported by Todd Tyree. [David]</p>

</li>
<li><p>Media assets now properly remember their class, which means that autopopulated fields (such as &quot;height&quot; and &quot;width&quot; for images) are autopopulated when a new image file is uploaded. Thanks to Patrick Walsh for the spot! [David]</p>

</li>
<li><p>Updated Chinese Traditional localization. [Kang-min Liu]</p>

</li>
</ul>

<h1 id="Version-1.6.8-2003-11-29-">Version 1.6.8 (2003-11-29)</h1>

<h2 id="Bug-Fixes39">Bug Fixes</h2>

<ul>

<li><p>Custom select fields now correctly pay attention to the size attribute. Reported by Dave Rolsky. [David]</p>

</li>
<li><p>The element type manager now displays &quot;Subelement&quot; instead of &quot;Story&quot; for subelement element types. Suggested by Dave Rolsky. [David]</p>

</li>
<li><p>Updated to work with PostgreSQL 7.4. [David]</p>

</li>
<li><p>Improved error message in Bric::Util::Trans::SFTP. [David]</p>

</li>
<li><p>It&#39;s possible to create new stories again without running into errors saying that a URI is not unique because the cover date and slug were accidentally excluded from the URI. [David]</p>

</li>
<li><p>Mason story templates now inherit from all category templates, thus enabling the access of <code>&lt;%attr&gt;</code>s and calling of <code>&lt;%method&gt;</code>s in category templates from story templates. [David]</p>

</li>
<li><p>Permission to edit element fields is now based on the permissions granted to edit the elements they belong to. This means that users other Global Admin group members can now edit fields. [David]</p>

</li>
<li><p>Dates are no longer editable if a user doesn&#39;t have permission to edit them. [David]</p>

</li>
<li><p>Users without EDIT access to an element no longer see a link to Edit fields of that element, but a link to View them, instead. They will also no longer see an &quot;Add Subelements&quot; button. [David]</p>

</li>
<li><p>Fixed bug that triggered an invalid error message when a story URI is non-unique. Reported by Kevin Elliott. [David]</p>

</li>
<li><p>Assets with the same IDs but in different classes (media vs. stories vs. templates) no longer prevent each other from being added to a desk that can contain different classes of assets. Thanks to Scott for the spot and doing the research that lead to the replication of the problem. [David]</p>

</li>
<li><p>The Log page no longer improperly redirects to the preview page after a preview. Reported by Simon Wilcox. [David]</p>

</li>
</ul>

<h1 id="Version-1.6.7-2003-10-22-">Version 1.6.7 (2003-10-22)</h1>

<h2 id="Bug-Fixes40">Bug Fixes</h2>

<ul>

<li><p>Fixed <code>bric_soap</code> to accept a <code>--server</code> argument starting with &quot;https&quot;, which is more friendly to an SSI environment. [Geoff Richards]</p>

</li>
<li><p>The PostgreSQL admin username and password arguments were reversed during <code>make upgrade</code>. [Thorsten Biel]</p>

</li>
<li><p>Fixed broken foreign key index on element table. [Dave Rolsky]</p>

</li>
<li><p>Added partial index to speed queries against the job table, and thus to speed distribution. [Mark]</p>

</li>
<li><p>Fixed upgrade module to properly grant the correct Bricolage database user permission to access new tables and sequences. [David]</p>

</li>
<li><p>An upgrade script failure will <i>really</i> now cause <code>make upgrade</code> to halt installation so that any issues are immediately identified and correctable. [David]</p>

</li>
<li><p>Updated slug RegExen. They were a bit too strict, and should be better now, allowing dots, dashes, and underscores. Spotted by Creighton Higgins. [David]</p>

</li>
<li><p>The <code>$name</code> variable no longer shows up twice in the list of available content variables for alert types on media documents. Thanks to Scott for the spot! [David]</p>

</li>
<li><p>Inactive alert types no longer trigger the sending of alerts. Thanks to Scott for the spot. [David]</p>

</li>
<li><p>Added tests for validity of the POD in <i>*.pod</i> files as well as <i>*.pm</i> files. Fixed a few POD typos found as a result. [David]</p>

</li>
<li><p>Fixed <code>element_data_id</code> parameter to Bric::Biz::Asset::Business::Parts::Tile::Data to actually work. Reported by Eldar Kononov. [David]</p>

</li>
</ul>

<h1 id="Version-1.6.6-2003-10-03-">Version 1.6.6 (2003-10-03)</h1>

<h2 id="New-Features11">New Features</h2>

<ul>

<li><p>Added <i>README.Solaris</i>, with thanks to Oscar Sodani and Thorsten Biel.</p>

</li>
</ul>

<h2 id="Bug-Fixes41">Bug Fixes</h2>

<ul>

<li><p>When an asset is published or deployed directly from the asset profile, it is now properly removed from the publish or deploy desk. Reported by Andy Baio&#39;s coworker. [David]</p>

</li>
<li><p>The &quot;desk_id&quot; attribute of assets is now properly cleared when an asset is removed from workflow. [David]</p>

</li>
<li><p>Fixed 1.6.5 upgrade script to look for Bric::Config in the proper location. [David]</p>

</li>
<li><p>Templates now display their output channel associations instead of their element associations on desks. This seems to be more useful, since the element association is usually obvious from the name. [David]</p>

</li>
<li><p>The category URI is now displayed for assets on desks, rather than the name. This is consistent with the display of the category elsewhere. [David]</p>

</li>
<li><p>Elements to which no subelements can be added will no longer display an empty select list and &quot;Add Element&quot; button. [Geoff Richards]</p>

</li>
<li><p><code>Bric::Biz::Asset::Business::Story-&gt;get_secondary_categories()</code> will no longer return categories deleted from the story. Thanks to Scott for the spot. [David]</p>

</li>
<li><p>Removed some unnecessary JavaScript validation. [David]</p>

</li>
<li><p>Bug fix when deploying to multiple output channels. If the output channel IDs matched each other partly, it could cause a file to be removed after it just had been uploaded. [Arthur/Fotango]</p>

</li>
<li><p>Users with CREATE access to a start desk can once again create stories on that desk even when they don&#39;t have CREATE access to &quot;All Stories.&quot; Reported by Simon Wilcox. [David]</p>

</li>
<li><p>Each upgrade script is now run within the confines of a single database transaction. If any database changes within an upgrade script encounter an error, all of the changes in that script will be rolled back. Suggested by Arthur. [David]</p>

</li>
<li><p>An upgrade script failure will now cause <code>make upgrade</code> to halt installation so that any issues are immediately identified and correctable. [David]</p>

</li>
<li><p>An invalid date in a date element field no longer causes an error. Thanks to Arthur for the spot! [David]</p>

</li>
<li><p>With <code>(STORY_URI_WITH_FILENAME</code> enabled and when there is no defined file extension Bricolage now doesn&#39;t insert an ending &#39;.&#39; (dot). [Arthur/Fotango]</p>

</li>
<li><p>Slight fix to virtual FTP server to handle bad FTP clients that try and use directories as files. [Arthur]</p>

</li>
</ul>

<h1 id="Version-1.6.5-2003-09-10-">Version 1.6.5 (2003-09-10)</h1>

<h2 id="Bug-Fixes42">Bug Fixes</h2>

<ul>

<li><p>Previewing stories with related media that have no associated file no longer causes an error. Reported by Kevin Elliott. [David]</p>

</li>
<li><p>Switched to using <code>DBI-&gt;connect_cached()</code> from using our own database connection caching. This change does bump up the minimum required version of DBI to 1.18, though the latest version is always recommended. It&#39;s also the right thing to do. Thanks to Perrin Harkins for the suggestion. [David]</p>

</li>
<li><p>Fixed issue that could cause Bric::Util::DBI to create inconsistent transaction states. Spotted by Rudy Lippan. [David]</p>

</li>
<li><p>Removed passing of DEBUG argument to <code>prepare()</code>, <code>prepare_c()</code> and <code>prepare_ca()</code>, since it hasn&#39;t actually worked in some time, and could potentially change the behavior of the prepare. [David]</p>

</li>
<li><p>Bric::SOAP::Workflow no longer throws an error when its <code>publish_date</code> parameter is undefined. Reported by Kevin Elliott. [David]</p>

</li>
<li><p>Passing an undef via the <code>workflow__id</code> parameters to the <code>list()</code> method of Story, Media, or Template really does again cause Bricolage to correctly return only those assets that are not in workflow. It wasn&#39;t as fixed in 1.6.3 as I had thought. Reported by Kevin Elliott. [David]</p>

</li>
<li><p>Vastly improved the speed of the query that lists events, and added an index to help it along, as well. [Mark]</p>

</li>
<li><p>The list of categories associated with a story is now presented in alphabetical order by URI in the story profile. Suggested by Geoff Richards. [David]</p>

</li>
<li><p>The FTP mover now properly deletes files rather than erroring out. [Clive Jones]</p>

</li>
<li><p>Fixed installer to use PostgreSQL 7.1 syntax to update statistics. [David]</p>

</li>
<li><p>Now setting <code>$PGDATESTYLE</code> environment variable so that PostgreSQL isn&#39;t confused about the date style Bricolage is using. Suggested by Chris Riddoch. [David]</p>

</li>
<li><p>Users without EDIT access to the start desk in a workflow can no longer create assets in that workflow. Nor can they check out assets from the library, as there&#39;s no start desk for them to check them in to. But they can still check them out from other desks that they have EDIT access to. Reported by Rachel Murray. [David]</p>

</li>
<li><p>Time zone issues have been fixed to be more portable. Some platforms that experienced Bricolage unexpectedly shifting cover dates and other dates and times by several hours should no longer see this problem. [David]</p>

</li>
<li><p>Non-existent methods no longer throw &quot;permission denied&quot; exceptions, but the standard Perl &quot;Can&#39;t locate object method&quot; exception. This is to eliminate confusion with permission to access Bricolage objects. [David]</p>

</li>
<li><p>Adding a new element type with the same name as an existing or deleted element type no longer causes an SQL error. Thanks to Gary Gilchrist for the spot. [David]</p>

</li>
</ul>

<h1 id="Version-1.6.4-2003-08-12-">Version 1.6.4 (2003-08-12)</h1>

<h2 id="Bug-Fixes43">Bug Fixes</h2>

<ul>

<li><p>Preview works again. [David]</p>

</li>
</ul>

<h1 id="Version-1.6.3-2003-08-12-">Version 1.6.3 (2003-08-12)</h1>

<h2 id="Bug-Fixes44">Bug Fixes</h2>

<ul>

<li><p>Document and contributor type field information (label, options) is no longer pushed through Locale::Maketext, thus preventing errors when element and contributor type administrators create field options with brackets in them. Reported by Kevin Elliott. [David]</p>

</li>
<li><p>Documents associated with categories that have been deleted will once again work properly. Even though a category may be deactivated, any documents previously put into that category should still work, and still treat the category as a working category. And so they do. Thanks to Kevin Elliott for the spot! [David]</p>

</li>
<li><p>Renamed events for adding fields to elements and contributor types. They were mentioning &quot;attributes,&quot; and now they mention &quot;fields,&quot; instead. [David]</p>

</li>
<li><p>Updated Bric::Admin (<i>INSTALL</i>) to instruct users encountering installation problems to first check the list archives and post to the mailing list before filing a bug. [Cinly Ooi]</p>

</li>
<li><p>Permissions granted on the &quot;All&quot; groups work again. Reported by Kevin Elliott. [David]</p>

</li>
<li><p>Resize now works in super bulk edit. Thanks to Michael G. Kaiser for the spot. [David]</p>

</li>
<li><p>Documented that the <code>list_ids()</code> methods in Bric::Biz::Asset&#39;s subclasses ignore the <code>Order</code> and <code>OrderDiretion</code> parameters and return an unordered list of IDs. Reported by Clive Jones. [David]</p>

</li>
<li><p>The &quot;Add Element&quot; select list in story, media profiles now lists the fields that can be added in the order specified in the element profile, and then the subelements that can be added, instead of mixing up fields and subelements in alphabetical order. Thanks to Jo&atilde;o Pedro for the spot! [David]</p>

</li>
<li><p>When a template is deployed, Bricolage now checks to see if its file name has changed since it was last deployed, and if it has, it deletes the old file. Reported by Kevin Elliott. [David]</p>

</li>
<li><p>Optimized performance of Bric::Dist::Resource queries and wrote lots of tests for them. [David]</p>

</li>
<li><p>When a story or media document is published, Bricolage now looks to see if any files distributed for previous versions of the document are no longer associated with the document, and expires them if they are. It does so on a per-output channel basis, so note that if output channel settings have changed since the document was last published, the expiration may miss some stale files. The same goes for when destinations are changed. But this should cover the vast majority of cases.</p>

</li>
<li><p>Fixed error looking up alert types in the database, which affected the alert type manager on some platforms. Reported by Radu Greab. [David]</p>

</li>
<li><p>Deactivated alert types are once again available via the UI. [David]</p>

</li>
<li><p>Text input fields no longer impose a default maximum field length. This is so that element fields that have their maximum length set to 0 can truly be unlimited in length. Reported by Kevin Elliott. [David]</p>

</li>
<li><p>Template output channel associations no longer trigger an error when importing templates via the SOAP interface. [Clive Jones]</p>

</li>
<li><p>Passing an undef via the <code>workflow__id</code> parameters to the <code>list()</code> method of Story, Media, or Template once again causes Bricolage to correctly return only those assets that are not in workflow. Reported by Kevin Elliott. [David]</p>

</li>
<li><p>Extra blank lines between subelement tags in super bulk edit no longer causes an error. Thanks to Kevin Elliott for the spot! [David]</p>

</li>
<li><p>Searches no longer return unexpected results or all objects when pagination is enabled. Thanks to Kevin Elliott for the spot! [David]</p>

</li>
<li><p>The searches for documents by beginning and ending cover dates were not inclusive of the end date. Now they are! Reported by Kevin Elliott. [David]</p>

</li>
<li><p>Fixed spelling of &quot;contributor&quot; in the description of the contributor type class in the database. Noticed by Radu Greab. [David]</p>

</li>
</ul>

<h1 id="Version-1.6.2-2003-07-28-">Version 1.6.2 (2003-07-28)</h1>

<h2 id="New-Features12">New Features</h2>

<ul>

<li><p>German localization started. [Gerfried Fuchs]</p>

</li>
<li><p>New help pages for the destination, server, and action profiles. [Geoff Richards]</p>

</li>
</ul>

<h2 id="Bug-Fixes45">Bug Fixes</h2>

<ul>

<li><p>Fixed a bug in Bric::SOAP::Media which was causing all media files uploaded with that module to be placed in <code>comp/data/media/$version/</code> rather than <code>comp/data/media/$id/$version/</code>. [Mark]</p>

</li>
<li><p>Fixed SQL bug that might in rare situations cause element output channel associations to become confused. [David]</p>

</li>
<li><p>Fixed issue where new output channels added to a document type element were not always actually saved as a part of that element. [David]</p>

</li>
<li><p>Fixed side navigation spacer graphic to the same width as other such graphics. Helps Chinese Traditional to display more nicely. [Kang-min Liu]</p>

</li>
<li><p>The media simple search now searches by URI again. [Mark]</p>

</li>
<li><p>Now HTML-escaping the contents of the context content displayed for subelements so as to prevent HTML in fields from messing up the display. [Mark]</p>

</li>
<li><p>Fixed installer to again work with versions of PostgreSQL prior to 7.3. Thanks to Marc Hawson for the spot. [David]</p>

</li>
<li><p>Fix for &#39;Can&#39;t call method &quot;out_method&quot; on an undefined value&#39; generated during a burn. [Mark]</p>

</li>
<li><p>Many minor HTML corrections. [Gerfried Fuchs]</p>

</li>
<li><p>Fix for SQL error when searching for media by file name. [David]</p>

</li>
<li><p>Eliminated &#39;Can&#39;t locate object method &quot;redirect&quot; via package &quot;HTML::Mason::Request&quot;&#39; error that caused Bricolage to actually display a generic error page, instead of its custom error page. [David]</p>

</li>
<li><p>Alert types can once again be deleted from the alert type profile. [David]</p>

</li>
<li><p>Users can now only add subelements to a story if they have at least READ permission to those subelements. Thanks to Mark for the spot. [David]</p>

</li>
<li><p>If the installer notices that you&#39;re attempting to install Bricolage in a directory with an existing installation, it will suggest that you consider running <code>make upgrade</code>, instead. Suggested by Bruce Albrecht. [David]</p>

</li>
<li><p>The list manager now sorts version numbers as numbers rather than strings. [Jo&atilde;o Pedro]</p>

</li>
<li><p>The media type profile again allows extensions to be added and removed. Reported by Tobias Kremer. [David]</p>

</li>
<li><p>Added the <code>CHAR_SET</code> directive&#39;s value to Bricolage&#39;s Apache configuration via the <i>httpd.conf</i> directive <code>AddDefaultCharset</code>. Might help with some Unicode issues. [David]</p>

</li>
<li><p>Distribution error handling is better now, with errors passed back to the client and an error when <i>bric_dist_mon</i> attempts to connect to a server or URL that&#39;s not a Bricolage distribution server. [David]</p>

</li>
<li><p>Eliminated installation error &#39;Failed to create database: parser: parse error at or near &quot;template0&quot;&#39;, which occurred with versions of PostgreSQL prior to 7.3. [Scott]</p>

</li>
<li><p>Enabled the <code>PERL_LOADER</code> <i>bricolage.conf</i> configuration directive and gave it a default value that&#39;s actually useful. [David]</p>

</li>
<li><p>Perl 5.8.0 or later is now strongly recommended for better Unicode support.</p>

</li>
<li><p>Fixed deleting an Alert Type Rule. Also fixed Editing Alert Type Recipients. [Scott]</p>

</li>
<li><p>Notes are once again saved with a document. Thanks to Scott for the spot! [David]</p>

</li>
<li><p>Fixed an issue with FTP distribution where the incorrect FTP root was used an invalid path. [Clive Jones]</p>

</li>
<li><p>The title and description of a story or media document are now properly reverted when the document is reverted to an earlier version. Thanks to Scott for the spot. [David]</p>

</li>
<li><p>Pagination now works properly when searching for groups by type in the group manager. [Scott]</p>

</li>
<li><p>Pagination now works properly when searching for elements by element type in the element manager and when searching for contributors by contributor type in the contributor manager. [David]</p>

</li>
<li><p>Creating a new story that has a URI that conflicts with an existing story no longer creates an extra story. Reported by Clive Jones. [David]</p>

</li>
<li><p>Changed &quot;Cannot publish asset because there are no Destinations associated with its output channels&quot; to instead include the name of the output channel missing Destination associations so that the user can tell which output channels need a Destination association. [Clive Jones]</p>

</li>
<li><p>When an document&#39;s primary output channel has been changed to something other than that defined by its document type element, preview will now correctly use the document&#39;s primary output channel instead of the element&#39;s primary output channel. [David]</p>

</li>
<li><p>Returning to a desk from editing an asset that was selected for editing from that desk no longer triggers an error. Thanks to Clive Jones for the spot! [David]</p>

</li>
<li><p>An attempt to preview a story where its templates output no content no longer results in an error. Reported by Eldar Kononov. [David]</p>

</li>
<li><p>Clicking &quot;Cancel&quot; in an element no longer saves the changes in that element before going up to the parent element. Thanks to Andrew Baio for the spot! [David]</p>

</li>
<li><p>Changes made to the default values of fields in the contributor type profile are now properly saved. Reported by Scott. [David]</p>

</li>
<li><p>Adding Extensions to a Bric::Util::MediaType object when creating it via that class&#39; <code>new()</code> constructor works again. Reported by Clive Jones. [David]</p>

</li>
<li><p>Added Localization support to widgets that were missing it. Added pt_pt localized images. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Documents are no longer distributed to deleted (deactivated) destinations. Reported by Mark. [David]</p>

</li>
<li><p>Eliminated several error log authentication message such as &quot;No cookie found.&quot; This tended only to confuse users when they were just starting to use Bricolage. I&#39;ve left in a few error messages, however, so that system administrators can see in the log when it looks like someone is trying to hack into Bricolage. The remaining authentication error log messages are:</p>

<ul>

</li>
<li><p>Invalid username or password. Please try again.</p>

</li>
<li><p>User does not exist or is disabled.</p>

</li>
<li><p>Malformed cookie.</p>

</li>
<li><p>Cookie hash mismatch from [IP address] (Hostname &#39;[hostname]&#39;) for user &#39;[username].&#39;</p>

</li>
</ul>

<li><p>Elements added with the same name as an existing, active or inactive element no longer trigger an SQL error to be displayed. Thanks to Clive Jones for the spot! [David]</p>

</li>
<li><p>Fixed issue where adding an output channel to a document type element removed that output channel from another document type element. Thanks to Clive Jones for the spot! [David]</p>

</li>
<li><p>Adding a server to a new destination before saving the destination or adding an action no longer causes an SQL error. [David]</p>

</li>
<li><p><code>make clone</code> now properly clones <i>bricolage.conf</i>, <code>httpd.conf</code>, and all of the contents of <i>conf/</i>. [David]</p>

</li>
</ul>

<h1 id="Version-1.6.1-2003-06-12-">Version 1.6.1 (2003-06-12)</h1>

<h2 id="New-Features13">New Features</h2>

<ul>

<li><p>Added <i>bric_xfer_grps</i> and <i>bric_xfer_users</i> to <i>contrib/bric_xfer</i>. They use the Bric API to transfer users and groups between Bricolage Installations. [Scott]</p>

</li>
<li><p>Added Traditional Chinese localization. [Kang-min Liu]</p>

</li>
</ul>

<h2 id="Bug-Fixes46">Bug Fixes</h2>

<ul>

<li><p><code>make clone</code> now properly creates <i>inst/Pg.sql</i> instead of <i>inst/bricolage.sql</i>. It also once again properly resolves the circular dependency between the &quot;usr&quot; table and the <code>login_avail()</code> PostgreSQL function. [David]</p>

</li>
<li><p>The FTP distributor now deletes existing copies of files before renaming a temporary file when connecting to Win32 servers. This is because the IIS FTP server doesn&#39;t seem to support renaming a file to the same name as an existing file. [David]</p>

</li>
<li><p>Creating the database during <code>make install</code> no longer fails if someone is already connected to template1. [Scott]</p>

</li>
<li><p>A preview link is no longer in the &quot;Find Media,&quot; &quot;Active Media,&quot; desk, or &quot;My Workspace&quot; views for media that have no associated file. [David]</p>

</li>
<li><p><code>make upgrade</code> now uses the correct PostgreSQL root username and password, instead of the default &quot;postgres&quot; username and empty password. Thanks to Paul Cory for the spot! [David]</p>

</li>
<li><p>Burn-time exceptions are once again properly displayed in the error page. [David]</p>

</li>
<li><p>When the <code>STORY_URI_WITH_FILENAME</code> <i>bricolage.conf</i> directive is enabled, stories are now written to the proper file when previewed or published. Thanks to Kevin White for the spot! [David]</p>

</li>
<li><p>Fix issue that came up with the release of Mason 1.20. Reported by Jeff Steele. [David]</p>

</li>
<li><p>Fixed typo in Media Type manager that broke it. Reported by Lari Huttunen. [Scott]</p>

</li>
<li><p>Fixed problem where an attempt to add new output channels to a new element before saving that element cause errors. Mainly noticeable when creating elements via SOAP. Thanks to Mark for the spot. [David]</p>

</li>
<li><p>Various localization fixes. [Scott]</p>

</li>
<li><p>Fixed event logging for element fields. [David]</p>

</li>
<li><p>Media assets that are based on &quot;Image&quot;, &quot;Audio&quot;, and &quot;Video&quot; element types now properly show up on desks. Note that existing media assets missing from desks should be checked out via &quot;Active Media&quot; and moved to a new desk. [David]</p>

</li>
<li><p>Documented the support for passing <code>%ARGS</code> to <code>$burner-&gt;display_element()</code> in templates. It was added to Bric::Util::Burner::Mason a while ago, but I forgot to document it! Thanks to Mike Slattery for the spot. [David]</p>

</li>
<li><p>Added Crypt::SSLeay to the list of optional modules to be installed. This module is required for SOAP communications over SSL. So if you use SSL and you use the SOAP server, you&#39;ll want to install it. [David]</p>

</li>
<li><p>Fixed alerts so that alerts are once again sent to the members of groups. Reported by Paul Cory. [David]</p>

</li>
<li><p>Deleted alert types are no longer displayed in the Alert Type Manager. Thanks to Paul Cory for the spot! [David]</p>

</li>
<li><p>Added more intelligent code using HTTP headers instead of HTML to prevent browsers [IE] from caching pages. [David]</p>

</li>
<li><p>Bricolage no correctly sets the HTTP headers for the content language and character set. Thanks to Nathan Ollerenshaw for the spot! [David]</p>

</li>
<li><p><code>make clone</code> now changes the user and group ownership on the cloned files to the values for the current user (root). This is to avoid problems when <code>tar</code>ing up those files. [David]</p>

</li>
<li><p>Added code to Apache configuration to force JavaScript files to be served with the proper character set HTTP header. Those who use manual Apache configuration along with Bric::App::ApacheStartup will want to add the following configuration directive to your <i>httpd.conf</i>:</p>

<pre><code>&lt;Location /media/js&gt;
  ForceType =&gt; &quot;application/x-javascript; charset=utf-8&quot;
&lt;/Location&gt;</code></pre>

</li>
<li><p>The virtual FTP server no longer displays templates in subcategories of the current subcategory directory. Thanks to George Harrison for the spot! [David]</p>

</li>
<li><p>Output channel associations in story type and media type elements can now be deleted again. Thanks to Arthur Bergman for the spot! [David]</p>

</li>
<li><p>Added listing of emeritus developers. Otherwise Sam was simply listed as a patcher, which is hardly accurate. [David]</p>

</li>
<li><p>The element profile no longer displays deleted fields after clicking the &quot;Save and Stay&quot; button. [David]</p>

</li>
<li><p>The element profile now correctly issues a warning when a field is selected to be deleted. [David]</p>

</li>
<li><p>Made unlocalized JavaScript message localized. [David]</p>

</li>
</ul>

<h1 id="Version-1.6.0-2003-04-29-">Version 1.6.0 (2003-04-29)</h1>

<h2 id="New-Features14">New Features</h2>

<ul>

<li><p>Added the <code>STORY_URI_WITH_FILENAME</code> <i>bricolage.conf</i> directive, which, when enabled, allows story URIs to include the file name. This is especially useful in output channels where &quot;Use Slug as File name&quot; is enabled, since it allows stories to essentially have identical URIs except for the file name. Off by default. [David]</p>

</li>
<li><p>Added <i>bric_media_upload</i>, a media file bulk import utility, into <i>contrib</i>. Thanks to Matt Vella for the contribution.</p>

</li>
<li><p>New help pages for the event log and the workflow trail. Thanks to Geoff Richards for the contribution.</p>

</li>
<li><p>Some unnecessary JavaScript was removed from the side navigation layer. Thanks to Eldar Kononov for the suggestion. [David]</p>

</li>
<li><p>Added keyword support for media assets to SOAP interface. [David]</p>

</li>
<li><p>Neatened the &quot;Find Stories,&quot; &quot;Active Stories,&quot; &quot;Find Media,&quot; and &quot;Active Media&quot; screens and added the ability to preview stories and media by clicking their titles. [David]</p>

</li>
<li><p>Added Field Profile, so that element Fields can be edited. This is a marked improvement over the old interface, which required that fields be deleted and recreated if users wanted to change them. [Scott]</p>

</li>
</ul>

<h2 id="Bug-Fixes47">Bug Fixes</h2>

<ul>

<li><p>Granting of permission to database objects during installation has been moved to its own make target. This is to allow it to be run by <code>make upgrade</code>, too, thus ensuring that the Bricolage database user always has the appropriate permissions to access the database. [David]</p>

</li>
<li><p>Assets can once again be removed from workflow. [David]</p>

</li>
<li><p>The published version attribute is now set on templates when they&#39;re deployed. Thanks to Geoff Richards for the spot. [David]</p>

</li>
<li><p>The <i>bricolage.conf</i> and <i>httpd.conf</i> files are now created during <code>make</code> rather than <code>make install</code> so that <code>make test</code> can take advantage of them. [David]</p>

</li>
<li><p>Bric::App::Session and Bric::App::Cache no longer <code>chown</code> their files and directories during <code>make test</code>. [David]</p>

</li>
<li><p>Super Bulk Edit no longer joins lines together without a space, so that words should now be properly separated. [David]</p>

</li>
<li><p>Deleting a story or media subelement no longer results in an error. [David]</p>

</li>
<li><p>Help has been restored. [David]</p>

</li>
<li><p>A value of &quot;0&quot; (zero) can now be given to element fields. This bug has been in Bricolage since the beginning! Thanks to Mark for the spot. [David]</p>

</li>
<li><p>Stories with subelements containing no field elements no longer cause an error when the container profile is looking for contextual information to display about a a subelement. Thanks to Chris Jantzen for the spot. [David]</p>

</li>
<li><p>Bulk editing a field without first going through the element profile and without adding or removing or reordering field elements now preserves the data. This is another bug that has been in the code since the beginning of time, and was only recently identified. Thanks to Rachel Murray for the spot. [David]</p>

</li>
<li><p>Fixed an obscure bug where an element with a field element and a container element with the same ID could cause an error when one tries to edit the container element and Bricolage tries to load the field element, instead. Embarrassingly discovered in the middle of a presentation to the London Perl M[ou]ngers. [David]</p>

</li>
<li><p>Minor JavaScript fix for Opera users, thanks to Kevin White. [David]</p>

</li>
<li><p>The &quot;multi&quot; installation method now defaults the &quot;Bricolage Root Directory&quot; setting to <i>/usr/local/bricolage</i> instead of &quot;NONE&quot;. This seems to be less annoying to people. [David]</p>

</li>
<li><p>The <i>inst/upgrade/1.5.1/asset_desk.pl</i> script, which is run by <code>make upgrade</code>, now correctly checks to see if the upgrade has already been performed. [David]</p>

</li>
<li><p>The <i>inst/upgrade/1.5.1/webdav_mover.pl</i> script, which is run by <code>make upgrade</code>, now correctly checks for the existence of the correct record in the &quot;class&quot; table before inserting a new record. [David]</p>

</li>
<li><p>During <code>make upgrade</code>, the upgrade scripts are now run <i>before</i> the new APIs are installed, so that there are no conflicts when using the existing API to make changes. [David]</p>

</li>
<li><p>Creation and installation of man pages can now be avoided during <code>make upgrade</code> as well as during <code>make</code>. [David]</p>

</li>
<li><p>Man pages will now be installed in the correct subdirectory of <code>$BRICOLAGE_ROOT</code> when using the &quot;multi&quot; install method. [David]</p>

</li>
<li><p>Fixed issue where asset groups and desk groups were conflated in workflow objects, leading to errors on the permissions page. Thanks to Jo&atilde;o Pedro for the spot. [David]</p>

</li>
<li><p>The URI of new stories is once again properly formed when the stories are created. [David]</p>

</li>
<li><p>The list of events no longer displays attributes for events that have no attributes. [David]</p>

</li>
<li><p>Attempting to add more keywords to the root category no longer results in the error &quot;Cannot change the directory of the root category.&quot; [David]</p>

</li>
<li><p>In lists of objects a cell with a value of &quot;0&quot; (zero) will now be displayed. [David]</p>

</li>
<li><p>In &quot;Find Templates,&quot; the list of templates in the search results will now be sorted by the file name, instead of not at all. [David]</p>

</li>
<li><p><code>make distclean</code> now properly deletes <i>inst/Pg.sql</i>. [David]</p>

</li>
</ul>

<h1 id="Version-1.5.2-2003-04-02-">Version 1.5.2 (2003-04-02)</h1>

<h2 id="New-Features15">New Features</h2>

<ul>

<li><p>Out of the box, the Story Editors, Media Producers, and Template Developers groups now have READ permission to access members of the &quot;All Categories&quot; and &quot;All Elements&quot; groups, which allow them to actually create assets based on elements and within categories. [David]</p>

</li>
<li><p>Workflow and Desk permissions are a little more sensible now. CREATE permission can be granted for the start desk in each workflow, instead of for the entire workflow. This allows a lower permission to be set on the workflow (e.g., READ), and then higher permissions on the individual desks in the workflow. [David]</p>

</li>
<li><p>New &quot;Tuning&quot; sections have been added to <a rel="section" href="../../../2.0/api/Bric/DBA.html" name="Bric::DBA">Bric::DBA</a>. [Mark]</p>

</li>
</ul>

<h2 id="Bug-Fixes48">Bug Fixes</h2>

<ul>

<li><p>The default required length for usernames and passwords has been changed from 6 to 5. This is to make dealing with the default &quot;admin&quot; login easier.</p>

</li>
<li><p>It is once again possible to delete elements when they are not associated with any story or media asset. [David]</p>

</li>
<li><p>The output channel profile once again only complains that the name of an output channel is already in use if it happens to be true. [David]</p>

</li>
<li><p>Bric::Config now does its best to find a workable <i>httpd.conf</i> file during <code>make test</code>. [David]</p>

</li>
<li><p>Subclasses of Bric::Biz::Asset::Business::Media work again, and can have keywords associated with them, too. [David]</p>

</li>
<li><p>The &quot;Access Denied&quot; message is back for when someone tries to access an object to which they don&#39;t have adequate permission. [David]</p>

</li>
<li><p>Previews of assets that are not checked out work again. [David]</p>

</li>
<li><p>Workflow and desk permissions relative to the assets they contain are now restored to their previous behavior. Desks no longer simply inherit the permission granted on any of the workflows they&#39;re in. This issue was resolved by creating a new secret asset group ID for each workflow. [David]</p>

</li>
<li><p>The primary output channel is now always enabled by default in top-level elements. This is to make it much harder to create documents without output channel associations, an event that can lead to database exceptions. [David]</p>

</li>
<li><p>The root category now lists itself as being in the &quot;All Categories&quot; group only once in the category profile. [David]</p>

</li>
<li><p>Assets will no longer appear to randomly disappear from workflow. [David]</p>

</li>
<li><p>Added constraints to the &quot;media_type_member&quot; group that were inadvertently left out of 1.5.1. [David]</p>

</li>
<li><p>Permissions are now once again properly checked for assets in categories, workflows, and on desks. [Mark]</p>

</li>
</ul>

<h1 id="Version-1.5.1-2003-03-23-">Version 1.5.1 (2003-03-23)</h1>

<h2 id="New-Features16">New Features</h2>

<ul>

<li><p>Lots of group-related optimizations. These should greatly improve the speed with which permissions are checked. [David]</p>

</li>
<li><p>Improved testing support with lots more tests. Many more remain to be written. See the new testing documentation in <a rel="section" href="../../../2.0/api/Bric/Hacker.html" name="Bric::Hacker">Bric::Hacker</a> for details. [David]</p>

</li>
<li><p>Added ability to publish assets at a future time to Bric::SOAP::Workflow. Includes addition of new <code>--publish-date</code> option to <i>bric_soap</i>. [David]</p>

</li>
<li><p>Added WebDAV mover. [Jo&atilde;o Pedro]</p>

</li>
<li><p>FTP and File System movers now atomically copy files to their destination servers. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Added &quot;All Desks&quot; group for managing the permission to access all desks. [David]</p>

</li>
<li><p>Refactored and optimized the code used in the <code>lookup()</code>, <code>list()</code>, <code>list_ids()</code>, and, where pertinent, <code>href()</code> methods in the following classes:</p>

<dl>

<dt>Bric::Biz::Asset</dt>
<dd>

</dd>
<dt>Bric::Biz::Asset::Business</dt>
<dd>

</dd>
<dt>Bric::Biz::Asset::Business::Story</dt>
<dd>

</dd>
<dt>Bric::Biz::Asset::Business::Media</dt>
<dd>

</dd>
<dt>Bric::Biz::Asset::Template</dt>
<dd>

</dd>
<dt>Bric::Biz::AssetType</dt>
<dd>

</dd>
<dt>Bric::Biz::ATType</dt>
<dd>

</dd>
<dt>Bric::Biz::Category</dt>
<dd>

</dd>
<dt>Bric::Biz::Org</dt>
<dd>

</dd>
<dt>Bric::Biz::Org::Person</dt>
<dd>

</dd>
<dt>Bric::Biz::Org::Source</dt>
<dd>

</dd>
<dt>Bric::Biz::OutputChannel</dt>
<dd>

</dd>
<dt>Bric::Biz::OutputChannel::Element</dt>
<dd>

</dd>
<dt>Bric::Biz::Person</dt>
<dd>

</dd>
<dt>Bric::Biz::Person::User</dt>
<dd>

</dd>
<dt>Bric::Biz::Workflow</dt>
<dd>

</dd>
<dt>Bric::Biz::Workflow::Parts::Desk</dt>
<dd>

</dd>
<dt>Bric::Dist::Job</dt>
<dd>

</dd>
<dt>Bric::Dist::ServerType</dt>
<dd>

</dd>
<dt>Bric::Util::AlertType</dt>
<dd>

</dd>
<dt>Bric::Util::Event</dt>
<dd>

</dd>
<dt>Bric::Util::Grp</dt>
<dd>

</dd>
<dt>Bric::Util::MediaType</dt>
<dd>

</dd>
<dt>Bric::Util::Pref</dt>
<dd>

</dd>
</dl>

<p>This work will allow permission checking to be much faster for objects of these classes, as the relevant group IDs are now looked up for each object when the object is looked up, rather than by a separate select for each object, one-at-a-time. The changes also include support for a <code>grp_id</code> parameter to be passed to the <code>list()</code> method of these classes as a way of allowing a group to return a list of the objects in the group en masse, rather than one-at-a-time from the member objects of each group. Once similar optimizations have been made to the Bric::Biz::Assest classes, the necessary change will be made to Bric::Util::Grp to allow this functionality. [David and Mark]</p>

</li>
<li><p>Added object caching to the base class, and calls to it from all classes with a <code>lookup()</code> method to take advantage of it. The caching is only for the duration of a request for now, but can be expanded later. [David]</p>

</li>
<li><p>Updated <i>INSTALL.MacOSX</i> to reflect changes thanks to the new Mac OS X support included in libapreq 1.1. [David]</p>

</li>
<li><p>Added &quot;Super Bulk Edit&quot;, which is a bulk edit interface allowing users to edit all of the fields in an element at once using POD-like tags, rather than just a single repeatable field. [Garth]</p>

</li>
<li><p>Added help topic for new &quot;Super Bulk Edit&quot; feature. [David]</p>

</li>
<li><p>Localization and Internationalization support introduced, with a Portuguese library to complement the default English. Most message strings have been replaced with calls to the proper localization method. Still to be done are strings fetched from the database (e.g. events). [Cl&aacute;udio Valente]</p>

</li>
<li><p>Localization of text images (buttons), Help, and JavaScript message added. These still need translation, however. [David]</p>

</li>
<li><p>Added Italian translation. [Marco Ghezzi]</p>

</li>
<li><p>Documented <i>bric_dist_mon</i> and <i>bric_ftpd</i>. [David]</p>

</li>
<li><p>Optimized and added tests for Bric::Util::Priv&#39;s <code>get_acl()</code> and <code>get_acl_mtime()</code> methods. These should make the looking up of a user&#39;s access control list faster. [David]</p>

</li>
<li><p>Added preview link to every element profile of a story profile. [Scott]</p>

</li>
<li><p>Pared down number of default User groups by eliminating those that relate to only a single admin menu item. [David]</p>

</li>
<li><p>Fixed code in Bric::Util::Grp where the <code>has_member()</code> method would fail to look up an object with an ID of 0. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Switched exceptions from home-grown to using Exception::Class. [Scott]</p>

</li>
<li><p>The installer now offers a more meaningful message when it encounters an existing database and the user doesn&#39;t want to drop that existing database. [David]</p>

</li>
<li><p>Added category group association, including ability to cascade membership assignments into subcategories, to category profile. [Jo&atilde;o Pedro]</p>

</li>
<li><p>The installer will no longer try to load CPAN.pm if all modules are already installed. Thanks to Ilia Chipitsine for the prodding. [David]</p>

</li>
<li><p>The &quot;Content&quot; section of story, media, and subelement profiles now attempts to display a bit of text from the first text field in each listed subelement so that it&#39;s easier to see at a glance which subelement is which. [Jo&atilde;o Pedro]</p>

</li>
<li><p>Switched POD testing from Pod::Checker to Test::Pod (using Pod::Simple). Fixed the POD errors it found, too. [David]</p>

</li>
<li><p>Test suite now runs all tests with warnings enabled. [David]</p>

</li>
<li><p>Modified <code>Grp-&gt;get_objects()</code> to use use the <code>grp_id</code> parameter to <code>list()</code>, now that support for that parameter has been added to all groupable classes. Also went through all existing code to make sure that it uses this approach, rather than constructing the relevant objects one-at-a-time from each Member object. This should provide a dramatic speedup in many operations.</p>

</li>
<li><p>Bric::App::Session now has an <code>instance()</code> public class method to return the current <code>%session</code> hash. [Scott]</p>

</li>
<li><p>Subelements can now nest. That is, they can contain themselves. Not in a story, of course, but in the document model (element administration). [David]</p>

</li>
<li><p>Keywords can now be associated with media assets. [David]</p>

</li>
<li><p>Templates now have a <code>published_version</code> attribute that properly reflects the version of a template that was last deployed. This matches what Story and Media have done since around version 1.3.2, and eliminates some warnings from the error log. The UI has also been updated to properly show the deploy status of templates. [David]</p>

</li>
<li><p>The installer should now properly detect that the Apache &quot;log_config&quot; module is installed even when it&#39;s called &quot;config_log&quot;. Thanks to Ilia Chipitsine for the spot and the diagnostics needed to solve the problem. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes49">Bug Fixes</h2>

<ul>

<li><p>The publish attribute of desks can now be unset. Thanks to Sean Greathouse for the catch! [David]</p>

</li>
<li><p>Fixed asset class date parameters to list(). The asset classes were neglecting to change the dates passed in to list() to database dates before querying the database. This lead to the wrong stories being returned for everyone not using UTC as their local time zone. Thanks to Bill Cappel for the spot! [David]</p>

</li>
<li><p>Fixed bug where expired cookie resulted in a Bric::App::Session error. [Jo&atilde;o Pedro]</p>

</li>
<li><p>A number of default groups where not properly added to the &quot;All Groups&quot; group. Now they are. [David]</p>

</li>
<li><p>Bricolage now does more to determine the media type of uploaded media by using both the Apache media type determination and, failing that, a file name extension. Thanks to Todd Tyree for the spot. [David]</p>

</li>
<li><p>Fixed the description of the root category in the permissions profile for user groups so that it properly displays its URI instead of its name. This only affects the display of the root category in the permissions profile for people who installed (rather than upgraded to) Bricolage 1.4.5 or later. [David]</p>

</li>
<li><p>An attempt to create a template with the same name and output channel as a deactivated template now properly tells the user that the template already exists. [David]</p>

</li>
<li><p>Fixed indexes for person objects so that they&#39;re case-insensitive. [David]</p>

</li>
<li><p>Fixed problem creating new business assets with SOAP where Bricolage was trying to associate them with output channels twice, resulting in an SQL Error. [David]</p>

</li>
<li><p>Fixed broken index on media type extensions. It was duplicating the index on the media type names. It has been changed to uniquely index the media type file name extensions. [David]</p>

</li>
<li><p><code>Bric::Biz::Category-&gt;get_children</code> now properly returns the children for the root category. Thanks to Sam for the spot! [David]</p>

</li>
<li><p>Removed <code>Bric::Biz::AssetType-&gt;remove</code>. It shouldn&#39;t be used anywhere, and might be responsible for the mysterious disappearance of elements in general. Thanks to Jo&atilde;o Pedro for the spot. [David]</p>

</li>
<li><p>Assigned appropriate permissions to allow the default &quot;Story Editors,&quot; &quot;Media Producers,&quot; and &quot;Template Developers&quot; to access the default workflow and desks relevant to them. They hadn&#39;t had that access by default before. [David]</p>

</li>
<li><p>Changed the plural name of the &quot;Category Group&quot; class from &quot;Category Group&quot; to &quot;Category Groups&quot;. [David]</p>

</li>
<li><p>Fixed bug introduced in 1.5.0 where stories where checked for duplicate URIs for output channels that they weren&#39;t actually in. Thanks to Bill Cappel for the spot. [David]</p>

</li>
<li><p>Fixed duplicate URI checking for media assets so that all output channels a media asset is in will be checked for duplicate URIs instead of just the primary URI. [David]</p>

</li>
<li><p>Fixed bug where all sources were being deactivated from their groups every time they were saved. [David]</p>

</li>
<li><p>Fixed bug where the SOAP server would throw an exception when it attempted to handle elements without subelements. Thanks to Sam Tregar for the report. [David]</p>

</li>
<li><p>It is no longer possible to create a story type or media type element without a primary output channel. [David]</p>

</li>
<li><p>Deleted output channels no longer show up in the list of output channels to associate with a destination. Thanks to Alex Epshteyn for the spot! [David]</p>

</li>
<li><p>The installer now collects Apache configuration data from any <code>Include</code>d files, as well. Thanks to Alex Wheeler for the spot! [David]</p>

</li>
<li><p>Media types now can be added to groups. This means that permissions can be set so that users can administer media types. Previously, only members of the &quot;Global Admins&quot; group could administer media types. [David]</p>

</li>
</ul>

<h1 id="Version-1.5.0-2003-01-09-">Version 1.5.0 (2003-01-09)</h1>

<h2 id="New-Features17">New Features</h2>

<ul>

<li><p>Added unit testing framework based on <a href="http://search.cpan.org/perldoc?Test::Class">Test::Class</a> and executed by <a href="http://search.cpan.org/perldoc?Test::Harness">Test::Harness</a>. Tests can be run after <code>make install</code> by running <code>make test</code> or <code>make devtest</code>. The former runs tests that access database data but execute no <code>INSERT</code>, <code>UPDATE</code>, or <code>DELETE</code> commands. The latter runs tests that can make changes to the database, and are intended to be a full testing of Bricolage&#39;s API. Both make targets can be executed in verbose mode by passing <code>TEST_VERBOSE=1</code> to the make command. From now on, all tests will be expected to pass before changes are committed to the repository. [David]</p>

</li>
<li><p>Added <i>Makefile.PL</i>. This is mainly a dummy script designed to mimic the usual way in which Perl modules are installed. It doesn&#39;t actually create a <i>Makefile</i>, but processes the existing one, setting it up to use whatever Perl was used to execute <i>Makefile.PL</i> itself. The advantage to this is that the Perl that executes <i>Makefile.PL</i> will be used throughout Bricolage. [David]</p>

</li>
<li><p>Migrated tests in <i>lib/Bric/Util/Grp.pl</i> to <i>t/lib/Bric/Util/Grp/Test.pm</i> and <i>t/lib/Bric/Util/Grp/DevTest.pm</i>. [David]</p>

</li>
<li><p>Added <i>t/Bric/Test/PodTest.pm</i>, which uses <a href="http://search.cpan.org/perldoc?Pod::Checker">Pod::Checker</a> to examine the POD in all the Bricolage modules, scripts, and test modules and report errors. Currently, all the errors are &quot;TODO&quot; tests, which means that, technically, they&#39;ll pass. But as soon as all existing POD errors are cleaned out, errors will turn into test failures. This will help us to keep all of our POD valid. These tests run as a part of <code>make devtest</code>. [David]</p>

</li>
<li><p>Removed all old-style test scripts. Their contents have been copied into new unit testing classes. These classes each execute a single test, and the old testing contents are at the end of the file, after the <code>__END__</code> symbol. Thus we&#39;ll be able to use the old tests to write the new tests. [David]</p>

</li>
<li><p>Added documentation on merging CVS branches to <a rel="section" href="../../../2.0/api/Bric/Hacker.html" name="Bric::Hacker">Bric::Hacker</a>. [David]</p>

</li>
<li><p>Removed the URI Format and URI Case preferences and put them into Output Channel objects, instead. They are now output channel-specific. [David]</p>

</li>
<li><p>URI format and URI case settings now properly format the URIs of media objects, too. [David]</p>

</li>
<li><p>The slug can now be used in the Fixed URI Format. [David]</p>

</li>
<li><p>The slug can now be used for story file names. The option is supported on an output channel basis, and will only work for stories that have a slug. [David]</p>

</li>
<li><p>Added a &quot;and Shelve&quot; option to the &quot;Check In&quot; select list in the button bar on story, media, and asset pages. When this option is selected, the asset is checked in and then removed from workflow without publishing. [David]</p>

</li>
<li><p>Removed the &quot;Checkin/Publish&quot; and &quot;Checkin/Deploy&quot; buttons in asset profiles and replaced them with new &quot;and Publish&quot; or &quot;and Deploy&quot; options in the &quot;Check In&quot; select list in the button bar. Doing this collects all the usual Check In actions in one place and saves us screen real estate! [David]</p>

</li>
<li><p>Changed the way the &quot;Checkin and Publish&quot; and &quot;Checkin and Deploy&quot; callbacks work to use existing code in the desk and publish widgets to do the dirty work. This greatly reduces code duplication. [David]</p>

</li>
<li><p>Created a new class, <a rel="section" href="../../../2.0/api/Bric/Biz/OutputChannel/Element.html" name="Bric::Biz::OutputChannel::Element">Bric::Biz::OutputChannel::Element</a>, which is a subclass of <a rel="section" href="../../../2.0/api/Bric/Biz/OutputChannel.html" name="Bric::Biz::OutputChannel">Bric::Biz::OutputChannel</a>. This new class better manages the mapping of output channels to elements than the old approach did. It also adds a new property, <code>enabled</code>, which will be put to use shortly. [David]</p>

</li>
<li><p>Replaced all the custom handling of output channel objects in <a rel="section" href="../../../2.0/api/Bric/Biz/AssetType.html" name="Bric::Biz::AssetType">Bric::Biz::AssetType</a> with a new <a rel="section" href="../../../2.0/api/Bric/Util/Coll.html" name="Bric::Util::Coll">Bric::Util::Coll</a> subclass that does it all. This is a lot more efficient in terms of programmer time (and probably performance, too). [David]</p>

</li>
<li><p>Modified Bric::Biz::Asset::Business to manage the association between business assets and output channels by making use of the Bric::Util::Coll::OutputChannel class. It also automatically adds all of the &quot;enabled&quot; output channels of the element object as initial output channel associations for new business assets. [David]</p>

</li>
<li><p>Added a new property to templates: template types. This property can have one of three value that correspond to different template types: &quot;Element Templates&quot; (those associated with elements); Category Templates&quot; (autohandlers in Mason parlance, category templates to HTML::Template users, and until now &quot;generic templates&quot; in the UI); and &quot;Utility Templates&quot; (those not associated with anything, but can be used as includes). [David]</p>

</li>
<li><p>Templates are now guaranteed to have unique file name/output channel combinations at the API and database levels. [David]</p>

</li>
<li><p>For stories on My Workspace, replaced &quot;Trail&quot; with &quot;Clone&quot;. Clicking this link will make an exact copy of the story with the words &quot;Clone of &quot; prepended to the story title. [David]</p>

</li>
<li><p>Got rid of the popup window. Now when the toolbar-less window isn&#39;t the current window, the browser will be redirected to a a Welcome page where users can click a link to open the new window with the Bricolage UI. [David]</p>

</li>
<li><p>Improved the interface for the association of output channels in Element Profile. It now uses a list of output channels rather than a double list, and a radio button to select the primary output channel. Also, each associated output channel can be marked as &quot;Enabled&quot; or not, indicating whether a new asset based on the element will by default be associated with that output channel for publishing. [David]</p>

</li>
<li><p>On a related note, Stories and Media can now select which output channels to be published to on a per-story basis as well as which is the primary output channel, and the selection sticks with each version of a an asset. The list of available output channels comes from the output channels associated with the element on which the story or media asset is based. [David]</p>

</li>
<li><p>Bric::Util::Burner objects have a new property, <code>mode</code>. This property contains an integer value indicating whether a burner object is currently publishing, previewing, or checking syntax. The value maps to the conveniently-named constants &quot;PUBLISH_MODE&quot;, &quot;PREVIEW_MODE&quot;, and &quot;SYNTAX_MODE&quot;. [David]</p>

</li>
<li><p>The documentation in the Bric::Util::Burner class has been updated and improved. [David]</p>

</li>
<li><p>Arguments can now be passed to the <code>display_pages()</code>, <code>display_element()</code>, and <code>chain_next()</code> methods of the <code>$burner</code> object in Mason templates. These arguments are passed to the templates that are executed just as they are if you&#39;d called <code>$m-&gt;comp</code>, meaning that you can access their values via the <code>%ARGS</code> global and in <code>&lt;%args&gt;</code> blocks in Mason templates. [David]</p>

</li>
<li><p>Changed the <code>display_pages()</code> method of Bric::Util::Burner::Mason so that its first argument can be an anonymous array of the names of different paginated elements, and then all of those different paginated elements will be burned in order. This allows a story to have more than one type of paginated element. [David]</p>

</li>
<li><p>Added the methods <code>prev_page_file()</code>, <code>prev_page_uri()</code>, <code>next_page_file()</code>, and <code>next_page_uri()</code> to Bric::Util::Burner. These methods return the strings representing the file names or URIs of the previous and next pages of a story, relative to the page that is currently being burned and, in the case of the <code>*_uri()</code> methods, appropriate to the currently-burning Output Channel. Also updated the <a rel="section" href="../../../2.0/api/Bric/Templates.html" name="Bric::Templates">Bric::Templates</a> and <a rel="section" href="../../../2.0/api/Bric/AdvTemplates.html" name="Bric::AdvTemplates">Bric::AdvTemplates</a> documents to reflect these additions. [David]</p>

</li>
<li><p>Added <code>source__id</code> to list of criteria by which stories can be searched via the Bric::Biz::Asset::Business::Story <code>list()</code> and <code>list_ids()</code> methods. [David]</p>

</li>
<li><p>The Bricolage CSS document is now a static file served by Apache rather than a Mason component processed by mod_perl. This allows the style sheet to be cached by the browser so that it doesn&#39;t have to request it for every page in Bricolage. It also cuts down on processing time, since it doesn&#39;t have to be managed dynamically as a Mason component anymore. Also, all font sizes are now specified in pixels instead of points, in order to maximize the consistency of cross-browser font rendering. [David]</p>

</li>
<li><p>Added a new style for the template profile, so that template code is now displayed in its textarea box in a monospaced font. [David]</p>

</li>
<li><p>The main Bricolage JavaScript library has had several other JavaScript libraries rolled into it, and is now a static file served by Apache rather than a Mason component processed by mod_perl. This allows the JS to be cached by the browser so that it doesn&#39;t have to request it for every page in Bricolage. It also cuts down on processing time, since it doesn&#39;t have to be managed dynamically as a Mason component anymore. [David]</p>

</li>
<li><p>Added <i>bricolage.conf</i> directive &quot;ALLOW_WORKFLOW_TRANSFER&quot; to allow assets on shared desks to be able to be transferred across workflows via that shared desk. [David]</p>

</li>
<li><p>Changed Bric::Util::Burner to set <code>publish_status</code> after publishing, rather than before. Thus it is only set if the publish is successful, while at the same time templates can check <code>publish_status</code> to determine if a story is being published for the first time. [David]</p>

</li>
<li><p>Added <code>get_more_pages()</code> method to Bric::Util::Burner::Mason. It returns true if more pages remain to be burned, and false if not. However it&#39;s only enumerated when <code>display_pages()</code> is being used to output pages. [David]</p>

</li>
<li><p>Optimized Bric::Biz::Category to get a list of Group IDs for each category as it is selected from the database. This prevents the <code>get_grp_ids()</code> method from having to query the database, which was happening for every category object for which permissions are checked. [Mark &amp; David]</p>

</li>
<li><p>Added event logging for keywords. [David]</p>

</li>
<li><p>Changed the code in Bric::Util::Burner::Mason to allow for new Mason burners to be constructed and used to publish stories from within templates. This is useful for generating tables of contents and such. [David]</p>

</li>
<li><p>Added support for the association between business assets and output channels to the SOAP interface. [David]</p>

</li>
<li><p>Removed IO::String dependence. [Scott]</p>

</li>
<li><p>Added a FAQ. [Scott]</p>

</li>
<li><p>Added a preference for naming the Bricolage instance. [Scott]</p>

</li>
<li><p>Added search by Category URI to Find Stories. Although one could use the search by URI feature for this before, it didn&#39;t allow for search by secondary categories. Now stories can be searched for in both primary and secondary categories. [David]</p>

</li>
<li><p>Added the methods <code>page_file()</code> and <code>page_uri()</code> to Bric::Util::Burner. When passed a page number argument, these methods return the strings representing the file names or URIs of the given page in the currently-burning story and, in the case of the <code>page_uri()</code> method, appropriate to the currently-burning Output Channel. These methods are best used in burners that don&#39;t burn one page at a time, such as Burner::Template. [David]</p>

</li>
<li><p>Ported to HTML::Mason versions 1.15 and higher. [Scott]</p>

</li>
<li><p>Added <code>make uninstall</code> support to installation system. [Scott]</p>

</li>
<li><p>Added <code>page_filepath()</code> method to Bric::Util::Burner. This method allows burner subclasses to get the name of a file to write to the file system without needing to figure out the file name themselves. [David]</p>

</li>
<li><p>Optimized behavior of collections (internal API). Now when an object is deleted from a collection (for example, when a member is deleted from a group), all the existing objects in the collection won&#39;t first be looked up in the database. The upshot is that certain parts of Bricolage that rely on collections, such as desks, should be more responsive. [David]</p>

</li>
</ul>

<h1 id="Version-1.4.6-2003-01-06-">Version 1.4.6 (2003-01-06)</h1>

<h2 id="Bug-Fixes50">Bug Fixes</h2>

<ul>

<li><p>Bric::SAOP::Handler now properly logs fatal errors that are strings rather than exceptions. [David]</p>

</li>
<li><p>Updated Bric::DBA documentation to better reflect PostgreSQL standards. [Neil Conway]</p>

</li>
<li><p>Minor documentation correction in Bric::Util::Grp::Parts::Member. [Mark]</p>

</li>
<li><p>Fixed bug in SOAP interface where container subelements added to a story or media asset were logged as if the story type element or media type element was added instead of the appropriate subelement. [David]</p>

</li>
<li><p>Fixed bug in publish code that was attempting to use the Apache request object as a media asset. Thanks to John Greene for the spot. [David]</p>

</li>
<li><p>Fixed bug where an empty or non-numeric &lt;size&gt; element in an imported media object would cause an SQL error. [Sam]</p>

</li>
<li><p>The <i>bric_apachectl</i>, <i>bric_clean_tmp</i>, <i>bric_dist_mon</i>, and <i>bric_ftpd</i> scripts are now smarter about loading Bricolage libraries and reporting relevant errors when they can&#39;t load Bricolage libraries. Thanks to Geoff Richards for the patch. [David]</p>

</li>
<li><p>Category permissions are now properly checked on assets when they&#39;re not in workflow as well as when they are in workflow. This means that if a group of users is granted permission to access stories in a category, they can now access those stories even if they&#39;re not in workflow. [David]</p>

</li>
<li><p>The search interface for locating media and story assets to relate to a story now checks the permissions of the assets found and only displays the assets for which the user has at least READ permission. Thanks to Sean Greathouse for the spot. [David]</p>

</li>
<li><p>Reverting a media asset now properly reverts the media file itself, as well. [David]</p>

</li>
<li><p>The &quot;Last&quot; field is now properly highlighted as the default order field when displaying a list of contributors in the Contributor Manager. [David]</p>

</li>
<li><p>Contributor Association now includes search options and only currently-associated contributors are displayed before searching. [David]</p>

</li>
<li><p>The ability to select different fields by which to sort a list of objects now works again. [David]</p>

</li>
<li><p>The installer now checks to make sure that mod_perl is statically compiled into Apache, since weird things tend to happen when Bricolage uses a DSO mod_perl. [David]</p>

</li>
<li><p>Fixed reordering code for subelements. The select list for subelements should now always have an appropriate value. [David]</p>

</li>
<li><p>The URI is now properly updated in media assets when some part of the URI is changed in the UI. Thanks to Sean Greathouse for the spot. [David]</p>

</li>
<li><p>The Add More widget no longer throws an exception when &quot;Add More&quot; is clicked and only one field currently exists. This had affected Keywords entry in stories. Thanks to Sam for the spot. [David]</p>

</li>
<li><p>Fixed bug where a user could create two assets with the same URI as long as they were both checked out by that user. Thanks to Shannon Brown for the spot! [David]</p>

</li>
<li><p>Date fields can now be unset. That is, if each of the select fields is set to its label, rather than a value, it&#39;ll stay that way. This was first noticed with the &quot;Expire Date&quot; in stories. Thanks to Philip Fibiger for the spot. [David]</p>

</li>
<li><p>Modified installation <code>CREATE DATABASE</code> command to always create the database with the encoding set to UTF-8 (UNICODE). [David]</p>

</li>
<li><p>Added instructions for installing readline library to README.MacOSX. [David]</p>

</li>
<li><p>Fixed some inaccurate image sizes. [Geoff Richards]</p>

</li>
<li><p>Added missing <code>uri</code> parameter to the possible search options in <code>Bric::SOAP::Category-&gt;list_ids</code>. [David]</p>

</li>
</ul>

<h1 id="Version-1.4.5-2002-11-13-">Version 1.4.5 (2002-11-13)</h1>

<h2 id="Changes">Changes</h2>

<ul>

<li><p>Categories are now displayed by their URIs instead of their names wherever possible. [David]</p>

</li>
<li><p>Added &quot;Order&quot; and &quot;OrderDirection&quot; parameters to <code>Bric::Util::Grp-&gt;list</code> in order to be able to specify a different column and sort order for getting a list of groups. [David]</p>

</li>
<li><p>Improved error handling by the SOAP server. Full errors will now be printed to the Apache error log, error messages sent back to the client are properly escaped, and all database transactions for a single request will be rolled back in the event of an error. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes51">Bug Fixes</h2>

<ul>

<li><p>Fixed error message generated from Bric::SOAP::Template-&gt;update() to properly display the category name, rather than &quot;ARRAY(0x9cf43bc)&quot;. [Sam]</p>

</li>
<li><p>The Bricolage SOAP interface will no longer allow the creation of stories and media with duplicate URIs. [Sam]</p>

</li>
<li><p>Fixed circular dependency issues when Bricolage modules are used in the <code>PERL_LOADER</code> <i>bricolage.conf</i> directive. [David]</p>

</li>
<li><p>Added the root category to the &quot;All Categories&quot; group. It should have been in that group all along. [David]</p>

</li>
<li><p>Documentation for <code>Bric::Biz::Workflow-&gt;list</code> has been improved, and the method used for finding workflows and desks to put imported assets on in Bric::SOAP has been simplified. [David]</p>

</li>
<li><p>Added printing of a message regarding the filenames being processed by <i>bric_soap</i>&#39;s <code>create</code> and <code>update</code> commands when its <code>--verbose</code> option is set. [David]</p>

</li>
<li><p>Setting a story&#39;s cover date to a date that causes one of its URIs to conflict with an existing story&#39;s URIs no longer causes an error. Thanks to Sam for the spot! [David]</p>

</li>
<li><p>Display of the source was missing from the view Story and Media profiles, but no longer. [David]</p>

</li>
<li><p>The correct source is now displayed in the Story and Media edit profiles. [David]</p>

</li>
<li><p>An attempt to install Bricolage to use an existing PostgreSQL user no longer causes an installation error when you decline drop the user. [David]</p>

</li>
<li><p>The burner no longer fails when it publishes an asset that&#39;s not on a desk. [David]</p>

</li>
<li><p>SOAP now does the proper thing when deleting assets, removing them from desks and workflow only if they&#39;re on desks and in workflow. [David]</p>

</li>
<li><p>Added support for the missing <code>publish_status</code> parameter to <code>Bric::Biz::Asset::Business::Media-&gt;list</code>. [David]</p>

</li>
<li><p>Setting permissions on the assets in a category works again. [David]</p>

</li>
<li><p>Fixed a bug where exporting a story via SOAP containing a date field would output the formatted date rather than the expected ISO 8601 format. Systems with a modified date format pref would then refuse to accept the story on import, producing an &quot;Unable to unpack date&quot; error. [Sam]</p>

</li>
<li><p>Stories, media, and templates created but not saved no longer disappear into the void. They are instead moved into workflow, put on a desk, and saved as soon as they were created. [David]</p>

</li>
<li><p>Permissions are now properly checked for category and workflow settings when new stories, media, and template assets are created. [David]</p>

</li>
<li><p>New templates are now active by default. [David]</p>

</li>
<li><p>Fixed bug where the &quot;Checkin/Publish&quot; (and &quot;Checkin/Deploy&quot;) button wasn&#39;t provided to users who had EDIT access to a the assets on a desk. Permissions are now properly checked and the button displayed for those who can publish from a desk. [David]</p>

</li>
<li><p>Added missing debugging statement to Bric::Util::DBI. Thanks to Mark for the spot. [David]</p>

</li>
<li><p>The SOAP interface now properly logs events for its activities. [David]</p>

</li>
<li><p>Previewing a story while searching for a related story to link to an element no longer replaces the Bricolage UI with the preview, as was happening with some browsers. Instead, a separate preview window is opened. [David]</p>

</li>
<li><p>When publishing a media asset, its name will not be properly added to the UI message, without causing an error. [Petar Bojkov]</p>

</li>
<li><p>Fixed exception class name in Handler.pm. [Scott]</p>

</li>
<li><p>Fixed installation system bug caused by inst/conf.pl loading Bric::Config during &quot;make install&quot;. Thanks to Louis Moore for the report. [Sam]</p>

</li>
<li><p>Added missing <code>list_ids()</code> method to Bric::Biz::Category. [David]</p>

</li>
</ul>

<h1 id="Version-1.4.4-2002-10-27-">Version 1.4.4 (2002-10-27)</h1>

<h2 id="Bug-Fixes52">Bug Fixes</h2>

<ul>

<li><p>Empty listManager lists no longer have a gap in them. [David]</p>

</li>
<li><p>Made the table around the formBuilder radio buttons prettier. [David]</p>

</li>
<li><p>Fixed numbering of sections in Media profile so that the numbers don&#39;t skip. [David]</p>

</li>
<li><p>Updated display of existing contributors in the &quot;Edit Contributors&quot; screen of the story and media asset profiles to use listManager. This makes them look like they do everywhere else (and uses less code, to boot!). [David]</p>

</li>
<li><p>Improved error messages thrown in exceptions in Bric::Util::Trans::FTP. [David]</p>

</li>
<li><p>Removed code and documentation for PostgreSQL 7.3 compatibility. With the release of 7.3b2, it&#39;s no longer needed. [David]</p>

</li>
<li><p>Fixed &quot;make clone&quot; to properly include database contents in clone distribution. [Sam]</p>

</li>
<li><p>Added <code>&lt;meta http-equiv=&quot;Content-Type&quot;&gt;</code> tag to the <code>&lt;head&gt;</code> to <i>header.mc</i> so that the browser knows to send text back to Bricolage in the expected character set. [Mark]</p>

</li>
<li><p>Changed the default character set from ISO-8859-1 to UTF-8. With this setting, Bricolage does no character set translation, so it&#39;s faster. Furthermore, most users <i>should</i> be outputting UTF-8 in their templates, anyway. If you&#39;re not, then you&#39;re likely finding doing charset translation in all of your templates to be a big PITA. And if you&#39;re not doing charset translation, then you really <i>are</i> outputting UTF-8 in your templates, and just haven&#39;t realized it. [David]</p>

</li>
<li><p>Fixed bug when reverting stories and media with no associated contributors. [Mark]</p>

</li>
<li><p>&quot;Check In and Publish&quot; now works again for Media assets. Thanks to Matt Vella for the spot. [David]</p>

</li>
<li><p>Deleting assets on My Workspace now prompts the user to make sure s/he really wants to do that. Not sure how we missed this all this time! Thanks to Andrew Baio for the spot. [David]</p>

</li>
<li><p>Assets on Desks and My Workspace that are checked out to the the user whose viewing them will now always preview the version as currently edited by the user, rather than the last checked-in version. Other users still can only preview the last checked-in version. [David]</p>

</li>
<li><p>Clicking the &quot;Check In&quot; or &quot;Check In/Deploy&quot; buttons in a template profile now properly updates the template with any new data entered into the template profile before attempting a syntax check. This ensures that the latest data you&#39;ve entered gets its syntax checked before the template is checked in or deployed. [David]</p>

</li>
<li><p>Fixed a bug in Bric::Util::Class where classes couldn&#39;t be looked up by package name. This affected the &quot;Access Denied&quot; page. [David]</p>

</li>
<li><p>Made Bric::Util::Burner::Mason a little smarter handling exceptions. [David]</p>

</li>
<li><p>Fixed bug where Bric::SOAP::Category would fail to import ad strings. [David]</p>

</li>
<li><p>Fixed bug in <code>Bric::Util::Grp-&gt;has_member</code> where an already-added member wasn&#39;t always found. [Mark]</p>

</li>
<li><p>Conflicting URI messages for media assets no longer suggest changing the value of the slug, since media assets have no slug. [David]</p>

</li>
<li><p>The friendly messages confirming publishes are back. [David]</p>

</li>
<li><p>Fixed bug where selecting a large number of list options in the story profile would cause an SQL error. [Matt]</p>

</li>
<li><p>Fixed bug where Bric::SOAP would accept story element types for media and vice versa. Thanks to Evan Prodromou for the spot. [Sam]</p>

</li>
<li><p>Added code to installation scripts to delete existing Mason object files when upgrading. This hasn&#39;t been a problem thus far, but this step will help to ensure that users are always running the latest UI components. [David]</p>

</li>
<li><p>Fixed bug where deactivated element types weren&#39;t checked before creating a new element type with the same name as a deactivated element type. Thanks to Geoff Richards for the spot. [David]</p>

</li>
</ul>

<h1 id="Version-1.4.3-2002-09-28-">Version 1.4.3 (2002-09-28)</h1>

<h2 id="Bug-Fixes53">Bug Fixes</h2>

<ul>

<li><p>Fixed inconsistency between container element methods and their convenience accessors in Bric::Biz::Asset::Business. Thanks to Philip Fibiger for the spot. [David]</p>

</li>
<li><p>Assets can once again be recalled from the library and put on a desk. [David]</p>

</li>
<li><p>The <code>get_all_keywords()</code> method of Bric::Biz::Asset::Business works again. [David]</p>

</li>
</ul>

<h1 id="Version-1.4.2-2002-09-27-">Version 1.4.2 (2002-09-27)</h1>

<h2 id="Bug-Fixes54">Bug Fixes</h2>

<ul>

<li><p>Can once again check out multiple assets at once. Thanks to Andrew Baio for the spot. [David]</p>

</li>
<li><p>Templates once again behave themselves. There were some circumstances where they couldn&#39;t be checked in, generating &quot;Cannot checkin non checked out versions&quot; errors. These have been fixed. [David]</p>

</li>
<li><p>Some assets on My Workspace were getting &quot;Cannot checkin non checked out versions&quot; errors when they were checked in using the &quot;Check in to&quot; select list. This has been fixed. [David]</p>

</li>
<li><p>When templates are deployed, they now get a &quot;Template removed from Workflow&quot; event logged. [David]</p>

</li>
<li><p>Using the &quot;Check in to&quot; select list on My Workspace to check assets into the desk they&#39;re already on will no longer remove them from all desks altogether. [David]</p>

</li>
</ul>

<h1 id="Version-1.4.1-2002-09-25-">Version 1.4.1 (2002-09-25)</h1>

<h2 id="Bug-Fixes55">Bug Fixes</h2>

<ul>

<li><p>Upgrading from from a version prior to 1.3.3 no longer tries to create an index that already exists (and that will be dropped, anyway). [David]</p>

</li>
<li><p>Removed documentation for installing mod_proxy with Apache. [David]</p>

</li>
<li><p>Improved documentation for upgrading from older versions of Bricolage that were not installed by <code>make install</code>. Thanks to Andrew Baio for helping to identify the problems. [David]</p>

</li>
<li><p>Added <code>use Bric::Util::Grp::Keyword;</code> back into Bric::Biz::Keyword. This prevents some upgraded Bricolage installations from breaking. [David]</p>

</li>
<li><p>Added Net::FTPServer and Net::SFTP to the list of optional modules. [David]</p>

</li>
<li><p>Fixed some SQL errors uncovered by the release of PostgreSQL 7.3b1. [David]</p>

</li>
<li><p>Added code and documentation for compatibility with PostgreSQL 7.3. [David]</p>

</li>
<li><p>Media assets can now be distributed to more than one output channel at a time. [David]</p>

</li>
<li><p>Files are now distributed on a per-output channel basis, to ensure that the proper file is distributed to the proper destinations. [David]</p>

</li>
<li><p>Assets are now properly removed from workflow when they&#39;re deactivated (deleted in the UI). [David]</p>

</li>
<li><p>Template syntax is now properly checked when using the &quot;Checkin/Deploy&quot; button. [Jo&atilde;o Pedro]</p>

</li>
<li><p>The example generic template (autohandler) included in the database is now included in the burn root, too, since it&#39;s marked as &quot;Deployed&quot; in the database. [David]</p>

</li>
<li><p>Deleted output channels no longer show up in the &quot;New Template&quot; output channel select list. Thanks to Daniel Fisher for the spot. [David]</p>

</li>
<li><p>The root category (&quot;/&quot;) no longer returns itself as its own parent. [David]</p>

</li>
<li><p>Assets not in workflow are now properly logged as being checked out when someone checks them out. [David]</p>

</li>
<li><p>The &quot;Or Pick a Type&quot; menus in the Group manager, the Contributor manager, and the Element manager all work again. [David]</p>

</li>
<li><p>Changing category names now updates the name of the category asset group object, which appears in the user group permissions page. [David]</p>

</li>
<li><p>Hitting the &quot;enter&quot; key after filling in a search field now properly submits the search as if the &quot;Search&quot; button had been clicked. [David]</p>

</li>
<li><p>Changed libapreq requirement in Bric::Admin to read &quot;Apache::Request 1.0&quot;. This should make the installer install the most recent version of libapreq, instead of relying on whatever the OS provides. [David]</p>

</li>
<li><p>Changed value of autopopulated media asset data fields to an empty string when the value returned by the autopopulation method is <code>undef</code>. [David]</p>

</li>
<li><p>Fixed bug where autopopulated media asset data fields weren&#39;t properly autopopulated. [David]</p>

</li>
<li><p>Fixed problem with category upgrade script failing on category data created with 1.3.2. [Sam]</p>

</li>
<li><p>During installation, entering a directory name when prompted for the &quot;PID File Location&quot; now results in Bricolage using a file called &quot;httpd.pid&quot; in that directory, rather than trying (and failing) to use the directory itself as the PID file. [David]</p>

</li>
<li><p>The side navigation layer is now better aware of its context, and changes the colors of some of its graphics depending on the context. Also recreated the &quot;WORKFLOW&quot; tab graphics. It looks like this has been broken for over a year, and I only just noticed it! [David]</p>

</li>
<li><p>Slightly improved handling of assets that have forgotten where they are. [David]</p>

</li>
<li><p>Checked-out templates are now displayed only once (instead of twice) in the &quot;Find Templates&quot; manager. [David]</p>

</li>
<li><p>Added <code>get_new_objs()</code> method to Bric::Util::Coll so that Bric::Util::Grp&#39;s <code>has_member()</code> method can see a member even if it hasn&#39;t been saved to the database. Also changed Bric::Util::Grp to check for members in this way, of course. [David]</p>

</li>
<li><p>Assets retrieved from the library now appear on the desk they&#39;re checked out into only once (instead of twice). This thanks to the above-noted changes to Bric::Util::Grp. [David]</p>

</li>
<li><p>Added upgrade script <i>inst/upgrade/1.4.1/clean_desks.pl</i> to clean up existing duplicate listings of assets on desks. [David]</p>

</li>
<li><p>Removed the <code>checkin()</code> method from Bric::Biz::Asset::Template and Bric::Biz::Asset::Business and put it into Bric::Biz::Asset, instead, since it&#39;s exactly the same for all assets. [David]</p>

</li>
<li><p>Fixed the display of permissions settings to be more consistent with the design and layout of the rest of the application. Also neatened listManager display a bit. [David]</p>

</li>
<li><p>Fixed misnamed database constraint. [David]</p>

</li>
<li><p>Templates can once again be retrieved from the library and checked out for revising. [David]</p>

</li>
<li><p>Assets on a desk now no longer have the current desk listed in the &quot;Move to&quot; select list. Even if they did, selecting the current desk would no longer remove an asset from workflow! Thanks to Andrew Baio for the spot. [David]</p>

</li>
<li><p>The installer is now much more intelligent about prompting for SSL information. It won&#39;t ask if you want to use SSL if it can&#39;t find mod_ssl or apache_ssl, and will only prompt you to pick one or the other if it can find both. [David]</p>

</li>
</ul>

<h1 id="Version-1.4.0-2002-09-02-">Version 1.4.0 (2002-09-02)</h1>

<h2 id="New-Features18">New Features</h2>

<ul>

<li><p>Fetching objects from Bric::Biz::Asset::Business::Media has been optimized for greater speed. [Jo&atilde;o Pedro]</p>

</li>
<li><p>PostgreSQL &quot;NOTICE&quot; messages are now suppressed during installation. Instead, a series of dots will be displayed to indicate progress loading the database. [David]</p>

</li>
<li><p>Added README.MacOSX. [David]</p>

</li>
<li><p>You can now pass a date format string argument to the <code>get_data()</code> method of container elements in templates (and elsewhere, for that matter). This is useful if the data you&#39;re retrieving is of the &quot;date&quot; type, and you don&#39;t want the date to be formatted in the format specified in the &quot;Date Format&quot; preference. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes56">Bug Fixes</h2>

<ul>

<li><p>The Element Type manager now displays properly again without errors. [David]</p>

</li>
<li><p>Assets are now properly removed from desks when they are published or moved from one desk to another. More generally, any time a single object is removed from a group, it will be properly removed. [David]</p>

</li>
<li><p>Media profile now display the proper category in the Category select list. [David]</p>

</li>
<li><p>Media assets with no associated media file now generate a message indicating that no file will be distributed, and are properly removed from workflow when published. [David]</p>

</li>
<li><p>Some media asset events weren&#39;t getting logged properly Now they are. [David]</p>

</li>
<li><p>Database transactions are now properly maintained when publishing assets. Everything was working, but DBI <code>AutoCommit</code> was getting turned on, and this likely slowed some things down a bit. [David]</p>

</li>
<li><p>Assets can once again be found via the &quot;Find&quot; pages and recalled into a workflow without error. [David]</p>

</li>
<li><p>Module man pages are now properly installed under Perl 5.8.0. Thanks to Michael Schwern for helping to diagnose the problem and come up with a solution. [David]</p>

</li>
<li><p>The select list of desks to transfer an asset to on My Workspace now includes all possible desks, including the one for which there is a link. [Jo&atilde;o Pedro]</p>

</li>
<li><p>All Bricolage <i>.pod</i> files are now installed and converted to <code>man</code> pages along with all of the <i>.pm</i> files. [David]</p>

</li>
<li><p>Corrected a bunch of spelling errors in this file. [David]</p>

</li>
<li><p>Calling <code>get_data()</code> on a container element in templates (or elsewhere, for that matter) now properly ignores container subelements. Likewise for <code>get_container()</code>, which how properly ignores data subelements. [David]</p>

</li>
<li><p>All of the <i>.pl</i> and <i>.tst</i> files in <i>lib/</i> no longer clutter up the distribution created by <code>make dist</code>. [David]</p>

</li>
<li><p>Much of the POD documentation in the API classes has been cleaned up, and converting them to man pages no longer generates any error messages. [David]</p>

</li>
<li><p>The install process will now find Apache modules in /usr/lib/apache/modules, which is where they are in OpenBSD. Thanks to Mark Johnson for his help tracking this one down. [Sam]</p>

</li>
<li><p>The install process will no longer install an incompatible version of HTML::Mason (&gt;1.09). [Sam]</p>

</li>
<li><p>The <i>bric_dist_mon</i> program works again. [David]</p>

</li>
</ul>

<h1 id="Version-1.3.3-2002-08-24-">Version 1.3.3 (2002-08-24)</h1>

<h2 id="New-Features19">New Features</h2>

<ul>

<li><p>Revised Bric::Biz::Keyword implementation to improve performance. The new implementation no longer relies on the Bric::Util::Grp system. Also implemented API and database support for Media keywords. [Sam]</p>

</li>
<li><p>Added support for search Media by category and file name through the SOAP interface and standard API. [Sam]</p>

</li>
<li><p>Added new <code>--save-cookie-file</code> and <code>--use-cookie-file</code> options to <i>bric_soap</i> to allow authentication to span <i>bric_soap</i> calls. This can result in significant time savings across multiple invocations. [Matt]</p>

</li>
<li><p>Added new <code>--chunks</code> option to the <i>bric_soap</i> tool to avoid problems with timeouts on large workloads. Currently only supports the workflow commands (<code>publish</code>, <code>deploy</code>, <code>checkin</code>, <code>checkout</code>, <code>move</code>), but it will be expanded to other long-running commands in the future. [Sam]</p>

</li>
<li><p>Improved performance of search paging. ListManager now only builds the output rows that will actually be shown on the screen. For large data sets this results in a huge gain in search speed. [Adam and Sam]</p>

</li>
<li><p>Revised category implementation to use explicit <code>uri</code> and <code>parent_id</code> fields rather than relying on the Bric::Util::Grp system. This improves performance tremendously for larger numbers of categories. [Jeff Pinyan]</p>

</li>
<li><p>Added new <code>--continue-on-errors</code> option to <i>bric_soap</i> to prevent non-fatal errors from ending the process. [Sam]</p>

</li>
<li><p>Beautified the list paging interface. [David]</p>

</li>
<li><p>Added new Media Type manager. [Scott]</p>

</li>
<li><p>Added list reverse feature. [Scott]</p>

</li>
<li><p>Added SFTP mover. [Scott]</p>

</li>
<li><p>Add support for Apache-SSL. This required a change to the context of the <i>bricolage.conf</i> <code>ENABLE_SSL</code> directive to indicate the type of SSL support: none, apache_ssl, or mod_ssl. [Michael Robinton]</p>

</li>
<li><p>Added support for manual httpd configuration. Split out dynamic configuration from ApacheConfig.pm and move to a new module, ApacheStartup.pm, that sets no Apache configuration directives. ApacheConfig.pm calls this module. [Michael Robinton]</p>

</li>
<li><p>Added <i>bricolage.conf</i> configuration directive to force the start up process to always write out a <i><code>$TEMP_DIR</code>/bricolage/bric_httpd.conf</i> as an <i>httpd.conf</i> include file. [Michael Robinton]</p>

</li>
<li><p>Moved SSL key and certificate configuration from global <i>httpd.conf</i> settings to per virtual host via <i>bricolage.conf</i> configuration directives. [Michael Robinton]</p>

</li>
<li><p>Added a <code>bricolage.conf</code> directive to force the user to always use SSL. [Michael Robinton]</p>

</li>
<li><p>Added <code>get_data()</code> method to Bric::Util::Grp::Parts::Member::Contrib. This method takes a simpler scalar argument and returns the relevant attribute. This bit of syntactic sugar makes contributor objects behave a bit more like <code>$element</code> objects in templates, thus simplifying things for template developers. [David]</p>

</li>
<li><p>Categories now default to sorting by URI, and the URI is the searchable field, rather than name. [David]</p>

</li>
<li><p>Vastly improved the speed at which categories can be imported via SOAP. [David]</p>

</li>
<li><p>Makefile now confirms location of Apache and PostgreSQL to allow for systems with multiple versions of each available. [Sam]</p>

</li>
<li><p>Added &quot;make clone&quot; command to the installation system to create distributions based on existing Bricolage systems. [Sam]</p>

</li>
<li><p>Added <i>bricolage.conf</i> directive to enable/disable the browser toolbar for debugging and development. Documented in <a rel="section" href="../../../2.0/api/Bric/Hacker.html" name="Bric::Hacker">Bric::Hacker</a>. [Michael Robinton]</p>

</li>
<li><p>Added support for running Bricolage with SSL support on arbitrary ports. Previous versions required https support to use only port 80 for http and port 443 for https. With this release, Bricolage fully supports http and https service on any ports. This allows the Apache daemon supporting Bricolage to be run with a minimum number of children while still allowing normal http and https service on the standard ports with a light-weight Apache daemon. See the <i>INSTALL</i> file (or <a rel="section" href="../../../2.0/api/Bric/Admin.html" name="Bric::Admin">Bric::Admin</a>) for full details and an example installation procedure. [Michael Robinton]</p>

</li>
<li><p>Added new <i>bric_apachectl</i> command &quot;single&quot;. This command will start Bricolage in single-process mode. This mode is principally useful for debugging. [Michael Robinton]</p>

</li>
<li><p>The size of the database column that stores custom field options (such as for select lists) has been changed to the TEXT PostgreSQL type, so that the number of options isn&#39;t arbitrarily limited. [Matt Vella]</p>

</li>
<li><p>The group API has been approximately 75% rewritten. The goal was to optimize its performance, since group activity proved to be a serious bottleneck to Bricolage performance. Those interested in the nitty-gritty details of the rewrite can read about them <a href="http://sourceforge.net/mailarchive/forum.php?thread_id=967943&forum_id=561">here</a>.</p>

</li>
</ul>

<h2 id="Bug-Fixes57">Bug Fixes</h2>

<ul>

<li><p>Added constraint to the group table to keep a group from having itself as a parent. Thanks to Jo&atilde;o Pedro Gon&ccedil;alves for the patch. [David]</p>

</li>
<li><p>Fixed bug in side navigation where an HTML table was opened but not closed. [Charles Albrecht]</p>

</li>
<li><p>Fixed bug where installation system would chown all of the chosen TEMP_DIR to SYS_USER. Thanks to Dave Rolsky for the report. [Sam]</p>

</li>
<li><p>Fixed a bug in the installation system that was creating empty comp/comp and data/data directories BRICOLAGE_ROOT. Thanks to Michael for the spot. [Sam]</p>

</li>
<li><p>Fixed remote previews to redirect to a better URL. [Mark]</p>

</li>
<li><p>Fixed a bug where trying to create a story through the SOAP interface containing a contributor with an empty middle name would fail. [Sam]</p>

</li>
<li><p>Changed strftime instances of &#39;%G&#39; to &#39;%Y&#39; in URI preference, as this seems to be more portable. [David]</p>

</li>
<li><p>Fixed bug that was preventing &#39;make upgrade&#39; from running database upgrade scripts. [Sam]</p>

</li>
<li><p>Fixed broken &quot;Log&quot; link on Media Search results screen. [Sam]</p>

</li>
<li><p>Fixed bug where deleted output channels were showing up in list of available output channels in the element profile. [David]</p>

</li>
<li><p>Fixed conflict in list manager that prevented some lists from working properly. Probably never showed up before, as we only noticed it with the new Media Type manager. Thanks to Scott for the heads-up. [David]</p>

</li>
<li><p>The <code>PREVIEW_MASON</code> configuration directive no longer is no longer defaulting to on in one context and off in another. It is now off by default. Thanks to Michael Slattery for the spot! [David]</p>

</li>
<li><p>Eliminated the password field type from the formBuilder interface used for contributor types and elements. Its inclusion up to now may be considered a bug. [David]</p>

</li>
<li><p>Fixed cover date editing to repopulate correctly on the Story profile screens. [Matt]</p>

</li>
<li><p>Fixed bug where previewing a story assigned to multiple categories would preview to a random category. Now the primary category is always chosen. [Sam]</p>

</li>
<li><p>Fixed display and editing of dates more than one year in the past. [Matt]</p>

</li>
<li><p>Fixed bug where setting CHAR_SET to UTF-8 in bricolage.conf would result in blank output. [Sam]</p>

</li>
<li><p>Changed Category manager to display no categories by default, only display them after a search. This is because some folks have a <i>lot</i> of categories. [David]</p>

</li>
<li><p>Fixed bug where when <code>SYS_USER</code> and/or <code>SYS_GROUP</code> wasn&#39;t in <i>bricolage.conf</i>, Bric::Config would use the username &quot;nobody&quot; instead of the UID for the user &quot;nobody&quot;. [David]</p>

</li>
<li><p>Adding a note to a story that has not yet been saved no longer causes an error. [David]</p>

</li>
<li><p>Fixed &quot;make dist&quot; to work on Mac OS/X and FreeBSD. [Sam]</p>

</li>
<li><p>Fixed a problem in Bric::Util::Burner::Template where a newly added template wouldn&#39;t be picked up by &lt;tmpl_include&gt;. This was due to caching being turned on. HTML::Template&#39;s cache doesn&#39;t know that a new compilation would turn up a difference &lt;tmpl_include&gt; so it continues to use the old one. [Sam]</p>

</li>
<li><p>Fixed installer to not require unneeded Apache modules (mod_proxy and mod_rewrite). [Sam]</p>

</li>
<li><p>Fixed installer to first ask whether SSL support is desired before asking for a specific SSL module. [Sam]</p>

</li>
<li><p>Fixed documentation bug in Bric::Admin concerning PostgreSQL paths. Thanks to Vicki Brown for the catch. [Sam]</p>

</li>
<li><p>Fixed installation system to fail if there are errors importing the database. Also added test for missing or empty bricolage.sql. [Sam]</p>

</li>
<li><p>Fixed installation system to support optional modules and not force users to install them. [Sam]</p>

</li>
<li><p>Fixed bug that prevented the contents of fields to be updated through Bric::SOAP. [Sam]</p>

</li>
<li><p>Fixed &quot;Checkin and Publish&quot; button to only appear if the user has permissions to publish. [Matt]</p>

</li>
<li><p>Fixed bug where text pasted into Bulk Edit textarea box was getting words smooshed together. Thanks to Rachel Murray for the spot. [David]</p>

</li>
<li><p>Fixed bug where date field elements weren&#39;t getting properly converted between the local time zone and UTC, which is the time zone of all the dates in the database. Thanks to Matt Vella for the spot. [David]</p>

</li>
<li><p>Fixed issue where Bric::Util::Grp was adding every member of a group whenever a new member was added. This was very wasteful, and slowed performance a great deal for groups with thousands of members. Thanks to Mark for the spot. [David]</p>

</li>
<li><p>Added check for Category &quot;Directory&quot; string to make sure that no non-URL characters are added. [Matt Vella]</p>

</li>
<li><p>Clicking &quot;Cancel&quot; when editing keywords in a new story now properly returns to the story profile, rather than to the last screen before the story was created. [David]</p>

</li>
<li><p>Deleting a a contributor immediately after adding one no longer causes all of the contributors to be deleted on check-in. [David]</p>

</li>
<li><p>Contributors are now properly reverted when stories and media are reverted. [David]</p>

</li>
</ul>

<h1 id="Version-1.3.2-2002-06-09-">Version 1.3.2 (2002-06-09)</h1>

<h2 id="New-Features20">New Features</h2>

<ul>

<li><p>Added --chunks option to bric_republish to publish stories in batches. This is useful to avoid timing out on long runs. [Sam]</p>

</li>
<li><p>Added [Check In / Publish] button to Story Profile to checkin and publish in one step. [Matt]</p>

</li>
<li><p>Added needs_publish() method and associated published_version database field to Bric::Biz::Asset. This method is now used by the publisher to determine if something needs republishing. Added new graphics to display this information on the desks. [Matt]</p>

</li>
<li><p>Moved repeated publish and preview functionality into Bric::Util::Burner. Updated Mason code and Bric::SOAP::Workflow accordingly. [Matt]</p>

</li>
<li><p>Added <code>DBI_PROFILE</code> bricolage.conf option and <code>bric_dbprof</code> script to allow profiling of Bricolage database performance. [Sam]</p>

</li>
<li><p>Added <code>bric_apachectl debug</code> command to run Bricolage under the Perl debugger using Apache::DB. [Sam]</p>

</li>
<li><p>Added checks to make sure Story and Media URIs are unique within the system. [Matt]</p>

</li>
<li><p>Added search paging preference to break search results into multiple pages. [Adam]</p>

</li>
<li><p>Added support for running Bricolage under Devel::Profiler with the new PROFILE configuration option. [Sam]</p>

</li>
<li><p>Added support for Apache::SizeLimit to keep Apache process size under control. [Adam]</p>

</li>
<li><p>Revised Bric::App::Cache to improve performance. The new system is a two-level cache with Cache:Mmap and Cache::Cache. This results in a 2x speedup on some cache-sensitive operations. [Sam]</p>

</li>
</ul>

<h2 id="Bug-Fixes58">Bug Fixes</h2>

<ul>

<li><p>Clicking &quot;Add More&quot; when editing contributor contacts now retains any changes made to the contributor profile. This matches the functionality of the user profile. Thanks to Jo&atilde;o Pedro Gon&ccedil;alves for the spot. [David]</p>

</li>
<li><p>Fixed bug in Bric::SOAP::Element where deleting an element or field could cause SQL errors due to overflowing the name field. [Sam]</p>

</li>
<li><p>Removed Bric::SOAP::Element-&gt;delete(force =&gt; 1) which could cause data corruption in existing stories. Also removed dependent options in bric_dev_sync (--delete-existing) and bric_soap (--force). [Sam]</p>

</li>
<li><p>Fixed bug in Bric::SOAP::Element where updating an element could cause Stories using that element to lose track of their field data. [Sam]</p>

</li>
<li><p>Fixed bug in Bric::Util::Burner::Template where &lt;tmpl_include&gt;s caused syntax errors. [Sam]</p>

</li>
<li><p>The Bric::Biz::Category class method get_attr() now returns attributes for category ID 0 as well as all other categories. [Jo&atilde;o Pedro Gon&ccedil;alves]</p>

</li>
<li><p>Fixed bug in DBI_DEBUG and DBI_CALL_TRACE options where non-prepared queries (row_aref(), all_aref(), etc.) were not being logged. [Sam]</p>

</li>
<li><p>Fixed bug in Bric::Dist::Resource that was causing publish to run very slowly by executing a bad database query. [Sam]</p>

</li>
<li><p>Related to the last item, fixed a bug in Bric::Util::Coll that would call the href() method on a class and pass in undefined values as parameters. This will happen if a collection is created for a new object that does not yet have an ID. The fix thus prevents the &quot;= NULL&quot; SQL syntax, which always matches nothing. The new syntax for constructing a collection has been implemented across the API. [David]</p>

</li>
<li><p>Fixed bug where the root category wasn&#39;t able to be added to a category group. Actually, this fixes a problem where any object with an id of 0 couldn&#39;t be added to a group. Thanks to Mark for the spot. [David]</p>

</li>
<li><p>Changed mover list to be sorted in alphabetical order in the Destination profile. This has the benefit of forcing &quot;FTP&quot; to be listed before &quot;File System&quot; -- Hurray for case-sensitive ordering! Thanks to Sam for the complaint. [David]</p>

</li>
<li><p>The OS for a destination server now defaults to the OS of the server on which Bricolage is installed instead of &quot;Mac&quot;. Thanks to Sam for the spot. [David]</p>

</li>
<li><p>Deleted destinations will now be dissociated from output channels when they&#39;re deleted. This prevents stories from being published to deleted destinations. Thanks to Mark for the heads-up. [David]</p>

</li>
<li><p>Fixed bug where attribute metadata wasn&#39;t getting deleted when it was supposed to. [Jo&atilde;o Pedro Gon&ccedil;alves]</p>

</li>
<li><p>Fixed bug where some browsers submit an image button with a value stored in the image button&#39;s name as well as in the name with &quot;.x&quot; and &quot;.y&quot; appended to it. This caused callbacks to be triggered twice for a single field! I noticed this with Mozilla on Mac OS X, and presume it would happen elsewhere, too. [David]</p>

</li>
<li><p>Fixed bug in navigation bar HTML that caused the bar to disappear on certain browsers. [Rachel Murray]</p>

</li>
<li><p>Fixed bug in Bric::SOAP where Bricolage exceptions resulted in an uninformative &quot;Application error&quot; message. Now the full exception message is displayed. [Sam]</p>

</li>
<li><p>Fixed installation to work under Debian Linux 3.0 (testing). Thanks to Mark Jaroski for a helpful patch. [Sam]</p>

</li>
<li><p>Changed length of Bric::Dist::Job name attribute from 64 characters to 256. This allows long asset names to be used. Also added code to Bric::Dist::Job to ensure that the name property is truncated if it&#39;s longer than 256 characters. Thanks to Josh Cox for the spot. [David]</p>

</li>
<li><p>Fixed bug where dumber browsers would submit a new template without any Element selected. Thanks to Michael Robinton for reporting the bug. [David]</p>

</li>
<li><p>All stories and media are now required to be associated with a category. For stories, the primary category cannot be deleted. If you want to change the primary category, add a new category, change it to the primary, and then delete the old primary category. This fix prevents previews and publishes from breaking on stories and media that had no categories. Thanks to Mark for the heads-up. [David]</p>

</li>
<li><p>An overhaul of the burn system had regressed the Output Channel preview functionality. I&#39;ve put it back now. [Mark]</p>

</li>
<li><p>Fixed button JavaScript to work correctly in Mozilla. [Matt]</p>

</li>
<li><p>Fixed bug in HTML::Template burner that prevented &lt;tmpl_include&gt;s from working in some cases. [Sam]</p>

</li>
<li><p>Numerous spelling errors were fixed by Scott Lanning. Thanks!</p>

</li>
<li><p>In the Element manager, doing a search after selecting an Element Type from which to display elements no longer causes an error. Thanks to Adam Robinson for the spot. [David]</p>

</li>
<li><p>Made the parent category field in the Category Profile a required field. [Mark]</p>

</li>
<li><p>Fix Bric::Util::FTP::FileHandle to work with a modified date-formatting preference. [Matt]</p>

</li>
<li><p>Fixed section numbering in the Contributor Type profile. [Scott Lanning]</p>

</li>
</ul>

<h1 id="Version-1.3.1-2002-04-03-">Version 1.3.1 (2002-04-03)</h1>

<h2 id="New-Features21">New Features</h2>

<ul>

<li><p>Bricolage SOAP interface fully implemented. The command-line clients bric_soap, bric_dev_sync and bric_republish are all complete. [Sam]</p>

</li>
<li><p>Bricolage now comes with a configure script and a Makefile for easier installation and configuration. [Mark Jaroski]</p>

</li>
<li><p>Removed MD5 Perl module requirement by requiring Apache::Session 1.54 or higher. [David]</p>

</li>
<li><p>Added new FTP distribution move method. Now you can distribute files either via a file system copy or via FTP. [David]</p>

</li>
<li><p>Added a preference to change the way URIs are formatted. [Adam]</p>

</li>
<li><p>Added a URI case preference to force URIs to lowercase, uppercase, or allow mixed case URIs. [Adam]</p>

</li>
<li><p>Categories are now all listed and sorted by URI in select lists. [Sam]</p>

</li>
<li><p>The cache is now cleared when the Apache server is started or restarted. This avoids potential problems with stale data in the cache. [Sam]</p>

</li>
</ul>

<h2 id="Bug-Fixes59">Bug Fixes</h2>

<ul>

<li><p>Fixed numerous cases where user_ids were being used as booleans. Since user_id 0 is the Administrator&#39;s user_id this can cause problems. [Sam]</p>

</li>
<li><p>Fixed problem where deleting an asset would fail with the &quot;cannot check-in non checked-out version&quot; error. [Sam]</p>

</li>
<li><p>Fixed bug in HTML::Template burner when an element name had more than one space in it. [Sam]</p>

</li>
<li><p>Fixed bug in database that prevented element names over 32 characters from working properly. [Sam]</p>

</li>
<li><p>Fixed bug where trying to preview a story without a Preview destination and PREVIEW_LOCAL off would result in a Mason error. [Sam]</p>

</li>
<li><p>Fixed bug in Bric::SOAP::Story-&gt;create() where data element order was getting lost. Thanks to Mike Slattery for the spot. [Sam]</p>

</li>
<li><p>Fixed bug in HTML::Template burner where templates in non-root categories could not be found. Thanks to Marlon Bermas for the spot. [Sam]</p>

</li>
<li><p>Fixed Bric::Util::FTP::FileHandle to create new revisions on PUT. [Sam]</p>

</li>
<li><p>Deleting a contributor will no longer break stories with which the contributor is associated. Thanks to Rachel Murray for the spot. [David]</p>

</li>
<li><p>Invalid configuration directives in bricolage.conf will now be caught and keep Bricolage from starting. [Sam]</p>

</li>
<li><p>The view button in the element profile now works correctly. Thanks to Jo&atilde;o Pedro Gon&ccedil;alves for the spot. [David]</p>

</li>
<li><p>Changed all strftime instances of &#39;%G&#39; to &#39;%Y&#39;, as this seems to be more portable. [David]</p>

</li>
<li><p>Checking in a template from a template profile now performs a syntax check of the template just as saving the template does. [Jo&atilde;o Pedro Gon&ccedil;alves]</p>

</li>
<li><p>Notes attached to stories and media are now once again editable from the desk and profile views if they&#39;re checked out to the current user, and only viewable otherwise. Thanks to Tracey Largay for the spot. [David]</p>

</li>
<li><p>Fixed a few poorly-named time zones in the time zone preference. More still needs to be done here, actually. [David]</p>

</li>
<li><p>Implemented the chk_syntax() method in Bric::Util::Burner::Template. [Sam]</p>

</li>
</ul>

<h1 id="Version-1.3.0-2002-02-10-">Version 1.3.0 (2002-02-10)</h1>

<h2 id="New-Features22">New Features</h2>

<ul>

<li><p>Bricolage SOAP interface partially implemented. Bric::SOAP::Story and Bric::SOAP::Media are fully implemented and tested. The command-line client - bric_soap - is complete. [Sam]</p>

</li>
</ul>

<h2 id="Bug-Fixes60">Bug Fixes</h2>

<ul>

<li><p>Fixed numerous cases where user_ids were being used as booleans. Since user_id 0 is the Administrator&#39;s user_id this can cause problems. [Sam]</p>

</li>
<li><p>Fixed problem where deleting an asset would fail with the &quot;cannot check-in non checked-out version&quot; error. [Sam]</p>

</li>
<li><p>Fixed bug in HTML::Template burner when an element name had more than one space in it. [Sam]</p>

</li>
<li><p>Fixed bug in database that prevented element names over 32 characters from working properly. [Sam]</p>

</li>
<li><p>All fixes in the soon-to-be-released 1.2.1 version. See below for details.</p>

</li>
</ul>

<h1 id="Version-1.2.3-2002-03-17-">Version 1.2.3 (2002-03-17)</h1>

<p>Functionally equivalent to 1.2.2, but includes required files missing from the 1.2.2 distribution.</p>

<h1 id="Version-1.2.2-2002-03-15-">Version 1.2.2 (2002-03-15)</h1>

<h2 id="New-Features23">New Features</h2>

<ul>

<li><p>Added chk_syntax() methods to Bric::Util::Burner and its subclasses. This method will takes a template asset object and make sure that it compiles. Bric::Util::Burner::chk_syntax() delegates to the proper subclass.</p>

</li>
</ul>

<h2 id="Bug-Fixes61">Bug Fixes</h2>

<ul>

<li><p>Some misspellings were corrected in Bric::Admin. Thanks to Ask Bjoern Hansen for the spot. [David]</p>

</li>
<li><p>Fixed broken &quot;Return&quot; buttons on related media and related story pages. [David]</p>

</li>
<li><p>Fixed bug where assets weren&#39;t activated when they were created and then checked in without clicking the &quot;Save&quot; button. [David]</p>

</li>
<li><p>Fixed bug where a fixed story&#39;s slug was getting used in its URI. [David]</p>

</li>
<li><p>Fixed broken image autopopulation fields (compression, height, width, etc.) [David]</p>

</li>
<li><p>Fixed broken support for audio and video files. These can be set up by the Media Type menu in Element Types. Eventually these should arrange for some fields to be auto-populated (e.g., bit rate, frame size, length, encoding, etc.). [David]</p>

</li>
<li><p>Fixed bug where Categories with the same directory name could not be created. Thanks to Andrew Baio for the spot. [David]</p>

</li>
<li><p>Fixed a bug where a user couldn&#39;t look at her own event log if she didn&#39;t have permission. Thank to Michael Alan Dorman for the spot. [David]</p>

</li>
<li><p>Fixed a bug where permissions set to access workflows and desks had no affect on the display of workflows and desks. Thanks to Rachel Murray for the spot. [David]</p>

</li>
<li><p>Fixed bug where attempting to create a destination with the same name as an existing but deactivated destination triggered an SQL error. Thanks to Michael Alan Dorman for the spot. [David]</p>

</li>
<li><p>Fixed bug where Workflows with spaces in their names would not create proper submenus in the left navigation bar. Thanks to the WHO for the spot [David]</p>

</li>
<li><p>Fixed bug where the wrong story might be previewed when clicking the title of a story in My Workspace or on a desk. [David]</p>

</li>
<li><p>Changing the category a media asset is in now correctly updates the underlying category object and the URI without the media asset needing to be checked in. [Matt Vella]</p>

</li>
<li><p>Eliminated &quot;Template compile failed&quot; errors for templates with &lt;%init&gt; sections. [David]</p>

</li>
<li><p>Field elements now show up with their display names in the bulk edit select lists, instead of with their names (which are really keys). [David]</p>

</li>
<li><p>Eliminated &quot;Use of uninitialized value in bitwise or (|)&quot; warnings when checking permissions. Thanks to Sam Tregar for the spot. [David]</p>

</li>
<li><p>Custom fields in elements and contributor types now remember their &quot;size&quot; setting. Thanks to Sam Tregar for the spot. [David]</p>

</li>
<li><p>The Element select list on the new Template profile no longer lists media elements, since media assets don&#39;t use templates. [David]</p>

</li>
<li><p>Removed old XML::Writer stuff from Bric::Util::Burner, since I moved it to Bric::Util::Burner::Mason a while ago and it was causing some problems. Thanks to Michael Robinton for the spot. [David]</p>

</li>
<li><p>Fixed typo in Bric::Hacker spotted by Axel Beckert. [Sam]</p>

</li>
<li><p>The CREATE permission works properly now. Thanks to Rachel Murray for the spot. [David]</p>

</li>
</ul>

<h1 id="Version-1.2.1-2002-02-25-">Version 1.2.1 (2002-02-25)</h1>

<h2 id="New-Features24">New Features</h2>

<ul>

<li><p>Created new method of configuring Bricolage in Apache. For mod_perl 1.26 and earlier, a custom config file will be written to the bricolage temp directory every time Bricolage is started or restarted. For mod_perl 1.27 and later, no temp file will be written. [David]</p>

</li>
<li><p>Added support for Mozilla (and there was much rejoicing!). [David]</p>

</li>
<li><p>Changed password for the default &quot;admin&quot; user to &quot;change me now!&quot; [David]</p>

</li>
<li><p>The slug is stored in the database for both fixed and non-fixed stories. This is in anticipation of adding the ability to use the slug for fixed story URIs later on. Thanks to Darren Graves for the patch.</p>

</li>
<li><p>Added DISABLE_NAV_LAYER directive. It&#39;s off by default, but if you turn it on in bricolage.conf, the side navigation layer will be rendered as plain HTML in every page instead of as a separate layer. [David]</p>

</li>
<li><p>Documented PERL_LOADER directive in Bric::AdvTemplates. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes62">Bug Fixes</h2>

<ul>

<li><p>Turned off the PREVIEW_MASON configuration directive in bricolage.conf. It should be off by default. [David]</p>

</li>
<li><p>Deleted Output Channels now properly don&#39;t show up in the Output Channel manager again. Thanks to Sara for the spot! [David]</p>

</li>
<li><p>All previews now preview assets in the primary Output Channel only. Previously, the previews were in the Output Channel whose name came first alphabetically. Thanks to Sara Wood for catching this bug. [David]</p>

</li>
<li><p>Fixed bug where templates often couldn&#39;t be found by the Mason burner if the output channel had a post_path. [David]</p>

</li>
<li><p>Fixed bug where templates often couldn&#39;t be found by the HTML::Template burner if the output channel had a post_path. [Sam]</p>

</li>
<li><p>Fixed some problems with the sideNav menus under Netscape. [David]</p>

</li>
<li><p>Fixed broken &quot;Preview&quot; button in Read-only story profile and in related story elements. [Matt Vella]</p>

</li>
<li><p>Updated debugging code to accommodate new syntax in Cache::Cache. Thanks to Sam Tregar for the spot. [David]</p>

</li>
<li><p>Fixed problem with Element names containing non-alphanumeric characters. [Sam]</p>

</li>
<li><p>Checking out media assets from &quot;Find Media&quot; now redirects you to the media profile if you&#39;ve checked out one media asset, or My Workspace if you&#39;ve checked out more than one. This puts it in line with how &quot;Find Stories&quot; and &quot;Find Templates&quot; work. Thanks to Sam for the report. [David]</p>

</li>
<li><p>Fixed bulk edit functionality for Media assets. Thanks to Sam for the spot. [David]</p>

</li>
<li><p>In Bric::Biz::Asset::Business, the source get_meth key in my_meths() now works properly. Also, get_all_keywords() now also returns the category keywords as well as the story keywords. Thanks to Darren Graves for the patch.</p>

</li>
<li><p>Removed quotation marks from DEF_MEDIA_TYPE setting in <i>bricolage.conf</i>. Thanks to Darren Graves for the spot. [David]</p>

</li>
<li><p>Sorting assets by ID in &quot;Find X&quot; and Workspace/Desk view now properly does a numeric sort rather than an alphanumeric sort. Thanks to Sam Tregar for the spot. [David]</p>

</li>
<li><p>Fixed an obscure bug where, for files uploaded as part of a Media file, Bricolage attempted to create a path on its own file system using path delimiters for another file system. Thanks to Mike Slattery for the spot. [David]</p>

</li>
<li><p>Required content fields in stories and elements are now displayed in the order specified in the Element profile. Thanks to Sam Tregar for the spot. [David]</p>

</li>
<li><p>All assets now start with the version number 0 until the first time they are checked in. Also, they will show up on desks and in the Find views after the first time they are saved. It was inconsistent before, and some items could not be seen in the desk and Find views until they were checked in. Thanks to Sam for spotting the inconsistency. [David]</p>

</li>
<li><p>The bric_clean_tmp script has been changed to avoid deleting the Bricolage cache file. [Sam]</p>

</li>
<li><p>Fixed typo that broke Bric::Dist::Client. [Mike Slattery]</p>

</li>
<li><p>Fixed multiple select custom fields for Elements and Contributors. Thanks to Mike Slattery for the spot. [David]</p>

</li>
<li><p>Fixed ugly bug where deleting a &quot;Media Type&quot; Element would delete all the media objects of that type. Thanks to Sam for the spot (though not for the bug!). [David]</p>

</li>
<li><p>Fixed bric_pgimport so that it uses DBI to drop and create the database, rather than relying on a hard-coded location for pgsql binaries. [David]</p>

</li>
<li><p>Fixed permission granting in bric_pgimport so that the Bricolage database use has DELETE permissions on all objects in the Bricolage database. It looks like this permission was ignored in PostgreSQL 7.1 and earlier, or problems would have shown up a long time ago! [David]</p>

</li>
<li><p>Fixed a bug where the time a distribution job is scheduled was not properly converted to UTC for storage in the database. Thanks to Mike Slattery for the great code archaeology! [David]</p>

</li>
<li><p>Fixed the spelling of &quot;contributor&quot; in several spots. [Andrew Baio]</p>

</li>
<li><p>Fixed bug where changing a story&#39;s primary category left it with <b>no</b> primary category. [Matt Vella]</p>

</li>
</ul>

<h1 id="Version-1.2.0-2002-01-10-">Version 1.2.0 (2002-01-10)</h1>

<h2 id="New-Features25">New Features</h2>

<ul>

<li><p>Added Context-sensitive, online help. [Sam]</p>

</li>
<li><p>Added separate interface for editing templates (via FTP). [Sam]</p>

</li>
<li><p>Added the ability to use HTML::Template Templates. [Sam]</p>

</li>
<li><p>Added ability for different Output Channels to function as different component roots for in Mason templates. This will allow for templates that can&#39;t be found in the current Output Channel to be searched for in other Output Channels. [David]</p>

</li>
<li><p>Added link to Event log to Find Story, Find Template, and Find Media screens. [David]</p>

</li>
<li><p>Added true previewing for media assets. Now, when you click their URIs to preview them, they will be distributed to the preview server(s) before redirecting the user to them, rather than just serving them up from where they live on the Bricolage file system. The latter can still be accessed under &quot;Download&quot; in the Media Asset profile. This will continue to be the preferred way to grab media files for editing and such, as it will not incur the overhead of distributing the media file. [David]</p>

</li>
<li><p>Allow only one template with a given name for a given category, element, burner and output channel. [Sam]</p>

</li>
<li><p>Added a Maintainer section to the About page. [David]</p>

</li>
<li><p>Updated About page to mimic the layout of the help pages. [David]</p>

</li>
</ul>

<h2 id="Bug-Fixes63">Bug Fixes</h2>

<ul>

<li><p>Fixed a bug with local previews where a preview page could show up instead of the Bricolage UI. Thanks to Sara for the spot. [David]</p>

</li>
<li><p>Fixed a bug where Mason component calls failed in previews when the PREVIEW_MASON directive was enabled. [David]</p>

</li>
<li><p>Changed default value for text area fields added via the form builder (i.e., in Contributor Type and Element profiles) to 0. The values 0 and &quot;&quot; always make the the new field unlimited in length. [David]</p>

</li>
<li><p>Fixed a couple of buttons to be proper case rather than upper case. [David]</p>

</li>
<li><p>Separated the filesystem destinations for assets burned for publication and for assets burned for previewing. This will prevent someone previewing and stomping all over a published version of an asset before the published version is distributed. [David]</p>

</li>
<li><p>Removed hard-coding of the local preview directory in httpd.conf and httpd-ssl.conf. Now using the values stored in PREVIEW_LOCAL, instead, to determine the proper directory. [David]</p>

</li>
<li><p>Added the DEF_MEDIA_TYPE directive. Bricolage will use the value in this directive to assign a Media Type to all file resources if Bricolage can&#39;t figure it out from their file extensions. This fixes a bug where Bricolage would choke if it couldn&#39;t figure out the MediaType itself. [David]</p>

</li>
</ul>

<h1 id="Version-1.0.2-2001-12-10-">Version 1.0.2 (2001-12-10)</h1>

<h2 id="New-Features26">New Features</h2>

<ul>

<li><p>Added &quot;File Name&quot; and &quot;File Extension&quot; properties to OutputChannels. These properties will now be used to name files burned to the file system on preview and publish. [David]</p>

</li>
<li><p>Added DEFAULT_FILENAME and DEFAULT_FILE_EXT configuration directives to set default values on the &quot;File Name&quot; and &quot;File Extension&quot; Output Channel properties. [David]</p>

</li>
<li><p>Changed Bric::Util::Burner-&gt;display_element() so that it doesn&#39;t paginate. All paginated pages are now treated instead as regular elements. This is useful for things like printer-friendly pages. Bric::Util::Burner-&gt;display_element() continues to work as before. Use this method to output a separate file for each paginated element. [David]</p>

</li>
<li><p>When errors occur while previewing stories, the leftNav is now turned off. [David]</p>

</li>
<li><p>Browser buttons and menus are now disabled. [David]</p>

</li>
<li><p>Added ability to set permissions on assets based on the categories they&#39;re in. [David]</p>

</li>
<li><p>Moved all session and session locking files into the &quot;bricolage&quot; subdirectory of the local file system&#39;s tmp directory. You&#39;ll want to rm -rf /tmp/bricolage_* upon upgrading. [David]</p>

</li>
<li><p>Moved the location of cache files to the &quot;bricolage/cache&quot; subdirectory of the local file system&#39;s tmp directory. You&#39;ll want to rm -rf /tmp/FileCache upon upgrading. Together with the above change, this means that all Bricolage temporary files are stored in the &quot;bricolage&quot; subdirectory of the local tmp, e.g., /tmp/bricolage. [David]</p>

</li>
<li><p>Added new program, bric_clean_tmp, that can be used in a cron job to delete stale temporary files. [Sam]</p>

</li>
<li><p>Added an &quot;About&quot; page, linked from the logo graphic, that explains the name &quot;Bricolage&quot; and offers the license and credits. [David]</p>

</li>
<li><p>Added PERL_LOADER configuration directive. Pass a line of Perl to this directive, and on startup, it&#39;ll execute it in the same namespace as your templates execute in. [David]</p>

</li>
<li><p>Added INCLUDE_XML_WRITER and XML_WRITER_ARGS configuration parameters. If INCLUDE_XML_WRITER is turned on, then all templates will include a new global, $writer, that is an XML::Writer object. This object is provided as a convenience for creating XML in your templates. XML_WRITER_ARGS allows certain arguments to be passed to the XML::Writer. [David]</p>

</li>
<li><p>Fixed bug where data fields deleted from Elements were deleting them from existing stories, too. [David]</p>

</li>
<li><p>Fixed bug where stories with related media associated with them were displaying the story as an Element rather than as a story after editing the related media. [David]</p>

</li>
<li><p>Removed all file system location dependencies for the operation of Bricolage. Bricolage will still assume that everything&#39;s in /usr/local/bricolage, but any location is fine as long as the BRICOLAGE_ROOT environment variable is set to the proper location. [David]</p>

</li>
<li><p>Added code to force all preview pages to be re-requested from the server every time they&#39;re viewed. This prevents the browser from loading older versions from its cache, and allows users to always see the most recently-burned output of a story. [David]</p>

</li>
<li><p>Removed debugging information from URLs for when debugging is turned off -- which should be always in production code (e.g., releases). [David]</p>

</li>
<li><p>Elements are now displayed with their display names rather than their attribute names. Thanks to Sam Tregar for the spot. [David]</p>

</li>
<li><p>Fixed bug where fields (attributes) added to an Element with the name of an existing but deactivated field triggered an error. Thanks to Sam for the heads-up. [David]</p>

</li>
<li><p>Fixed a bug where data fields sometimes were not properly retrieved from the database in Bric::Biz::AssetType. [David]</p>

</li>
<li><p>Fixed a bug where clicking &quot;Save and Stay&quot; in the Element profile wouldn&#39;t delete attributes (fields) marked as such, or even delete the Element itself, if the &quot;Delete this profile&quot; checkbox was checked.</p>

</li>
<li><p>Fixed a bug where, for Story and Media assets, editors were given Edit access to notes, even when they didn&#39;t have the asset checked out. [David]</p>

</li>
<li><p>Changed the misleading and inaccurate &quot;Two blank lines&quot; label in the Bulk Edit interface to the more accurate &quot;One blank line&quot;. Thanks to Sam Tregar for the heads-up.</p>

</li>
</ul>

<h1 id="Version-1.0.1-2001-09-28-">Version 1.0.1 (2001-09-28)</h1>

<ul>

<li><p>Initial public release.</p>

</li>
</ul>

<h1 id="Author">Author</h1>

<p>David Wheeler &lt;david@justatheory.com&gt;</p>

<h1 id="See-Also">See Also</h1>

<p><a rel="section" href="../../../2.0/api/Bric.html" name="Bric">Bric</a></p>

</body>
</html>

