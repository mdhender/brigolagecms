<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="generator" content="Pod::Site 0.50" />
    <title>Bric::App::AccessHandler</title>
  </head>
  <body class="pod">

<ul id="index">
  <li><a href="AccessHandler.html#Name">Name</a></li>
  <li><a href="AccessHandler.html#Synopsis">Synopsis</a></li>
  <li><a href="AccessHandler.html#Description">Description</a></li>
  <li><a href="AccessHandler.html#Interface">Interface</a>
    <ul>
      <li><a href="AccessHandler.html#Constructors">Constructors</a></li>
      <li><a href="AccessHandler.html#Destructors">Destructors</a></li>
      <li><a href="AccessHandler.html#Public-Class-Methods">Public Class Methods</a></li>
      <li><a href="AccessHandler.html#Public-Functions">Public Functions</a></li>
    </ul>
  </li>
  <li><a href="AccessHandler.html#Private">Private</a>
    <ul>
      <li><a href="AccessHandler.html#Private-Class-Methods">Private Class Methods</a></li>
      <li><a href="AccessHandler.html#Private-Instance-Methods">Private Instance Methods</a></li>
      <li><a href="AccessHandler.html#Private-Functions">Private Functions</a></li>
    </ul>
  </li>
  <li><a href="AccessHandler.html#Notes">Notes</a></li>
  <li><a href="AccessHandler.html#Author">Author</a></li>
  <li><a href="AccessHandler.html#See-Also">See Also</a></li>
</ul>

<h1 id="Name">Name</h1>

<p>Bric::App::AccessHandler - Handles Authentication and Session setup during the Apache Access phase.</p>

<h1 id="Synopsis">Synopsis</h1>

<pre><code>&lt;Perl&gt;
use lib &#39;/usr/local/bricolage/lib&#39;;
&lt;/Perl&gt;
PerlModule Bric::App::AccessHandler    &lt;Location /media&gt;
      SetHandler default-handler
  &lt;/Location&gt;

PerlModule Bric::App::Handler
PerlFreshRestart    On
DocumentRoot &quot;/usr/local/bricolage/comp&quot;
&lt;Directory &quot;/usr/local/bricolage/comp&quot;&gt;
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    Allow from all
    SetHandler perl-script
    PerlHandler Bric::App::Handler
    PerlAccessHandler Bric::App::AccessHandler
&lt;/Directory&gt;</code></pre>

<h1 id="Description">Description</h1>

<p>This module handles the Access phase of an Apache request. It authenticates users to Bricolage, and sets up Session handling.</p>

<h1 id="Interface">Interface</h1>

<h2 id="Constructors">Constructors</h2>

<p>NONE.</p>

<h2 id="Destructors">Destructors</h2>

<p>NONE.</p>

<h2 id="Public-Class-Methods">Public Class Methods</h2>

<p>NONE.</p>

<h2 id="Public-Functions">Public Functions</h2>

<dl>

<dt>my $status = handler($r)</dt>
<dd>

<p>Sets up the user session and checks authentication. If the authentication is current, it returns OK and the request continues. Otherwise, it caches the requested URI in the session and returns HTTP_FORBIDDEN.</p>

<p><b>Throws:</b> NONE.</p>

<p><b>Side Effects:</b> NONE.</p>

<p><b>Notes:</b> NONE.</p>

</dd>
<dt>my $status = logout_handler($r)</dt>
<dd>

<p>Logs the user out.</p>

<p><b>Throws:</b> NONE.</p>

<p><b>Side Effects:</b> NONE.</p>

<p><b>Notes:</b> NONE.</p>

</dd>
<dt>my $status = okay($r)</dt>
<dd>

<p>This handler should <b>only</b> be used for the &#39;/login&#39; location of the SSL virtual host. It simply sets up the user session and returns OK.</p>

<p><b>Throws:</b> NONE.</p>

<p><b>Side Effects:</b> NONE.</p>

<p><b>Notes:</b> NONE.</p>

</dd>
<dt>my $status = handle_err($r, $err)</dt>
<dd>

<p>Handles errors for the other handlers in this class.</p>

<p><b>Throws:</b> NONE.</p>

<p><b>Side Effects:</b> NONE.</p>

<p><b>Notes:</b> NONE.</p>

</dd>
</dl>

<h1 id="Private">Private</h1>

<h2 id="Private-Class-Methods">Private Class Methods</h2>

<p>NONE.</p>

<h2 id="Private-Instance-Methods">Private Instance Methods</h2>

<p>NONE.</p>

<h2 id="Private-Functions">Private Functions</h2>

<p>NONE.</p>

<h1 id="Notes">Notes</h1>

<p>NONE.</p>

<h1 id="Author">Author</h1>

<p>David Wheeler &lt;david@justatheory.com&gt;</p>

<h1 id="See-Also">See Also</h1>

<p><a rel="section" href="../../../../2.0/api/Bric.html" name="Bric">Bric</a></p>

</body>
</html>

