<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="generator" content="Pod::Site 0.50" />
    <title>Bric::App::PreviewHandler</title>
  </head>
  <body class="pod">

<ul id="index">
  <li><a href="PreviewHandler.html#Name">Name</a></li>
  <li><a href="PreviewHandler.html#Synopsis">Synopsis</a></li>
  <li><a href="PreviewHandler.html#Description">Description</a></li>
  <li><a href="PreviewHandler.html#Interface">Interface</a>
    <ul>
      <li><a href="PreviewHandler.html#Constructors">Constructors</a></li>
      <li><a href="PreviewHandler.html#Destructors">Destructors</a></li>
      <li><a href="PreviewHandler.html#Public-Class-Methods">Public Class Methods</a></li>
      <li><a href="PreviewHandler.html#Public-Functions">Public Functions</a></li>
    </ul>
  </li>
  <li><a href="PreviewHandler.html#Private">Private</a>
    <ul>
      <li><a href="PreviewHandler.html#Private-Class-Methods">Private Class Methods</a></li>
      <li><a href="PreviewHandler.html#Private-Instance-Methods">Private Instance Methods</a></li>
      <li><a href="PreviewHandler.html#Private-Functions">Private Functions</a></li>
    </ul>
  </li>
  <li><a href="PreviewHandler.html#Notes">Notes</a></li>
  <li><a href="PreviewHandler.html#Author">Author</a></li>
  <li><a href="PreviewHandler.html#See-Also">See Also</a></li>
</ul>

<h1 id="Name">Name</h1>

<p>Bric::App::PreviewHandler - Special Apache handlers used for local previewing.</p>

<h1 id="Synopsis">Synopsis</h1>

<pre><code>&lt;Perl&gt;
    if (PREVIEW_LOCAL) {
        $PerlTransHandler = &#39;Bric::App::PreviewHandler::uri_handler&#39;;
        if (PREVIEW_MASON) {
            $PerlFixupHandler = &#39;Bric::App::PreviewHandler::fixup_handler&#39;;
        }
    }
&lt;/Perl&gt;</code></pre>

<h1 id="Description">Description</h1>

<p>This package is the main package used by Apache for managing the Bricolage application. It loads all the necessary Mason and Bricolage libraries and sets everything up for use in Apache. It is one function is handler(), which is called by mod_perl for every request.</p>

<h1 id="Interface">Interface</h1>

<h2 id="Constructors">Constructors</h2>

<p>NONE.</p>

<h2 id="Destructors">Destructors</h2>

<p>NONE.</p>

<h2 id="Public-Class-Methods">Public Class Methods</h2>

<p>NONE.</p>

<h2 id="Public-Functions">Public Functions</h2>

<dl>

<dt>my $status = uri_handler()</dt>
<dd>

<p>Handles the URI Translation phase of the Apache request if the PREVIEW_LOCAL directive is true. Otherwise unused. It&#39;s job is to ensure that files requested directly from the preview directory (/data/preview) as if they were requested from the document root (/) are directed to the correct file.</p>

<p><b>Throws:</b> NONE.</p>

<p><b>Side Effects:</b> This handler will slow Bricolage, as it will be executing a fair bit of extra code on every request. It is thus recommended to use a separate server for previews.</p>

<p><b>Notes:</b> NONE.</p>

</dd>
<dt>my $status = fixup_handler()</dt>
<dd>

<p>Runs after the MIME-checking request phase so that, if the content-type is not text/html. Only used when both the <code>PREVIEW_LOCAL</code> and <code>PREVIEW_MASON</code> directives have been enabled, as it will prevent Mason from munging non-Mason files such as images.</p>

<p><b>Throws:</b> NONE.</p>

<p><b>Side Effects:</b> This handler will slow Bricolage, as it will be executing a fair bit of extra code on every request. It is thus recommended to use a separate server for previews, or to disable Mason for previews on the Bricolage server.</p>

<p><b>Notes:</b> NONE.</p>

</dd>
<dt>my $status = handle_err($r, $err)</dt>
<dd>

<p>Handles errors for the other handlers in this class.</p>

<p><b>Throws:</b> NONE.</p>

<p><b>Side Effects:</b> NONE.</p>

<p><b>Notes:</b> NONE.</p>

</dd>
</dl>

<h1 id="Private">Private</h1>

<h2 id="Private-Class-Methods">Private Class Methods</h2>

<p>NONE.</p>

<h2 id="Private-Instance-Methods">Private Instance Methods</h2>

<p>NONE.</p>

<h2 id="Private-Functions">Private Functions</h2>

<p>NONE.</p>

<h1 id="Notes">Notes</h1>

<p>NONE.</p>

<h1 id="Author">Author</h1>

<p>David Wheeler &lt;david@justatheory.com&gt;</p>

<h1 id="See-Also">See Also</h1>

<p><a rel="section" href="../../../../2.0/api/Bric.html" name="Bric">Bric</a></p>

</body>
</html>

