
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Bricolage CMS -- Bricolage 1.8.5 Changes</title>
	<meta name="keywords" content="" />
    <meta name="generator" content="Bricolage 2.0.0" />
	<link rel="stylesheet" href="../../../../ui/css/blueprint/screen.css" type="text/css" media="screen, projection">
	<link rel="stylesheet" href="../../../../ui/css/blueprint/print.css" type="text/css" media="print">
<!--[if lt IE 8]>
            <link rel="stylesheet" href="/ui/css/blueprint/ie.css" type="text/css" media="screen, projection">
        <![endif]-->
	<link rel="stylesheet" href="../../../../ui/css/bricolagecms-org.css@v04112010-2.css" type="text/css" media="screen, projection">
	
    <link rel="alternate" type="application/rss+xml" title="Bricolage CMS RSS Feed" href="http://feeds.feedburner.com/BricolageCMS" />

	<script type="text/javascript" src="../../../../ui/js/jquery/jquery-1.3.2.min.js">
    </script> 
    <script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.2.72.js"></script>
	<script src="../../../../ui/js/jquery.corner.js" type="text/javascript">
    </script> 
    <script type="text/javascript">
			$(function(){
			$('#header').corner("bottom");
			$('.box').corner("keep");
			$('#teaser').corner("keep");
			$('#enterprise').corner("keep");
			$('#sidebar dl').corner("keep");
			$('#slides').cycle({
				fx: 'fade',
   				timeout: 8000,  // milliseconds between slide transitions (0 to disable auto advance) 
    			pause: 1,     // true to enable "pause on hover" 
				});
			});
		</script> 
<script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
</head>
<body id="bricolage-1.8.5" class="news announce changes">
	<div class="container">
		<div id="header">
			<div class="header span-24 last">
				<a href="../../../../index.html"><h1>Bricolage Content Management System</h1></a> 
				<ul id="main-nav">
					<li>
						<a href="../../../../tour/index.html">Tour</a> 
					</li>
					<li>
						<a href="../../../../showcase/index.html">Showcase</a> 
					</li>
					<li>
						<a href="../../../../downloads.html">Download</a> 
					</li>
					<li>
						<a href="../../../../support/index.html">Support</a> 
					</li>
					<li>
						<a href="https://github.com/bricoleurs/bricolage/wiki">Wiki</a> 
					</li>
					<li>
						<a href="../../../../docs/current/api/index.html">API</a> 
					</li>
				</ul>
			</div>
		</div>	

<div id="content" class="column span-15 prepend-1">
	<h2>Bricolage 1.8.5 Changes</h2>
	<div id="articlemeta">
            <p class="date">2005.03.18</p>
          </div>
          <h3>Improvements</h3>
        <div class="list">
          <ul>
            <li><p>Made story profile's subelement <q>Preview In</q> output-channel list consistent with the top level one (e.g. editing a Page shows the same preview OCs as editing the Story at the top level). [Scott]</p></li>
            <li><p>Added Linux startup script <em>contrib/start_scripts/linux</em>. [David]</p></li>
            <li><p>Added <code>version_id</code> parameter to the <code>list()</code> methods of the story, media, and template classes. Oversight reported by Kang-min Liu. [David]</p></li>
            <li><p>Distribution via SFTP is now atomic and respects the <code>FTP_UNLINK_BEFORE_MOVE</code> directive. Spotted by Patrick Michael Kane. [David]</p></li>
            <li><p>Related story and media elements managed through the SOAP server can now use a combination of URI and site ID to identify related assets in addition to the existing approach of using story and media IDs. [David]</p></li>
            <li><p>Email sent by Bricolage now set the send date, since our understanding is that the MUA is responsible for setting the date and some SPAM filters trigger on missing Date: headers. [Cameron Miller]</p></li>
            <li><p>The media type manager now validates media type names to ensure that they are of the form <q>type/subtype</q> with no spaces. Suggested by Marshall Roch. [David]</p></li>
            <li><p>When started up by the super user, the virtual FTP server now runs as the same user as the Bricolage Apache server. This should prevent malicious users of the virtual FTP server from being able to do things as the root user that they shouldn&#x2019;t. [Keith Grennan]</p></li>
            <li><p>SQL errors encountered when building the database are now fatal, meaning that they will cause the entire installation to fail, rather than continuing to execute SQL statements and build an incomplete database. This prevents the creation broken databases when people didn&#x2019;t notice errors in the past. [David]</p></li>
            <li><p>A list of subelements is now less likely to mysteriously become out of order and thus lead to strange action-at-a-distance errors. And even if they do become out of order, the error message will be more appropriate (<q>Warning! State inconsistent</q> instead of <q>Can&#x2019;t call method &#x2019;get_name&#x2019; on an undefined value</q>). Reported by Curtis Poe. [David]</p></li>
            <li><p>Updated mail list information in <a href="http://search.cpan.org/perldoc?Bric%3A%3AHacker">Bric::Hacker</a>. Reported by Marshall Roch. [David]</p></li>
            <li><p>The SOAP media interface now supports creating relationships between the media documents elements and other story and media documents, just like the SOAP story interface does. [David]</p></li>
            <li><p>The SOAP interface now supports Related stories and media on story type and media type elements just as in the UI. This involved the somewhat hackish necessity for including the <q>related_story_id</q> and <q>related_media_id</q> (or <q>related_story_uri</q> and <q>related_media_uri</q>) attributes in the <q>elements</q> XML element, but it does the trick. [David]</p></li>
            <li><p>The list of elements to select from when creating a new template is now in alphabetical order. [David]</p></li>
            <li><p>The XML representation of media documents used by the SOAP server now supports the media type of the file. [David]</p></li>
            <li><p>The <q>multi</q> install destination is now the default, rather than the <q>single</q> install destination. The two styles (<q>multi</q> and <q>single</q>) are now also better described during installation. [David]</p></li>
            <li><p>Added the <code>checked_in</code> parameter to the <code>lookup()</code>, <code>list()</code>, and C<list_ids()> methods of the story, media, and template classes. If passed a true value, this parameter causes the checked in version of the most current version of the story to be returned. When a story is checked out, there are two instances of the current version: the one checked in last, and the one currently being edited. When the C<checked_in> parameter is a true value, then the instance last checked in is returned, rather than the instance currently checked out. This is useful for users who do not currently have a story checked out and wish to see the story as of the last check in, rather than as currently being worked on in the current checkout. If a story is not currently checked out, this parameter has no effect.</p></li>
          </ul>
        </div>
          <h3>Bug Fixes</h3>
        <div class="list">
          <ul>
            <li><p>Versions of Perl that disallow the use of the <code>-I</code> argument in a setuid environment will no longer cause the upgrade to fail. Reported by Serge Sozonoff. [David]</p></li>
            <li><p>The new support for a false value to the <code>checked_out</code> parameter to the <code>list()</code> methods of the story, media, and template classes is now properly supported by the SOAP <code>list_ids</code> method, as well. [David]</p></li>
            <li><p>Calls to publish documents via SOAP will no longer fail if the <code>published_version</code> attribute is not specified and the document to be published has never been published before. [David]</p></li>
            <li><p>The Bricolage virtual FTP server will no longer fail to start if Template Toolkit is installed but its version number is less than 2.14. Reported by Adam Rinehart. [David]</p></li>
            <li><p>Fixed a bug where nothing would ever publish if you had PUBLISH_RELATED_ASSETS enabled in bricolage.conf. [Mark]</p></li>
            <li><p>Added <q>slug</q> to the list of attributes specified in the error message for a non-unique URI in a story. Thanks to Rachel Murray for the spot! [David]</p></li>
            <li><p>Fix in the SOAP server code to adjust for changes in Exception::Class 1.20. [David]</p></li>
            <li><p>Stories and Media created or updated via the SOAP interface will now associate contributors of the appropriate type, instead of <q>All Contributors</q>. [Scott &amp; David]</p></li>
            <li><p>Deleting an element that has a template no longer causes an error. Thanks to Susan for the spot! [David]</p></li>
            <li><p>Eliminated encoding errors when using the SOAP interface to output stories, media, or templates with wide characters. Reported by Scott Lanning. [David]</p></li>
            <li><p>Fields with a an empty string or 0 (zero) for their values will no longer be displayed as <q>Not defined</q> when viewing a story. [David]</p></li>
            <li><p>Reverting (stories, media, templates) no longer gives an error. Reported by Simon Wilcox, Rachel Murray, and others. [David]</p></li>
            <li><p>Publishing a published version of a document that has a later version in workflow will no longer cause that later version to be mysteriously removed from workflow. This could be caused by passing a document looked up using the <code>published_version</code> to <code>list()</code> to <code>$burner-&gt;publish_another</code> in a template. [David]</p></li>
            <li><p>The SOAP server story and media interfaces now support elements that contain both related stories and media, rather than one or the other. [David]</p></li>
            <li><p>Attempting to preview a story or media document currently checked out to another user no longer causes an error. Reported by Paul Orrock. [David]</p></li>
            <li><p>Desk asset buttons are no longer broken in non-English localizations. Thanks to Scott Lanning for the spot! [David]</p></li>
            <li><p>Subelements will be properly deleted when selecting a <q>Delete</q> checkbox and clicking <q>Save</q> or <q>Save and Stay</q> in the story or media profile. It always worked in the element profile, and now it&#x2019;s consistent across document profile interfaces. Spotted by Scott Lanning. [David]</p></li>
            <li><p>Custom fields with default values now have their values included when they are added to stories and media. Thanks to Clare Parkinson for the spot! [David]</p></li>
            <li><p>The <code>get_desk_stamps()</code> method in the asset classes has been deprecated (it never worked, anyway) and will be removed in Bricolage 1.10.0. The same goes for the <code>required_satisfied()</code> method in Bric::Biz::Workflow. Thanks to Marshall Roch for the spot! [David]</p></li>
            <li><p>Subclasses of the media class no longer cause errors when distributing files via <code>bric_queued</code>. Thanks to Jason Edgecombe for the spot! [David]</p></li>
            <li><p>Elements created via SOAP now correctly have site IDs associated with them. [David]</p></li>
            <li><p>The <q>All</q> alphabetical search now properly escapes the <q>%</q> wild card character. Thanks to Frank Holtz for the spot! [David]</p></li>
            <li><p>The <code>bric_queued</code> script now requires a username and password and will authenticate the user. This user will then be used for logging events. All events logged when a job is run via the UI are now also logged by <code>bric_queued</code>. [Mark and David]</p></li>
            <li><p>Jobs now get a <q>Job Created</q> event logged when they are created. Reported by Rachel Murray. [David and Mark]</p></li>
            <li><p>Eliminated <q>Use of uninitialized value in pattern match (m//)</q> warnings when uploading media files. Reported by Scott Lanning. [David]</p></li>
            <li><p>Preview redirections now use the protocol setting of the preview output channel if it&#x2019;s available, and falls back on using <q>http://</q> when it&#x2019;s not, instead of using the hard-coded <q>http://</q>. Thanks to Martin Bacovsky for the spot! [David]</p></li>
            <li><p>The <code>has_keyword()</code> method in the Business class (from which the story and media classes inherit) now works. Thanks to Clare Parkinson for the spot! [David]</p></li>
            <li><p>Templates that abort during calls <code>preview_another()</code> now properly abort when not using <code>PREVIEW_LOCAL</code>. [Paul Orrock]</p></li>
            <li><p>Clicking a link in the left-side navigation after the session has expired now causes the whole window to show the login form, rather than it showing inside the nav frame, which was useless. [Marshall]</p></li>
            <li><p>The names of media types (a.k.a. MIME types) can now be changed without encountering an error. Thanks to Marshall Roch for the spot! [David]</p></li>
            <li><p>Media type MIME Type names are now properly required in the UI. [David]</p></li>
            <li><p>Fixed typo in the virtual FTP server which was causing an error when saving a template. [Keith Grennan]</p></li>
            <li><p>The JavaScript that validates form contents once again works with htmlArea, provided htmlArea itself is patched. See the relevant <a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1155712&amp;group_id=69750&amp;atid=525656">htmlArea bug report</a> for the patch. As of this writing, you must run the version of htmlArea in CVS. [David &amp; Marshall]</p></li>
            <li><p>The JavaScript that handles the double list manager has been vastly optimized. It should now be able to better handle large lists, such as a list of thousands of categories. Reported by Scott. [Marshall]</p></li>
            <li><p>Logging now works properly with the virtual FTP server. [Keith Grennan]</p></li>
            <li><p>Some cases in which it was impossible to add actions to a destination have been fixed. Reported by Marshall Roch. Thanks to Jason Edgecombe for making available a server that exhibits the problem. [David]</p></li>
            <li><p>The virtual FTP server no longer saves a template for every line in the template when the FTP client uses ASCII mode. Thanks to Keith Grennan for the spot! [David]</p></li>
            <li><p>Reverting a template to a previous version now properly updates to the reverted version on the user&#x2019;s sandbox. Also, canceling a checkout now properly removes a template from a user&#x2019;s sandbox. [David]</p></li>
            <li><p>When creating a new workflow, the workflow profile no longer forgets the selected site when you click the <q>New Desk</q> button. [David]</p></li>
            <li><p>Changing a template in such a way that it will be deployed to a new location (by changing the category, for example) once again deletes the previous version from the previous location when it is deployed. [David]</p></li>
            <li><p>Uploading a new image to a media document with a different media type than the previous image no longer causes an Imager error. [David]</p></li>
            <li><p>Preview and views once again preview a story or media document as it was last checked in, rather than as it might be currently being worked on in a current checkout. [David]</p></li>
          </ul>
        </div>

<div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/bricolagecms/embed.js"></script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=bricolagecms">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
<div id="sidebar" class="column span-8 last">
            <dl id="downloads">
              <dt>Downloads</dt>
              <dd class="current"><a href="../../../../downloads/bricolage-1.8.5.tar.gz" title="Download Bricolage 1.8.5">Download Now!</a><br />(Version 1.8.5)</dd>
              <dd class="more"><a href="../../../../downloads.html" title="Older releases and other downloads">More Downloads</a></dd>
            </dl>
		<dl id="recent-project-activity">
			<dt>
				Recent project activty
			</dt>
<dd><a href="http://www.gossamer-threads.com/lists/bricolage/users/41115" title="Doorself, la porta in legno massello per il professionista" target="_blank" rel="nofollow">Doorself, la porta in legno massello per il professionista</a><br /="/">January 28, 2017</dd>
<dd><a href="http://www.gossamer-threads.com/lists/bricolage/devel/41114" title="Doorself, la porta in legno massello per il professionista" target="_blank" rel="nofollow">Doorself, la porta in legno massello per il professionista</a><br /="/">January 28, 2017</dd>
<dd><a href="http://www.gossamer-threads.com/lists/bricolage/users/41109" title="Cloned Bric 1.10.2 fails to start" target="_blank" rel="nofollow">Cloned Bric 1.10.2 fails to start</a><br /="/">June 15, 2016</dd>
<dd><a href="http://www.gossamer-threads.com/lists/bricolage/devel/41107" title="You have been added to Bricolage Developers" target="_blank" rel="nofollow">You have been added to Bricolage Developers</a><br /="/">June 2, 2016</dd>
<dd><a href="http://www.gossamer-threads.com/lists/bricolage/users/41108" title="You have been added to Bricolage Users" target="_blank" rel="nofollow">You have been added to Bricolage Users</a><br /="/">June 2, 2016</dd>
	
		</dl>
		<dl id="planet-bricolage" class="box">
			<dt>
				Planet Bricolage
			</dt>
<dd><a href="http://www.youtube.com/watch?v=uU0FBda4sX0&feature=youtube_gdata" title="A sneak-peak at Bricolage 1.11&#39;s new AJAX features" target="_blank" rel="nofollow">A sneak-peak at Bricolage 1.11&#39;s new AJAX features</a><br /="/">June 2, 2009</dd>
	
		</dl>
		<dl id="search" class="box">
				<dt>
					Search Bricolage
				</dt>
				<div id="cse" style="width: 99%;">Loading</div>
				<script src="http://www.google.com/jsapi" type="text/javascript"></script>
				<script type="text/javascript">
				  google.load('search', '1', {language : 'en'});
				  google.setOnLoadCallback(function(){
					var customSearchControl = new google.search.CustomSearchControl('013635470282570704404:c3ljue3ezoy');
					customSearchControl.setResultSetSize(google.search.Search.SMALL_RESULTSET);
					customSearchControl.draw('cse');
				  }, true);
				</script>
				<link rel="stylesheet" href="http://www.google.com/cse/style/look/default.css" type="text/css" />
		</dl>
</div>

    
<!-- #bbinclude "footer.html" -->
 
<div id="footer" class="column span-24 last">
	<div class="menu column span-24 last">
		<ul>
			<li>
				<a href="../../../../index.html">Home</a> 
			</li>
			<li>
				<a href="../../../../tour/index.html">Tour</a> 
			</li>
			<li>
				<a href="../../../../showcase/index.html">Showcase</a> 
			</li>
			<li>
				<a href="../../../../downloads.html">Download</a> 
			</li>
			<li>
				<a href="../../../../support/index.html">Support</a> 
			</li>
		</ul>
		<ul>
			<li>
				<a href="http://github.com/bricoleurs/bricolage">Source Code</a> 
			</li>
			<li>
				<a href="http://wiki.github.com/bricoleurs/bricolage/">Wiki</a> 
			</li>
			<li>
				<a href="../../../../docs/current/api/index.html">API Documentation</a> 
			</li>
			<li>
				<a href="../../../../support/index.html#mailinglists">Mailing lists</a> 
			</li>
			<li>
				<a href="http://bricolage.lighthouseapp.com/projects/29601-bricolage">Report a Site Bug </a> 
			</li>
		</ul>
		<ul>
			<li>
				<a href="http://www.linkedin.com/groups?gid=74787&trk=myg_ugrp_ovr">LinkedIn group</a> 
			</li>
			<li>
				<a href="http://twitter.com/bricolagecms">Twitter</a> 
			</li>
			<li>
				<a href="http://www.facebook.com/pages/Bricolage-CMS/108168125880618">Facebook page</a> 
			</li>
			<li>
				<a href="http://feeds.feedburner.com/BricolageCMS">RSS updates</a> 
			</li>
			<li>
				<a href="http://feedburner.google.com/fb/a/mailverify?uri=BricolageCMS">E-mail updates</a> 
			</li>
		</ul>
		<div class="logo">
			&nbsp; 
		</div>
	</div>
	<p id="copyright">
		&copy; 2004-2010 Bricolage Development Team.
		<br />
		The contents of this site are licensed under a <a href="http://creativecommons.org/licenses/by-nc/2.0/">Creative Commons License</a>. 
	</p>
	<div class="center">
		<span id="tagline"> The mature, no-bullshit, built-like-a-tank web publishing system. </span> 
	</div>
</div>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-2885748-1");
pageTracker._trackPageview();
} catch(err) {}</script>
<script type="text/javascript">
//<![CDATA[
(function() {
	var links = document.getElementsByTagName('a');
	var query = '?';
	for(var i = 0; i < links.length; i++) {
	if(links[i].href.indexOf('#disqus_thread') >= 0) {
		query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
	}
	}
	document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/bricolagecms/get_num_replies.js' + query + '"></' + 'script>');
})();
//]]>
</script>
<script type="text/javascript">
var _sf_async_config={uid:5276,domain:"bricolagecms.org"};
(function(){
  function loadChartbeat() {
    window._sf_endpt=(new Date()).getTime();
    var e = document.createElement('script');
    e.setAttribute('language', 'javascript');
    e.setAttribute('type', 'text/javascript');
    e.setAttribute('src',
       (("https:" == document.location.protocol) ? "https://s3.amazonaws.com/" : "http://") +
       "static.chartbeat.com/js/chartbeat.js");
    document.body.appendChild(e);
  }
  var oldonload = window.onload;
  window.onload = (typeof window.onload != 'function') ?
     loadChartbeat : function() { oldonload(); loadChartbeat(); };
})();

</script>
</body>
</html>	
