
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Bricolage CMS -- Bricolage 1.8.9 Changes</title>
	<meta name="keywords" content="" />
    <meta name="generator" content="Bricolage 2.0.0" />
	<link rel="stylesheet" href="../../../../ui/css/blueprint/screen.css" type="text/css" media="screen, projection">
	<link rel="stylesheet" href="../../../../ui/css/blueprint/print.css" type="text/css" media="print">
<!--[if lt IE 8]>
            <link rel="stylesheet" href="/ui/css/blueprint/ie.css" type="text/css" media="screen, projection">
        <![endif]-->
	<link rel="stylesheet" href="../../../../ui/css/bricolagecms-org.css@v04112010-2.css" type="text/css" media="screen, projection">
	
    <link rel="alternate" type="application/rss+xml" title="Bricolage CMS RSS Feed" href="http://feeds.feedburner.com/BricolageCMS" />

	<script type="text/javascript" src="../../../../ui/js/jquery/jquery-1.3.2.min.js">
    </script> 
    <script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.2.72.js"></script>
	<script src="../../../../ui/js/jquery.corner.js" type="text/javascript">
    </script> 
    <script type="text/javascript">
			$(function(){
			$('#header').corner("bottom");
			$('.box').corner("keep");
			$('#teaser').corner("keep");
			$('#enterprise').corner("keep");
			$('#sidebar dl').corner("keep");
			$('#slides').cycle({
				fx: 'fade',
   				timeout: 8000,  // milliseconds between slide transitions (0 to disable auto advance) 
    			pause: 1,     // true to enable "pause on hover" 
				});
			});
		</script> 
<script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
</head>
<body id="bricolage-1.8.9" class="news announce changes">
	<div class="container">
		<div id="header">
			<div class="header span-24 last">
				<a href="../../../../index.html"><h1>Bricolage Content Management System</h1></a> 
				<ul id="main-nav">
					<li>
						<a href="../../../../tour/index.html">Tour</a> 
					</li>
					<li>
						<a href="../../../../showcase/index.html">Showcase</a> 
					</li>
					<li>
						<a href="../../../../downloads.html">Download</a> 
					</li>
					<li>
						<a href="../../../../support/index.html">Support</a> 
					</li>
					<li>
						<a href="https://github.com/bricoleurs/bricolage/wiki">Wiki</a> 
					</li>
					<li>
						<a href="../../../../docs/current/api/index.html">API</a> 
					</li>
				</ul>
			</div>
		</div>	

<div id="content" class="column span-15 prepend-1">
	<h2>Bricolage 1.8.9 Changes</h2>
	<div id="articlemeta">
            <p class="date">2006.01.23</p>
          </div>
          <h3>Improvements</h3>
        <div class="list">
          <ul>
            <li><p>Added missing foreign key constraints and indexes on
the <code>category_keyword</code>,
<code>story_keyword</code>, <code>media_keyword</code>, <code>element_member</code>, and
<code>media_contributor</code> tables. This should make keyword lookups, at least, much
faster. [David]</p></li>
            <li><p>When a story or media document is published with an expiration date earlier
than the publish date, the UI will now properly report that the document has
been <q>expired</q>, rather than <q>published</q>. Thanks to Simon Wilcox for the spot.
[David]</p></li>
            <li><p>The Bulk Publish interface in the UI now displays the name of the site
alongside the category if there is more than one site, so as to disambiguate
the list of categories. Reported by Marshall Roch. [David]</p></li>
            <li><p>Added constraints to the story and media tables in the database to prevent the
publish status from becoming out of sync with the publish date and first
publish date. [David]</p></li>
            <li><p>Changed code to show the first displayable data field of a subelement when
viewing or editing an asset as opposed to only text fields. [Paul Orrock]</p></li>
            <li><p><a href="https://bricolagecms.org/docs/current/api/Bric::SOAP::Workflow" title="Read the
Bric::SOAP::Workflow documentation in the Bricolage API
browser">Bric::SOAP::Workflow</a>'s publish method now schedules a publish job
instead of immediately publishing, thus allowing the
<code>publish_date</code> parameter to actually work, and ensuring that the proper
version is published. [David]</p></li>
          </ul>
        </div>
          <h3>Bug Fixes</h3>
        <div class="list">
          <ul>
            <li><p>Fixed misnamed and/or missing keyword foreign keys on the <code>category_keyword</code>,
<code>story_keyword</code>, and <code>media_keyword</code> tables. [David]</p></li>
            <li><p>Documents created or updated via SOAP will now set the publish date to the
same value as the first publish date if the latter is set and the former is
not. [David]</p></li>
            <li><p>The Burner <code>publish()</code> method now sets the publish date to the current date
and time if it was not specified via an argument. This will hopefully fix
instances of stories and media in the database with the <code>first_publish_date</code>
set but not the <code>publish_date</code>. [David]</p></li>
            <li><p>The version 1.8.8 upgrade script that moves media files around no longer fails
when the media directory doesn't exist (because no media documents have been
created). Reported by Wayne Slavin. [David]</p></li>
            <li><p>Upgrades no longer fail if <code>$BRICOLAGE_ROOT</code> is not set and the
instance of Bricolage to be upgraded is somewhere other
than <em>/usr/local/bricolage</em>. Reported by Nate Perry-Thistle. [David]</p></li>
            <li><p>Backported database upgrade permissions changes from Bricolage 1.10 so that
the permissions are set for the super user for upgrade scripts such as
<em>inst/upgrade/1.8.7/move_media.pl</em> and as the PostgreSQL user only when an
upgrade script loads <em>inst/upgrade/lib/bric_upgrade.pm</em>. Thanks to Nate
Perry-Thistle for reporting the permissions bug with the 1.8.7 upgrade script.
[David]</p></li>
            <li><p>Fixed file names for files uploaded by MSIE on Windows. Again. Reported by
Wayne Slavin. [David]</p></li>
            <li><p>Modified the <code>set_publish_status()</code> and <code>set_published_version()</code> methods of
<a href="https://bricolagecms.org/docs/current/api/Bric::Biz::Asset::Business" title="Read the
Bric::Biz::Asset::Business documentation in the Bricolage API
browser">Bric::Biz::Asset::Business</a> so that they each make sure that the
other is set. This will hopefully prevent only one from being set. [David]</p></li>
            <li><p>A media document that has a file uploaded to it before it is ever saved will
no longer cause it to store the media file in a directory without an ID
mapping it to the media document. This only affected installations where media
were created by some method other than the Bricolage UI or SOAP. Reported by
Rod Taylor. [David]</p></li>
            <li><p>Story and Media on the search result page are now correctly sorted by the
<q>Default Asset Sort</q> preference, or title if the preference is not set. [Paul
Orrock]</p></li>
            <li><p>Removed commented-out SQL that was appearing at the end of <em>inst/Pg.sql</em>. The
comment style, <code>/* */</code>, caused problems with PostgreSQL 7.3 and earlier.
Reported by Jerry Franz, with the underlying problem identified by <q>aander07</q>.
[David]</p></li>
            <li><p>Media file names are now URI-escaped for inclusion in the URIs returned by
<code>get_uri()</code> and <code>get_primary_uri()</code>. Reported by Alexey Sheynuk. [David]</p></li>
            <li><p>The burner now looks up existing resources (files) by both file system path
and URI, instead of just the file system path, since the combination of the
path and the URI are globally unique, not just the path. Reported by Paul
Hyland. [David]</p></li>
            <li><p>Publishing a document with a related document, where the related document is
still at version 0 (because it has never been checked in), now properly
displays a message indicating that the related document cannot be published
because it is checked out. [David]</p></li>
            <li><p>Removed testing code from the default <em>book_review.mc</em> template on the file
system (not present in the template in the database) that was put in place
before the release of 1.8.6. [David]</p></li>
            <li><p>Eliminated an error in the permissions screen when a site with workflows has
been deleted. Reported by Frank Febbraro. [David]</p></li>
            <li><p>Fixed the <q>help on event logs</q> link in the Trail help page. Reported by Scott.
[David]</p></li>
            <li><p>If a desk or My Workspace does not have assets of a particular type (stories,
media, or templates) on it, it will no longer display buttons for them.
Reported by Scott. [David]</p></li>
            <li><p>Fixed the sorting menus for templates on desks. Also fixed them for all assets
on desks so that sorting on categories sorts by URIs (which are displayed)
rather than names. Template sorting issues reported by Scott. [David]</p></li>
            <li><p>Adding a variable to the message in an alert type now properly triggers the
update of the message character count. Reported by Scott. [David]</p></li>
            <li><p>Changed the media type for the files in the JavaScript directory from
<q>application/x-javascript</q>, which Safari 2.03 didn't seem to like, to
<q>text/javascipt</q>, which is what it should have been all along, anyway. [David]</p></li>
            <li><p>Fixed sorting of SQL files for concatenation into <em>inst/Pg.sql</em> so that it
should now always be in the right order, regardless of the local system's
locale settings. This issue only applied to those running <code>make dist</code> or
<code>make inst/Pg.sql</code>, since distributions already
have <em>inst/Pg.sql</em>. [David]</p></li>
            <li><p>URIs are now always constructed with the cover date reflecting the global Time
Zone preference, rather than the setting from a user's overriding Time Zone
preference. This prevents URI conflicts and makes searches for URIs with dates
in them consistent. Reported by Li Li. [David]</p></li>
          </ul>
        </div>

<div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/bricolagecms/embed.js"></script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=bricolagecms">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
<div id="sidebar" class="column span-8 last">
            <dl id="downloads">
              <dt>Downloads</dt>
              <dd class="current"><a href="../../../../downloads/bricolage-1.8.9.tar.gz" title="Download Bricolage 1.8.9 Now!">Download Now!</a><br />(Version 1.8.9)</dd>
              <dd class="more"><a href="../../../../downloads.html" title="Older releases and other downloads">More Downloads</a></dd>
            </dl>
		<dl id="recent-project-activity">
			<dt>
				Recent project activty
			</dt>
<dd><a href="http://www.gossamer-threads.com/lists/bricolage/users/41115" title="Doorself, la porta in legno massello per il professionista" target="_blank" rel="nofollow">Doorself, la porta in legno massello per il professionista</a><br /="/">January 28, 2017</dd>
<dd><a href="http://www.gossamer-threads.com/lists/bricolage/devel/41114" title="Doorself, la porta in legno massello per il professionista" target="_blank" rel="nofollow">Doorself, la porta in legno massello per il professionista</a><br /="/">January 28, 2017</dd>
<dd><a href="http://www.gossamer-threads.com/lists/bricolage/users/41109" title="Cloned Bric 1.10.2 fails to start" target="_blank" rel="nofollow">Cloned Bric 1.10.2 fails to start</a><br /="/">June 15, 2016</dd>
<dd><a href="http://www.gossamer-threads.com/lists/bricolage/devel/41107" title="You have been added to Bricolage Developers" target="_blank" rel="nofollow">You have been added to Bricolage Developers</a><br /="/">June 2, 2016</dd>
<dd><a href="http://www.gossamer-threads.com/lists/bricolage/users/41108" title="You have been added to Bricolage Users" target="_blank" rel="nofollow">You have been added to Bricolage Users</a><br /="/">June 2, 2016</dd>
	
		</dl>
		<dl id="planet-bricolage" class="box">
			<dt>
				Planet Bricolage
			</dt>
<dd><a href="http://www.youtube.com/watch?v=uU0FBda4sX0&feature=youtube_gdata" title="A sneak-peak at Bricolage 1.11&#39;s new AJAX features" target="_blank" rel="nofollow">A sneak-peak at Bricolage 1.11&#39;s new AJAX features</a><br /="/">June 2, 2009</dd>
	
		</dl>
		<dl id="search" class="box">
				<dt>
					Search Bricolage
				</dt>
				<div id="cse" style="width: 99%;">Loading</div>
				<script src="http://www.google.com/jsapi" type="text/javascript"></script>
				<script type="text/javascript">
				  google.load('search', '1', {language : 'en'});
				  google.setOnLoadCallback(function(){
					var customSearchControl = new google.search.CustomSearchControl('013635470282570704404:c3ljue3ezoy');
					customSearchControl.setResultSetSize(google.search.Search.SMALL_RESULTSET);
					customSearchControl.draw('cse');
				  }, true);
				</script>
				<link rel="stylesheet" href="http://www.google.com/cse/style/look/default.css" type="text/css" />
		</dl>
</div>

    
<!-- #bbinclude "footer.html" -->
 
<div id="footer" class="column span-24 last">
	<div class="menu column span-24 last">
		<ul>
			<li>
				<a href="../../../../index.html">Home</a> 
			</li>
			<li>
				<a href="../../../../tour/index.html">Tour</a> 
			</li>
			<li>
				<a href="../../../../showcase/index.html">Showcase</a> 
			</li>
			<li>
				<a href="../../../../downloads.html">Download</a> 
			</li>
			<li>
				<a href="../../../../support/index.html">Support</a> 
			</li>
		</ul>
		<ul>
			<li>
				<a href="http://github.com/bricoleurs/bricolage">Source Code</a> 
			</li>
			<li>
				<a href="http://wiki.github.com/bricoleurs/bricolage/">Wiki</a> 
			</li>
			<li>
				<a href="../../../../docs/current/api/index.html">API Documentation</a> 
			</li>
			<li>
				<a href="../../../../support/index.html#mailinglists">Mailing lists</a> 
			</li>
			<li>
				<a href="http://bricolage.lighthouseapp.com/projects/29601-bricolage">Report a Site Bug </a> 
			</li>
		</ul>
		<ul>
			<li>
				<a href="http://www.linkedin.com/groups?gid=74787&trk=myg_ugrp_ovr">LinkedIn group</a> 
			</li>
			<li>
				<a href="http://twitter.com/bricolagecms">Twitter</a> 
			</li>
			<li>
				<a href="http://www.facebook.com/pages/Bricolage-CMS/108168125880618">Facebook page</a> 
			</li>
			<li>
				<a href="http://feeds.feedburner.com/BricolageCMS">RSS updates</a> 
			</li>
			<li>
				<a href="http://feedburner.google.com/fb/a/mailverify?uri=BricolageCMS">E-mail updates</a> 
			</li>
		</ul>
		<div class="logo">
			&nbsp; 
		</div>
	</div>
	<p id="copyright">
		&copy; 2004-2010 Bricolage Development Team.
		<br />
		The contents of this site are licensed under a <a href="http://creativecommons.org/licenses/by-nc/2.0/">Creative Commons License</a>. 
	</p>
	<div class="center">
		<span id="tagline"> The mature, no-bullshit, built-like-a-tank web publishing system. </span> 
	</div>
</div>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-2885748-1");
pageTracker._trackPageview();
} catch(err) {}</script>
<script type="text/javascript">
//<![CDATA[
(function() {
	var links = document.getElementsByTagName('a');
	var query = '?';
	for(var i = 0; i < links.length; i++) {
	if(links[i].href.indexOf('#disqus_thread') >= 0) {
		query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
	}
	}
	document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/bricolagecms/get_num_replies.js' + query + '"></' + 'script>');
})();
//]]>
</script>
<script type="text/javascript">
var _sf_async_config={uid:5276,domain:"bricolagecms.org"};
(function(){
  function loadChartbeat() {
    window._sf_endpt=(new Date()).getTime();
    var e = document.createElement('script');
    e.setAttribute('language', 'javascript');
    e.setAttribute('type', 'text/javascript');
    e.setAttribute('src',
       (("https:" == document.location.protocol) ? "https://s3.amazonaws.com/" : "http://") +
       "static.chartbeat.com/js/chartbeat.js");
    document.body.appendChild(e);
  }
  var oldonload = window.onload;
  window.onload = (typeof window.onload != 'function') ?
     loadChartbeat : function() { oldonload(); loadChartbeat(); };
})();

</script>
</body>
</html>	
