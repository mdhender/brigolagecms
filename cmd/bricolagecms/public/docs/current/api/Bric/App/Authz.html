<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="generator" content="Pod::Site 0.50" />
    <title>Bric::App::Authz</title>
  </head>
  <body class="pod">

<ul id="index">
  <li><a href="Authz.html#Name">Name</a></li>
  <li><a href="Authz.html#Synopsis">Synopsis</a></li>
  <li><a href="Authz.html#Description">Description</a></li>
  <li><a href="Authz.html#Interface">Interface</a>
    <ul>
      <li><a href="Authz.html#Constructors">Constructors</a></li>
      <li><a href="Authz.html#Destructors">Destructors</a></li>
      <li><a href="Authz.html#Public-Class-Methods">Public Class Methods</a></li>
      <li><a href="Authz.html#Public-Functions">Public Functions</a></li>
    </ul>
  </li>
  <li><a href="Authz.html#Private">Private</a>
    <ul>
      <li><a href="Authz.html#Private-Class-Methods">Private Class Methods</a></li>
      <li><a href="Authz.html#Private-Instance-Methods">Private Instance Methods</a></li>
      <li><a href="Authz.html#Private-Functions">Private Functions</a></li>
    </ul>
  </li>
  <li><a href="Authz.html#Notes">Notes</a></li>
  <li><a href="Authz.html#Author">Author</a></li>
  <li><a href="Authz.html#See-Also">See Also</a></li>
</ul>

<h1 id="Name">Name</h1>

<p>Bric::App::Authz - Exports functions for checking user authorization.</p>

<h1 id="Synopsis">Synopsis</h1>

<pre><code>use Bric::App::Authz qw(:all);

chk_authz($obj, READ);
# If we get here, we can read $obj.

chk_authz($obj, EDIT);
# If we get here, we can edit $obj.

chk_authz($obj, CREATE);
# If we get here, we can create $obj.</code></pre>

<h1 id="Description">Description</h1>

<p>This package exports the function chk_authz(), which will return true if the current user has permission to perform a given activity to $obj, and redirect to an error page if the user does not have the permission. The permissions available are also exported. They are READ, EDIT, and CREATE. CREATE includes READ and CREATE permissions while EDIT includes READ permission.</p>

<h1 id="Interface">Interface</h1>

<h2 id="Constructors">Constructors</h2>

<p>NONE.</p>

<h2 id="Destructors">Destructors</h2>

<dl>

<dt>$p-&gt;DESTROY</dt>
<dd>

<p>Dummy method to prevent wasting time trying to AUTOLOAD DESTROY.</p>

<p><b>Throws:</b> NONE.</p>

<p><b>Side Effects:</b> NONE.</p>

<p><b>Notes:</b> NONE.</p>

</dd>
</dl>

<h2 id="Public-Class-Methods">Public Class Methods</h2>

<p>NONE.</p>

<h2 id="Public-Functions">Public Functions</h2>

<dl>

<dt>my $bool = chk_authz($obj, $permission, $no_redir, @gids)</dt>
<dd>

<p>Returns true if the current user has the given $permission on $obj, and sends an error page to the browser if the current user does not have $permission on $obj. If $no_redir is true, then the browser won&#39;t be redirected, but chk_authz() will return undef. If any group IDs are passed in via @gids, they will be checked as if $obj was a member of those groups.</p>

<p><b>Throws:</b> NONE.</p>

<p><b>Side Effects:</b> NONE.</p>

<p><b>Notes:</b> NONE.</p>

</dd>
<dt>clear_authz_cache( $obj )</dt>
<dd>

<p>Clears the authz cache for an object as set by a call to <code>chk_authz</code>. The cache is generally useful, as it lasts for the duration of a request, but sometimes group memberships change during the lifetime of a request. In such cases, the authorzation cache for that object should be cleared before the next call to <code>chk_authz</code>.</p>

</dd>
</dl>

<h1 id="Private">Private</h1>

<h2 id="Private-Class-Methods">Private Class Methods</h2>

<p>NONE.</p>

<h2 id="Private-Instance-Methods">Private Instance Methods</h2>

<p>NONE.</p>

<h2 id="Private-Functions">Private Functions</h2>

<p>NONE.</p>

<h1 id="Notes">Notes</h1>

<p>NONE.</p>

<h1 id="Author">Author</h1>

<p>David Wheeler &lt;david@justatheory.com&gt;</p>

<h1 id="See-Also">See Also</h1>

<p><a rel="section" href="../../../../2.0/api/Bric.html" name="Bric">Bric</a>, <a rel="section" href="../../../../2.0/api/Bric/Biz/Person/User.html" name="Bric::Biz::Person::User">Bric::Biz::Person::User</a></p>

</body>
</html>

